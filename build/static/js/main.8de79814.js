!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=63)}([function(t,e,n){"use strict";t.exports=n(70)},function(t,e,n){"use strict";var r=n(71),i=(n(35),n(75));n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return i.a})},function(t,e,n){t.exports=n(124)},function(t,e,n){t.exports=n(72)()},function(t,e,n){"use strict";function r(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="/service-worker.js";a?(o(t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):i(t)})}}function i(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}function o(t){fetch(t).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):i(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}n.d(e,"b",function(){return a}),e.a=r;var a=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},function(t,e,n){"use strict";var r=n(37),i=n(123),o=n(14),a=n(15),s=n(27),u=n(57),l=n(58),c=n(28);n.d(e,"a",function(){return o.a}),n.d(e,"b",function(){return o.b}),n.d(e,"d",function(){return o.d}),n.d(e,"g",function(){return o.f}),n.d(e,"k",function(){return o.g}),n.d(e,"l",function(){return o.h}),n.d(e,"j",function(){return u.b}),n.d(e,"c",function(){return l.a}),n.d(e,"e",function(){return l.b}),n.d(e,"h",function(){return l.d}),n.d(e,"i",function(){return l.e});var p=Object(r.c)({user:o.e,poll:a.a,activity:s.a,searchUsers:u.a,pod:l.c,adventure:c.a}),h=Object(r.a)(i.a),f=Object(r.d)(p,h);e.f=f},function(t,e,n){"use strict";function r(t){return"[object Array]"===S.call(t)}function i(t){return"[object ArrayBuffer]"===S.call(t)}function o(t){return"undefined"!==typeof FormData&&t instanceof FormData}function a(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function s(t){return"string"===typeof t}function u(t){return"number"===typeof t}function l(t){return"undefined"===typeof t}function c(t){return null!==t&&"object"===typeof t}function p(t){return"[object Date]"===S.call(t)}function h(t){return"[object File]"===S.call(t)}function f(t){return"[object Blob]"===S.call(t)}function d(t){return"[object Function]"===S.call(t)}function m(t){return c(t)&&d(t.pipe)}function y(t){return"undefined"!==typeof URLSearchParams&&t instanceof URLSearchParams}function v(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function g(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function _(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),r(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function b(){function t(t,n){"object"===typeof e[n]&&"object"===typeof t?e[n]=b(e[n],t):e[n]=t}for(var e={},n=0,r=arguments.length;n<r;n++)_(arguments[n],t);return e}function x(t,e,n){return _(e,function(e,r){t[r]=n&&"function"===typeof e?w(e,n):e}),t}var w=n(49),E=n(127),S=Object.prototype.toString;t.exports={isArray:r,isArrayBuffer:i,isBuffer:E,isFormData:o,isArrayBufferView:a,isString:s,isNumber:u,isObject:c,isUndefined:l,isDate:p,isFile:h,isBlob:f,isFunction:d,isStream:m,isURLSearchParams:y,isStandardBrowserEnv:g,forEach:_,merge:b,extend:x,trim:v}},function(t,e,n){"use strict";var r=function(t,e,n,r,i,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;u=new Error(e.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};t.exports=r},function(t,e,n){t.exports=n(126)},function(t,e,n){"use strict";var r=function(){};t.exports=r},function(t,e,n){"use strict";var r=function(){};t.exports=r},function(t,e,n){"use strict";var r=(n(102),n(106),n(44));n.d(e,"a",function(){return r.a});var i=(n(107),n(109),n(111),n(113),n(45));n.d(e,"b",function(){return i.a});var o=n(22);n.d(e,"c",function(){return o.a});var a=(n(115),n(117));n.d(e,"d",function(){return a.a});var s=(n(119),n(120),n(121));n.d(e,"e",function(){return s.a})},function(t,e,n){"use strict";var r=n(103);n.d(e,"a",function(){return r.a});var i=n(104);n.d(e,"b",function(){return i.a});var o=n(105);n.d(e,"d",function(){return o.a});var a=n(17);n.d(e,"c",function(){return a.a}),n.d(e,"f",function(){return a.b});var s=n(13);n.d(e,"e",function(){return s.b})},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"f",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"e",function(){return a}),n.d(e,"g",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"b",function(){return l});var r=function(t){return"/"===t.charAt(0)?t:"/"+t},i=function(t){return"/"===t.charAt(0)?t.substr(1):t},o=function(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)},a=function(t,e){return o(t,e)?t.substr(e.length):t},s=function(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t},u=function(t){var e=t||"/",n="",r="",i=e.indexOf("#");-1!==i&&(r=e.substr(i),e=e.substr(0,i));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}},l=function(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}n.d(e,"i",function(){return y}),n.d(e,"h",function(){return v}),n.d(e,"b",function(){return g}),n.d(e,"a",function(){return _}),n.d(e,"g",function(){return b}),n.d(e,"d",function(){return x}),n.d(e,"f",function(){return w}),n.d(e,"c",function(){return E});var o=n(2),a=n.n(o),s=n(8),u=n.n(s),l=n(54),c=(n(4),this),p={firstName:"",lastName:"",phone:"",email:"",address:"",image:"",adventures:[]},h=function(t){return{type:"GET_USER",user:t}},f=function(){return{type:"REMOVE_USER"}},d=function(t){return{type:"USER_ADVENTURES",adventures:t}},m=function(t){return{type:"ADD_ADVENTURE",adventure:t}},y=function(t){return{type:"UPDATE_ADVENTURE",id:t}},v=function(){return function(){var t=i(a.a.mark(function t(e){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.get("/auth/me");case 3:n=t.sent,e(h(n.data||p.loggedInUser)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,c,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},g=function(t){return function(){var e=i(a.a.mark(function e(n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,e.prev=1,e.next=4,u.a.post("/auth/signup",t);case 4:r=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",n(h({error:e.t0})));case 10:try{n(h(r.data)),l.a.push("/users/profile")}catch(t){console.error(t)}case 11:case"end":return e.stop()}},e,c,[[1,7]])}));return function(t){return e.apply(this,arguments)}}()},_=function(t){return function(){var e=i(a.a.mark(function e(n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,e.prev=1,e.next=4,u.a.post("/auth/login",t);case 4:r=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",n(h({error:e.t0})));case 10:try{n(h(r.data)),console.log("res.data",r.data),l.a.push("/pods")}catch(t){console.error(t)}case 11:case"end":return e.stop()}},e,c,[[1,7]])}));return function(t){return e.apply(this,arguments)}}()},b=function(){return function(){var t=i(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post("/auth/logout");case 3:e(f()),l.a.push("/login"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,c,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},x=function(t,e){return function(){var n=i(a.a.mark(function n(r){var i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.put("/auth/profile/"+e,t);case 3:i=n.sent,r(h(i.data)),l.a.push("/pods"),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.error(n.t0);case 11:case"end":return n.stop()}},n,c,[[0,8]])}));return function(t){return n.apply(this,arguments)}}()},w=function(t){return function(){var e=i(a.a.mark(function e(n){var r,i,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/api/users/"+t);case 2:r=e.sent,i=[],o=r.data.pods,o.forEach(function(t){i=i.concat(t.adventures)}),n(d(i));case 7:case"end":return e.stop()}},e,c)}));return function(t){return e.apply(this,arguments)}}()},E=function(t,e){return function(){var n=i(a.a.mark(function n(r){var i,o;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.post("/api/adventures",t);case 3:i=n.sent,o=i.data,r(m(o)),console.log("history",e),e.push("/adventures/"+o.id),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}},n,c,[[0,10]])}));return function(t){return n.apply(this,arguments)}}()};e.e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,e=arguments[1];switch(e.type){case"GET_USER":return Object.assign({},t,e.user);case"REMOVE_USER":return{};case"USER_ADVENTURES":return Object.assign({},t,{adventures:e.adventures});case"ADD_ADVENTURE":return Object.assign({},t,{adventures:[].concat(r(t.adventures),[e.adventure])});case"UPDATE_ADVENTURE":return Object.assign({},t,{adventures:t.adventures.map(function(t){return t.id===e.id?Object.assign({},t,{counter:t.counter++}):t})});default:return t}}},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}n.d(e,"c",function(){return p}),n.d(e,"d",function(){return h}),n.d(e,"b",function(){return f});var i=n(2),o=n.n(i),a=n(8),s=n.n(a),u=(n(4),this),l={poll:{},location:""},c=function(t){return{type:"SET_POLL",poll:t}},p=function(t){return{type:"SET_LOCATION",address:t}},h=function(t){return function(){var e=r(o.a.mark(function e(n){var r,i,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/api/users/poll",t);case 3:r=e.sent,i=r.data,a=c(i),n(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,u,[[0,9]])}));return function(t){return e.apply(this,arguments)}}()},f=function(t,e){return function(){var n=r(o.a.mark(function n(r){var i,a;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s.a.get("/api/adventures/"+t+"/poll/"+e);case 3:i=n.sent,a=i.data,r(c(a)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}},n,u,[[0,8]])}));return function(t){return n.apply(this,arguments)}}()};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,e=arguments[1];switch(e.type){case"SET_POLL":return Object.assign({},t,{poll:Object.assign({},e.poll)});case"SET_LOCATION":return Object.assign({},t,{location:e.address});default:return t}}},function(t,e,n){"use strict";var r=(n(59),n(149));n.d(e,"l",function(){return r.a});var i=(n(29),n(150));n.d(e,"k",function(){return i.a});var o=n(151);n.d(e,"h",function(){return o.a});var a=n(152);n.d(e,"p",function(){return a.a});var s=n(153);n.d(e,"o",function(){return s.a});var u=n(154);n.d(e,"f",function(){return u.a});var l=n(155);n.d(e,"e",function(){return l.a});var c=n(156);n.d(e,"d",function(){return c.a});var p=n(157);n.d(e,"i",function(){return p.a});var h=n(158);n.d(e,"a",function(){return h.a});var f=(n(61),n(159));n.d(e,"j",function(){return f.a});var d=n(62);n.d(e,"m",function(){return d.a});var m=n(160);n.d(e,"c",function(){return m.a});var y=n(161);n.d(e,"g",function(){return y.a});var v=n(163);n.d(e,"n",function(){return v.a});var g=(n(60),n(164));n.d(e,"b",function(){return g.a})},function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return u});var r=n(41),i=n(42),o=n(13),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=function(t,e,n,i){var s=void 0;"string"===typeof t?(s=Object(o.d)(t),s.state=e):(s=a({},t),void 0===s.pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search="?"+s.search):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash="#"+s.hash):s.hash="",void 0!==e&&void 0===s.state&&(s.state=e));try{s.pathname=decodeURI(s.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return n&&(s.key=n),i?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=Object(r.default)(s.pathname,i.pathname)):s.pathname=i.pathname:s.pathname||(s.pathname="/"),s},u=function(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&Object(i.default)(t.state,e.state)}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,u=r(t),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)o.call(n,c)&&(u[c]=n[c]);if(i){s=i(n);for(var p=0;p<s.length;p++)a.call(n,s[p])&&(u[s[p]]=n[s[p]])}}return u}},function(t,e,n){"use strict";function r(t){"undefined"!==typeof console&&"function"===typeof console.error&&console.error(t);try{throw new Error(t)}catch(t){}}e.a=r},function(t,e,n){"use strict";var r=n(10),i=n.n(r),o=function(){var t=null,e=function(e){return i()(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},n=function(e,n,r,o){if(null!=t){var a="function"===typeof t?t(e,n):t;"string"===typeof a?"function"===typeof r?r(a,o):(i()(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==a)}else o(!0)},r=[];return{setPrompt:e,confirmTransitionTo:n,appendListener:function(t){var e=!0,n=function(){e&&t.apply(void 0,arguments)};return r.push(n),function(){e=!1,r=r.filter(function(t){return t!==n})}},notifyListeners:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];r.forEach(function(t){return t.apply(void 0,e)})}}};e.a=o},function(t,e,n){"use strict";var r=n(23);e.a=r.a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(9),s=n.n(a),u=n(7),l=n.n(u),c=n(0),p=n.n(c),h=n(3),f=n.n(h),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m=function(t){function e(){var n,o,a;r(this,e);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,t.call.apply(t,[this].concat(u))),o.state={match:o.computeMatch(o.props.history.location.pathname)},a=n,i(o,a)}return o(e,t),e.prototype.getChildContext=function(){return{router:d({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},e.prototype.computeMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}},e.prototype.componentWillMount=function(){var t=this,e=this.props,n=e.children,r=e.history;l()(null==n||1===p.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen(function(){t.setState({match:t.computeMatch(r.location.pathname)})})},e.prototype.componentWillReceiveProps=function(t){s()(this.props.history===t.history,"You cannot change <Router history>")},e.prototype.componentWillUnmount=function(){this.unlisten()},e.prototype.render=function(){var t=this.props.children;return t?p.a.Children.only(t):null},e}(p.a.Component);m.propTypes={history:f.a.object.isRequired,children:f.a.node},m.contextTypes={router:f.a.object},m.childContextTypes={router:f.a.object.isRequired},e.a=m},function(t,e,n){"use strict";var r=n(47),i=n.n(r),o={},a=0,s=function(t,e){var n=""+e.end+e.strict+e.sensitive,r=o[n]||(o[n]={});if(r[t])return r[t];var s=[],u=i()(t,s,e),l={re:u,keys:s};return a<1e4&&(r[t]=l,a++),l},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"===typeof e&&(e={path:e});var r=e,i=r.path,o=r.exact,a=void 0!==o&&o,u=r.strict,l=void 0!==u&&u,c=r.sensitive,p=void 0!==c&&c;if(null==i)return n;var h=s(i,{end:a,strict:l,sensitive:p}),f=h.re,d=h.keys,m=f.exec(t);if(!m)return null;var y=m[0],v=m.slice(1),g=t===y;return a&&!g?null:{path:i,url:"/"===i&&""===y?"/":y,isExact:g,params:d.reduce(function(t,e,n){return t[e.name]=v[n],t},{})}};e.a=u},function(t,e,n){"use strict";(function(e){function r(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var i=n(6),o=n(130),a={"Content-Type":"application/x-www-form-urlencoded"},s={adapter:function(){var t;return"undefined"!==typeof XMLHttpRequest?t=n(50):"undefined"!==typeof e&&(t=n(50)),t}(),transformRequest:[function(t,e){return o(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(r(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(r(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(t){s.headers[t]={}}),i.forEach(["post","put","patch"],function(t){s.headers[t]=i.merge(a)}),t.exports=s}).call(e,n(129))},function(t,e,n){"use strict";e.__esModule=!0;var r=(e.addLeadingSlash=function(t){return"/"===t.charAt(0)?t:"/"+t},e.stripLeadingSlash=function(t){return"/"===t.charAt(0)?t.substr(1):t},e.hasBasename=function(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)});e.stripBasename=function(t,e){return r(t,e)?t.substr(e.length):t},e.stripTrailingSlash=function(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t},e.parsePath=function(t){var e=t||"/",n="",r="",i=e.indexOf("#");-1!==i&&(r=e.substr(i),e=e.substr(0,i));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}},e.createPath=function(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}n.d(e,"c",function(){return f}),n.d(e,"b",function(){return d}),n.d(e,"d",function(){return m});var o=n(2),a=n.n(o),s=n(8),u=n.n(s),l=(n(4),this),c=[],p=function(t){return{type:"LOAD_ACTIVITIES",activities:t}},h=function(t){return{type:"CHANGE_VOTE",activity:t}},f=function(t){return{type:"REMOVE_ACTIVITIES",activityId:t}},d=function(t){return function(){var e=i(a.a.mark(function e(n){var r,i,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/api/adventures/"+t+"/activities");case 3:r=e.sent,i=r.data,o=p(i),n(o),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,l,[[0,9]])}));return function(t){return e.apply(this,arguments)}}()},m=function(t){return function(){var e=i(a.a.mark(function e(n){var r,i,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("updateThunk",t),e.next=4,u.a.put("/api/activities/"+t.id,t);case 4:r=e.sent,i=r.data,o=h(i),n(o),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("error in update thunk",e.t0);case 13:case"end":return e.stop()}},e,l,[[0,10]])}));return function(t){return e.apply(this,arguments)}}()};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,e=arguments[1];switch(e.type){case"LOAD_ACTIVITIES":return[].concat(r(e.activities));case"CHANGE_VOTE":return t.map(function(t){return t.id===e.activity.id?e.activity:t});case"REMOVE_ACTIVITIES":return t.filter(function(t){return t.id===e.activityId});default:return t}}},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}n.d(e,"b",function(){return p});var i=n(2),o=n.n(i),a=n(8),s=n.n(a),u=(n(4),this),l={},c=function(t){return{type:"SELECT_ADVENTURE",adventure:t}},p=function(t){return function(){var e=r(o.a.mark(function e(n){var r,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("/api/adventures/"+t);case 3:r=e.sent,i=r.data,n(c(i)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,u,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,e=arguments[1];switch(e.type){case"SELECT_ADVENTURE":return Object.assign({},e.adventure);default:return t}}},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=(n(4),function(){return i.a.createElement("div",{id:"login"},i.a.createElement("a",{href:"/auth/google"},i.a.createElement("button",{className:"btn btn-primary btn-lg btn-block"},"Login with Google")),i.a.createElement("br",null),i.a.createElement("br",null))});e.a=o},function(t,e,n){"use strict";function r(){}function i(t){try{return t.then}catch(t){return v=t,g}}function o(t,e){try{return t(e)}catch(t){return v=t,g}}function a(t,e,n){try{t(e,n)}catch(t){return v=t,g}}function s(t){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,t!==r&&m(t,this)}function u(t,e,n){return new t.constructor(function(i,o){var a=new s(r);a.then(i,o),l(t,new d(e,n,a))})}function l(t,e){for(;3===t._83;)t=t._18;if(s._47&&s._47(t),0===t._83)return 0===t._75?(t._75=1,void(t._38=e)):1===t._75?(t._75=2,void(t._38=[t._38,e])):void t._38.push(e);c(t,e)}function c(t,e){y(function(){var n=1===t._83?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._83?p(e.promise,t._18):h(e.promise,t._18));var r=o(n,t._18);r===g?h(e.promise,v):p(e.promise,r)})}function p(t,e){if(e===t)return h(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"===typeof e||"function"===typeof e)){var n=i(e);if(n===g)return h(t,v);if(n===t.then&&e instanceof s)return t._83=3,t._18=e,void f(t);if("function"===typeof n)return void m(n.bind(e),t)}t._83=1,t._18=e,f(t)}function h(t,e){t._83=2,t._18=e,s._71&&s._71(t,e),f(t)}function f(t){if(1===t._75&&(l(t,t._38),t._38=null),2===t._75){for(var e=0;e<t._38.length;e++)l(t,t._38[e]);t._38=null}}function d(t,e,n){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.promise=n}function m(t,e){var n=!1,r=a(t,function(t){n||(n=!0,p(e,t))},function(t){n||(n=!0,h(e,t))});n||r!==g||(n=!0,h(e,v))}var y=n(66),v=null,g={};t.exports=s,s._47=null,s._71=null,s._44=r,s.prototype.then=function(t,e){if(this.constructor!==s)return u(this,t,e);var n=new s(r);return l(this,new d(t,e,n)),n}},function(t,e,n){"use strict";function r(t,e,n,r,o,a,s,u){if(i(e),!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,a,s,u],p=0;l=new Error(e.replace(/%s/g,function(){return c[p++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var i=function(t){};t.exports=r},function(t,e,n){"use strict";var r={};t.exports=r},function(t,e,n){"use strict";function r(t){return function(){return t}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},t.exports=i},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n(3),i=n.n(r),o=i.a.shape({trySubscribe:i.a.func.isRequired,tryUnsubscribe:i.a.func.isRequired,notifyNestedSubs:i.a.func.isRequired,isSubscribed:i.a.func.isRequired}),a=i.a.shape({subscribe:i.a.func.isRequired,dispatch:i.a.func.isRequired,getState:i.a.func.isRequired})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function s(){}function u(t,e){var n={run:function(r){try{var i=t(e.getState(),r);(i!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=i,n.error=null)}catch(t){n.shouldComponentUpdate=!0,n.error=t}}};return n}function l(t){var e,n,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=l.getDisplayName,h=void 0===c?function(t){return"ConnectAdvanced("+t+")"}:c,b=l.methodName,x=void 0===b?"connectAdvanced":b,w=l.renderCountProp,E=void 0===w?void 0:w,S=l.shouldHandleStateChanges,T=void 0===S||S,k=l.storeKey,C=void 0===k?"store":k,P=l.withRef,A=void 0!==P&&P,O=a(l,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),I=C+"Subscription",M=g++,z=(e={},e[C]=y.a,e[I]=y.b,e),R=(n={},n[I]=y.b,n);return function(e){f()("function"==typeof e,"You must pass a component to the function returned by "+x+". Instead received "+JSON.stringify(e));var n=e.displayName||e.name||"Component",a=h(n),l=v({},O,{getDisplayName:h,methodName:x,renderCountProp:E,shouldHandleStateChanges:T,storeKey:C,withRef:A,displayName:a,wrappedComponentName:n,WrappedComponent:e}),c=function(n){function c(t,e){r(this,c);var o=i(this,n.call(this,t,e));return o.version=M,o.state={},o.renderCount=0,o.store=t[C]||e[C],o.propsMode=Boolean(t[C]),o.setWrappedInstance=o.setWrappedInstance.bind(o),f()(o.store,'Could not find "'+C+'" in either the context or props of "'+a+'". Either wrap the root component in a <Provider>, or explicitly pass "'+C+'" as a prop to "'+a+'".'),o.initSelector(),o.initSubscription(),o}return o(c,n),c.prototype.getChildContext=function(){var t,e=this.propsMode?null:this.subscription;return t={},t[I]=e||this.context[I],t},c.prototype.componentDidMount=function(){T&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},c.prototype.componentWillReceiveProps=function(t){this.selector.run(t)},c.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},c.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=s,this.store=null,this.selector.run=s,this.selector.shouldComponentUpdate=!1},c.prototype.getWrappedInstance=function(){return f()(A,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+x+"() call."),this.wrappedInstance},c.prototype.setWrappedInstance=function(t){this.wrappedInstance=t},c.prototype.initSelector=function(){var e=t(this.store.dispatch,l);this.selector=u(e,this.store),this.selector.run(this.props)},c.prototype.initSubscription=function(){if(T){var t=(this.propsMode?this.props:this.context)[I];this.subscription=new m.a(this.store,t,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},c.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(_)):this.notifyNestedSubs()},c.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},c.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},c.prototype.addExtraProps=function(t){if(!A&&!E&&(!this.propsMode||!this.subscription))return t;var e=v({},t);return A&&(e.ref=this.setWrappedInstance),E&&(e[E]=this.renderCount++),this.propsMode&&this.subscription&&(e[I]=this.subscription),e},c.prototype.render=function(){var t=this.selector;if(t.shouldComponentUpdate=!1,t.error)throw t.error;return Object(d.createElement)(e,this.addExtraProps(t.props))},c}(d.Component);return c.WrappedComponent=e,c.displayName=a,c.childContextTypes=R,c.contextTypes=z,c.propTypes=z,p()(c,e)}}e.a=l;var c=n(36),p=n.n(c),h=n(7),f=n.n(h),d=n(0),m=(n.n(d),n(74)),y=n(34),v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g=0,_={}},function(t,e,n){"use strict";function r(t,e,n){if("string"!==typeof e){if(p){var h=c(e);h&&h!==p&&r(t,h,n)}var f=s(e);u&&(f=f.concat(u(e)));for(var d=0;d<f.length;++d){var m=f[d];if(!i[m]&&!o[m]&&(!n||!n[m])){var y=l(e,m);try{a(t,m,y)}catch(t){}}}return t}return t}var i={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a=Object.defineProperty,s=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,c=Object.getPrototypeOf,p=c&&c(Object);t.exports=r},function(t,e,n){"use strict";function r(t){if("object"!==("undefined"===typeof t?"undefined":d(t))||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function i(t,e,n){function o(){g===v&&(g=v.slice())}function a(){if(_)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return y}function s(t){if("function"!==typeof t)throw new Error("Expected the listener to be a function.");if(_)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var e=!0;return o(),g.push(t),function(){if(e){if(_)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");e=!1,o();var n=g.indexOf(t);g.splice(n,1)}}}function u(t){if(!r(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(_)throw new Error("Reducers may not dispatch actions.");try{_=!0,y=m(y,t)}finally{_=!1}for(var e=v=g,n=0;n<e.length;n++){(0,e[n])()}return t}function l(t){if("function"!==typeof t)throw new Error("Expected the nextReducer to be a function.");m=t,u({type:f.REPLACE})}function c(){var t,e=s;return t={subscribe:function(t){function n(){t.next&&t.next(a())}if("object"!==("undefined"===typeof t?"undefined":d(t))||null===t)throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:e(n)}}},t[h.a]=function(){return this},t}var p;if("function"===typeof e&&"undefined"===typeof n&&(n=e,e=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error("Expected the enhancer to be a function.");return n(i)(t,e)}if("function"!==typeof t)throw new Error("Expected the reducer to be a function.");var m=t,y=e,v=[],g=v,_=!1;return u({type:f.INIT}),p={dispatch:u,subscribe:s,getState:a,replaceReducer:l},p[h.a]=c,p}function o(t,e){var n=e&&e.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function a(t){Object.keys(t).forEach(function(e){var n=t[e];if("undefined"===typeof n(void 0,{type:f.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if("undefined"===typeof n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+f.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function s(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];"function"===typeof t[i]&&(n[i]=t[i])}var s=Object.keys(n),u=void 0;try{a(n)}catch(t){u=t}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(u)throw u;for(var r=!1,i={},a=0;a<s.length;a++){var l=s[a],c=n[l],p=t[l],h=c(p,e);if("undefined"===typeof h){var f=o(l,e);throw new Error(f)}i[l]=h,r=r||h!==p}return r?i:t}}function u(t,e){return function(){return e(t.apply(this,arguments))}}function l(t,e){if("function"===typeof t)return u(t,e);if("object"!==("undefined"===typeof t?"undefined":d(t))||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":"undefined"===typeof t?"undefined":d(t))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),r={},i=0;i<n.length;i++){var o=n[i],a=t[o];"function"===typeof a&&(r[o]=u(a,e))}return r}function c(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}function p(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=t.apply(void 0,r),a=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},s={getState:o.getState,dispatch:function(){return a.apply(void 0,arguments)}},u=e.map(function(t){return t(s)});return a=c.apply(void 0,u)(o.dispatch),m({},o,{dispatch:a})}}}n.d(e,"d",function(){return i}),n.d(e,"c",function(){return s}),n.d(e,"b",function(){return l}),n.d(e,"a",function(){return p});var h=n(78),f={INIT:"@@redux/INIT"+Math.random().toString(36).substring(7).split("").join("."),REPLACE:"@@redux/REPLACE"+Math.random().toString(36).substring(7).split("").join(".")},d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){"use strict";function r(t){return function(e,n){function r(){return i}var i=t(e,n);return r.dependsOnOwnProps=!1,r}}function i(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?Boolean(t.dependsOnOwnProps):1!==t.length}function o(t,e){return function(e,n){var r=(n.displayName,function(t,e){return r.dependsOnOwnProps?r.mapToProps(t,e):r.mapToProps(t)});return r.dependsOnOwnProps=!0,r.mapToProps=function(e,n){r.mapToProps=t,r.dependsOnOwnProps=i(t);var o=r(e,n);return"function"===typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=i(o),o=r(e,n)),o},r}}e.a=r,e.b=o;n(39)},function(t,e,n){"use strict";n(81),n(20)},function(t,e,n){"use strict";var r=n(83),i=r.a.Symbol;e.a=i},function(t,e,n){"use strict";function r(t){return"/"===t.charAt(0)}function i(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t&&t.split("/")||[],o=e&&e.split("/")||[],a=t&&r(t),s=e&&r(e),u=a||s;if(t&&r(t)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";var l=void 0;if(o.length){var c=o[o.length-1];l="."===c||".."===c||""===c}else l=!1;for(var p=0,h=o.length;h>=0;h--){var f=o[h];"."===f?i(o,h):".."===f?(i(o,h),p++):p&&(i(o,h),p--)}if(!u)for(;p--;p)o.unshift("..");!u||""===o[0]||o[0]&&r(o[0])||o.unshift("");var d=o.join("/");return l&&"/"!==d.substr(-1)&&(d+="/"),d}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},function(t,e,n){"use strict";function r(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(t,n){return r(t,e[n])});var n="undefined"===typeof t?"undefined":i(t);if(n!==("undefined"===typeof e?"undefined":i(e)))return!1;if("object"===n){var o=t.valueOf(),a=e.valueOf();if(o!==t||a!==e)return r(o,a);var s=Object.keys(t),u=Object.keys(e);return s.length===u.length&&s.every(function(n){return r(t[n],e[n])})}return!1}Object.defineProperty(e,"__esModule",{value:!0});var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=r},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"g",function(){return s}),n.d(e,"h",function(){return u}),n.d(e,"f",function(){return l}),n.d(e,"d",function(){return c});var r=!("undefined"===typeof window||!window.document||!window.document.createElement),i=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},o=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},a=function(t,e){return e(window.confirm(t))},s=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},u=function(){return-1===window.navigator.userAgent.indexOf("Trident")},l=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},c=function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),u=n.n(s),l=n(3),c=n.n(l),p=n(7),h=n.n(p),f=n(12),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m=function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)},y=function(t){function e(){var n,r,a;i(this,e);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=o(this,t.call.apply(t,[this].concat(u))),r.handleClick=function(t){if(r.props.onClick&&r.props.onClick(t),!t.defaultPrevented&&0===t.button&&!r.props.target&&!m(t)){t.preventDefault();var e=r.context.router.history,n=r.props,i=n.replace,o=n.to;i?e.replace(o):e.push(o)}},a=n,o(r,a)}return a(e,t),e.prototype.render=function(){var t=this.props,e=(t.replace,t.to),n=t.innerRef,i=r(t,["replace","to","innerRef"]);h()(this.context.router,"You should not use <Link> outside a <Router>"),h()(void 0!==e,'You must specify the "to" property');var o=this.context.router.history,a="string"===typeof e?Object(f.c)(e,null,null,o.location):e,s=o.createHref(a);return u.a.createElement("a",d({},i,{onClick:this.handleClick,href:s,ref:n}))},e}(u.a.Component);y.propTypes={onClick:c.a.func,target:c.a.string,replace:c.a.bool,to:c.a.oneOfType([c.a.string,c.a.object]).isRequired,innerRef:c.a.oneOfType([c.a.string,c.a.func])},y.defaultProps={replace:!1},y.contextTypes={router:c.a.shape({history:c.a.shape({push:c.a.func.isRequired,replace:c.a.func.isRequired,createHref:c.a.func.isRequired}).isRequired}).isRequired},e.a=y},function(t,e,n){"use strict";var r=n(46);e.a=r.a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(9),s=n.n(a),u=n(7),l=n.n(u),c=n(0),p=n.n(c),h=n(3),f=n.n(h),d=n(24),m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},y=function(t){return 0===p.a.Children.count(t)},v=function(t){function e(){var n,o,a;r(this,e);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,t.call.apply(t,[this].concat(u))),o.state={match:o.computeMatch(o.props,o.context.router)},a=n,i(o,a)}return o(e,t),e.prototype.getChildContext=function(){return{router:m({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},e.prototype.computeMatch=function(t,e){var n=t.computedMatch,r=t.location,i=t.path,o=t.strict,a=t.exact,s=t.sensitive;if(n)return n;l()(e,"You should not use <Route> or withRouter() outside a <Router>");var u=e.route,c=(r||u.location).pathname;return Object(d.a)(c,{path:i,strict:o,exact:a,sensitive:s},u.match)},e.prototype.componentWillMount=function(){s()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),s()(!(this.props.component&&this.props.children&&!y(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),s()(!(this.props.render&&this.props.children&&!y(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},e.prototype.componentWillReceiveProps=function(t,e){s()(!(t.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),s()(!(!t.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(t,e.router)})},e.prototype.render=function(){var t=this.state.match,e=this.props,n=e.children,r=e.component,i=e.render,o=this.context.router,a=o.history,s=o.route,u=o.staticContext,l=this.props.location||s.location,c={match:t,location:l,history:a,staticContext:u};return r?t?p.a.createElement(r,c):null:i?t?i(c):null:"function"===typeof n?n(c):n&&!y(n)?p.a.Children.only(n):null},e}(p.a.Component);v.propTypes={computedMatch:f.a.object,path:f.a.string,exact:f.a.bool,strict:f.a.bool,sensitive:f.a.bool,component:f.a.func,render:f.a.func,children:f.a.oneOfType([f.a.func,f.a.node]),location:f.a.object},v.contextTypes={router:f.a.shape({history:f.a.object.isRequired,route:f.a.object.isRequired,staticContext:f.a.object})},v.childContextTypes={router:f.a.object.isRequired},e.a=v},function(t,e,n){function r(t,e){for(var n,r=[],i=0,o=0,a="",s=e&&e.delimiter||"/";null!=(n=g.exec(t));){var c=n[0],p=n[1],h=n.index;if(a+=t.slice(o,h),o=h+c.length,p)a+=p[1];else{var f=t[o],d=n[2],m=n[3],y=n[4],v=n[5],_=n[6],b=n[7];a&&(r.push(a),a="");var x=null!=d&&null!=f&&f!==d,w="+"===_||"*"===_,E="?"===_||"*"===_,S=n[2]||s,T=y||v;r.push({name:m||i++,prefix:d||"",delimiter:S,optional:E,repeat:w,partial:x,asterisk:!!b,pattern:T?l(T):b?".*":"[^"+u(S)+"]+?"})}}return o<t.length&&(a+=t.substr(o)),a&&r.push(a),r}function i(t,e){return s(r(t,e))}function o(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function a(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function s(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"===typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var i="",s=n||{},u=r||{},l=u.pretty?o:encodeURIComponent,c=0;c<t.length;c++){var p=t[c];if("string"!==typeof p){var h,f=s[p.name];if(null==f){if(p.optional){p.partial&&(i+=p.prefix);continue}throw new TypeError('Expected "'+p.name+'" to be defined')}if(v(f)){if(!p.repeat)throw new TypeError('Expected "'+p.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(p.optional)continue;throw new TypeError('Expected "'+p.name+'" to not be empty')}for(var d=0;d<f.length;d++){if(h=l(f[d]),!e[c].test(h))throw new TypeError('Expected all "'+p.name+'" to match "'+p.pattern+'", but received `'+JSON.stringify(h)+"`");i+=(0===d?p.prefix:p.delimiter)+h}}else{if(h=p.asterisk?a(f):l(f),!e[c].test(h))throw new TypeError('Expected "'+p.name+'" to match "'+p.pattern+'", but received "'+h+'"');i+=p.prefix+h}}else i+=p}return i}}function u(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function c(t,e){return t.keys=e,t}function p(t){return t.sensitive?"":"i"}function h(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(t,e)}function f(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(y(t[i],e,n).source);return c(new RegExp("(?:"+r.join("|")+")",p(n)),e)}function d(t,e,n){return m(r(t,n),e,n)}function m(t,e,n){v(e)||(n=e||n,e=[]),n=n||{};for(var r=n.strict,i=!1!==n.end,o="",a=0;a<t.length;a++){var s=t[a];if("string"===typeof s)o+=u(s);else{var l=u(s.prefix),h="(?:"+s.pattern+")";e.push(s),s.repeat&&(h+="(?:"+l+h+")*"),h=s.optional?s.partial?l+"("+h+")?":"(?:"+l+"("+h+"))?":l+"("+h+")",o+=h}}var f=u(n.delimiter||"/"),d=o.slice(-f.length)===f;return r||(o=(d?o.slice(0,-f.length):o)+"(?:"+f+"(?=$))?"),o+=i?"$":r&&d?"":"(?="+f+"|$)",c(new RegExp("^"+o,p(n)),e)}function y(t,e,n){return v(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?h(t,e):v(t)?f(t,e,n):d(t,e,n)}var v=n(110);t.exports=y,t.exports.parse=r,t.exports.compile=i,t.exports.tokensToFunction=s,t.exports.tokensToRegExp=m;var g=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(t,e,n){"use strict";var r=n(47),i=n.n(r),o={},a=0,s=function(t){var e=t,n=o[e]||(o[e]={});if(n[t])return n[t];var r=i.a.compile(t);return a<1e4&&(n[t]=r,a++),r},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"/"===t?t:s(t)(e,{pretty:!0})};e.a=u},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(6),i=n(131),o=n(133),a=n(134),s=n(135),u=n(51),l="undefined"!==typeof window&&window.btoa&&window.btoa.bind(window)||n(136);t.exports=function(t){return new Promise(function(e,c){var p=t.data,h=t.headers;r.isFormData(p)&&delete h["Content-Type"];var f=new XMLHttpRequest,d="onreadystatechange",m=!1;if("undefined"===typeof window||!window.XDomainRequest||"withCredentials"in f||s(t.url)||(f=new window.XDomainRequest,d="onload",m=!0,f.onprogress=function(){},f.ontimeout=function(){}),t.auth){var y=t.auth.username||"",v=t.auth.password||"";h.Authorization="Basic "+l(y+":"+v)}if(f.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f[d]=function(){if(f&&(4===f.readyState||m)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?a(f.getAllResponseHeaders()):null,r=t.responseType&&"text"!==t.responseType?f.response:f.responseText,o={data:r,status:1223===f.status?204:f.status,statusText:1223===f.status?"No Content":f.statusText,headers:n,config:t,request:f};i(e,c,o),f=null}},f.onerror=function(){c(u("Network Error",t,null,f)),f=null},f.ontimeout=function(){c(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var g=n(137),_=(t.withCredentials||s(t.url))&&t.xsrfCookieName?g.read(t.xsrfCookieName):void 0;_&&(h[t.xsrfHeaderName]=_)}if("setRequestHeader"in f&&r.forEach(h,function(t,e){"undefined"===typeof p&&"content-type"===e.toLowerCase()?delete h[e]:f.setRequestHeader(e,t)}),t.withCredentials&&(f.withCredentials=!0),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"===typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){f&&(f.abort(),c(t),f=null)}),void 0===p&&(p=null),f.send(p)})}},function(t,e,n){"use strict";var r=n(132);t.exports=function(t,e,n,i,o){var a=new Error(t);return r(a,e,n,i,o)}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e,n){"use strict";var r=n(145),i=n.n(r),o=n(147),a=(n.n(o),i()());e.a=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.locationsAreEqual=e.createLocation=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(41),a=r(o),s=n(42),u=r(s),l=n(26);e.createLocation=function(t,e,n,r){var o=void 0;"string"===typeof t?(o=(0,l.parsePath)(t),o.state=e):(o=i({},t),void 0===o.pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==e&&void 0===o.state&&(o.state=e));try{o.pathname=decodeURI(o.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return n&&(o.key=n),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=(0,a.default)(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o},e.locationsAreEqual=function(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&(0,u.default)(t.state,e.state)}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(10),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=function(){var t=null,e=function(e){return(0,i.default)(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},n=function(e,n,r,o){if(null!=t){var a="function"===typeof t?t(e,n):t;"string"===typeof a?"function"===typeof r?r(a,o):((0,i.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==a)}else o(!0)},r=[];return{setPrompt:e,confirmTransitionTo:n,appendListener:function(t){var e=!0,n=function(){e&&t.apply(void 0,arguments)};return r.push(n),function(){e=!1,r=r.filter(function(t){return t!==n})}},notifyListeners:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];r.forEach(function(t){return t.apply(void 0,e)})}}};e.default=o},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}n.d(e,"b",function(){return p});var i=n(2),o=n.n(i),a=n(8),s=n.n(a),u=(n(4),this),l={allUsers:[],singleUser:{}},c=function(t){return{type:"GET_ALL_USERS",allUsers:t}},p=function(){return function(){var t=r(o.a.mark(function t(e){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.get("/api/users");case 3:n=t.sent,e(c(n.data)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,u,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,e=arguments[1];switch(e.type){case"GET_ALL_USERS":return Object.assign({},t,{allUsers:e.allUsers});default:return t}}},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}n.d(e,"a",function(){return f}),n.d(e,"e",function(){return d}),n.d(e,"d",function(){return m}),n.d(e,"b",function(){return y});var i=n(2),o=n.n(i),a=n(8),s=n.n(a),u=(n(4),this),l={},c=function(t){return{type:"GET_POD",pod:t}},p=function(t){return{type:"USERS_PODS",pod:t}},h=function(t){return{type:"ADD_USER_TO_POD",user:t}},f=function(t){return function(){var e=r(o.a.mark(function e(n){var r,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/api/pods",t);case 3:return r=e.sent,i=r.data,e.abrupt("return",Promise.resolve(i));case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,u,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},d=function(t){return function(){var e=r(o.a.mark(function e(n){var r,i,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/api/pods/"+t);case 2:return r=e.sent,i=r.data,a=c(i),e.abrupt("return",n(a));case 6:case"end":return e.stop()}},e,u)}));return function(t){return e.apply(this,arguments)}}()},m=function(t){return function(){var e=r(o.a.mark(function e(n){var r,i,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("/api/users/"+t);case 2:return r=e.sent,i=r.data,a=p(i),e.abrupt("return",n(a));case 6:case"end":return e.stop()}},e,u)}));return function(t){return e.apply(this,arguments)}}()},y=function(t,e){return function(){var n=r(o.a.mark(function n(r){var i,a,l;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.post("/api/pods/userPod",{podId:e,userId:t});case 2:return i=n.sent,a=i.data.user,l=h(a),n.abrupt("return",r(l));case 6:case"end":return n.stop()}},n,u)}));return function(t){return n.apply(this,arguments)}}()};e.c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,e=arguments[1];switch(e.type){case"ADD_POD":case"GET_POD":case"USERS_PODS":return Object.assign({},e.pod);case"ADD_USER_TO_POD":var n=t.users.slice();return n.findIndex(function(t){return t.id===e.user.id})<0&&n.push(e.user),Object.assign({},t,{users:n});default:return t}}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(148),l=n(16),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),p=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),c(e,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(l.h,null),s.a.createElement(u.a,null))}}]),e}(a.Component);e.a=p},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(1),l=n(5),c=n(11),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={pods:null,users:null},t}return o(e,t),p(e,[{key:"componentDidMount",value:function(){this.props.getAllUsersPod(this.props.id)}},{key:"render",value:function(){return this.props.pods?s.a.createElement("div",null,s.a.createElement("h3",{className:"text-center font-weight-normal"},"Current pods:"),s.a.createElement("div",null,this.props.pods.map(function(t){return s.a.createElement("div",{id:"pod",key:t.id,className:"text-center"},s.a.createElement(c.a,{to:"/pods/"+t.id},s.a.createElement("h5",null,t.name)))}))):s.a.createElement("h1",null,"You have no pods yet. Create one so you can plan an adventure with your friends!")}}]),e}(a.Component),f=function(t){return{pods:t.pod.pods,users:t.pod.users}},d=function(t){return{getAllUsersPod:function(e){return t(Object(l.h)(e))}}};e.a=Object(u.b)(f,d)(h)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return{change:function(e){return t(Object(c.d)(e))},remove:function(e){return t(Object(c.c)(e))}}}var s=n(0),u=n.n(s),l=n(1),c=n(27),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h=function(t){function e(){var t,n,o,a;r(this,e);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),o.handleUpVote=function(t){o.props.change({id:o.props.activity.id,upVotes:o.props.activity.upVotes+1})},o.handleDownVote=function(t){o.props.change({id:o.props.activity.id,downVotes:o.props.activity.downVotes+1})},o.handleSelect=function(t){o.props.change({id:o.props.activity.id,selected:!0}),o.props.remove(o.props.activity.id)},a=n,i(o,a)}return o(e,t),p(e,[{key:"render",value:function(){if(this.props){var t=this.props.activity;return console.log("activity",t),u.a.createElement("div",null,u.a.createElement("h3",null,t.name),u.a.createElement("h4",null,"+"),u.a.createElement("h4",null,t.upVotes),u.a.createElement("h4",null,"-"),u.a.createElement("h4",null,t.downVotes),!t.selected&&u.a.createElement("div",null,u.a.createElement("button",{onClick:this.handleUpVote},u.a.createElement("span",{role:"img","aria-label":"thumbs-up"},"\ud83d\udc4d")),u.a.createElement("button",{onClick:this.handleDownVote},u.a.createElement("span",{role:"img","aria-label":"thumbs-up"},"\ud83d\udc4e")),this.props.isCoord&&u.a.createElement("button",{onClick:this.handleSelect},"Select")))}}}]),e}(s.Component);e.a=Object(l.b)(null,a)(h)},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),u=n.n(s),l=n(0),c=n.n(l),p=n(1),h=n(5),f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={userToSearch:"",usersFound:[],noUserFound:!1,userFound:!1,userId:null,podId:null},t.handleChange=t.handleChange.bind(t),t.handleSubmit=t.handleSubmit.bind(t),t.handleClick=t.handleClick.bind(t),t}return a(e,t),f(e,[{key:"componentDidMount",value:function(){this.props.getUsersThunk()}},{key:"handleChange",value:function(t){this.setState({userToSearch:t.target.value})}},{key:"handleClick",value:function(){function t(t){return e.apply(this,arguments)}var e=r(u.a.mark(function t(e){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),this.props.createUserPodThunk(e.target.value,this.props.podId);case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"handleSubmit",value:function(t){var e=this;t.preventDefault();var n=this.props.users.filter(function(t){return t.fullName.toLowerCase().includes(e.state.userToSearch.toLowerCase())});n.length?this.setState({usersFound:n,userFound:!0}):this.setState({noUserFound:!0})}},{key:"render",value:function(){var t=this;return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement("input",{id:"searchInput",type:"search",name:"userToSearch",onChange:this.handleChange,className:"form-control mx-sm-3",placeholder:"Search for & add friends to pod!","aria-label":"Search"}),c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-dark btn-lg btn-block",type:"submit"},"Search"))),this.state.noUserFound?c.a.createElement("h4",null,"No user found by that name"):null,this.state.userFound?c.a.createElement("h4",{className:"font-weight-normal"},"Here are the users with that name:",c.a.createElement("ul",null,this.state.usersFound.map(function(e,n){return c.a.createElement("li",{key:n},c.a.createElement("div",null,e.image,e.fullName),c.a.createElement("button",{className:"btn btn-dark btn-sm",value:e.id,onClick:t.handleClick},"Add to Pod"))}))):null)}}]),e}(c.a.Component),m=function(t){return{users:t.searchUsers.allUsers,userId:t.user.id}},y=function(t){return{getUsersThunk:function(){return t(Object(h.j)())},createUserPodThunk:function(e,n){return t(Object(h.e)(e,n))}}};e.a=Object(p.b)(m,y)(d)},function(t,e,n){n(64),t.exports=n(69)},function(t,e,n){"use strict";"undefined"===typeof Promise&&(n(65).enable(),window.Promise=n(67)),n(68),Object.assign=n(19)},function(t,e,n){"use strict";function r(){l=!1,s._47=null,s._71=null}function i(t){function e(e){(t.allRejections||a(p[e].error,t.whitelist||u))&&(p[e].displayId=c++,t.onUnhandled?(p[e].logged=!0,t.onUnhandled(p[e].displayId,p[e].error)):(p[e].logged=!0,o(p[e].displayId,p[e].error)))}function n(e){p[e].logged&&(t.onHandled?t.onHandled(p[e].displayId,p[e].error):p[e].onUnhandled||(console.warn("Promise Rejection Handled (id: "+p[e].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+p[e].displayId+".")))}t=t||{},l&&r(),l=!0;var i=0,c=0,p={};s._47=function(t){2===t._83&&p[t._56]&&(p[t._56].logged?n(t._56):clearTimeout(p[t._56].timeout),delete p[t._56])},s._71=function(t,n){0===t._75&&(t._56=i++,p[t._56]={displayId:null,error:n,timeout:setTimeout(e.bind(null,t._56),a(n,u)?100:2e3),logged:!1})}}function o(t,e){console.warn("Possible Unhandled Promise Rejection (id: "+t+"):"),((e&&(e.stack||e))+"").split("\n").forEach(function(t){console.warn("  "+t)})}function a(t,e){return e.some(function(e){return t instanceof e})}var s=n(30),u=[ReferenceError,TypeError,RangeError],l=!1;e.disable=r,e.enable=i},function(t,e,n){"use strict";(function(e){function n(t){a.length||(o(),s=!0),a[a.length]=t}function r(){for(;u<a.length;){var t=u;if(u+=1,a[t].call(),u>l){for(var e=0,n=a.length-u;e<n;e++)a[e]=a[e+u];a.length-=u,u=0}}a.length=0,u=0,s=!1}function i(t){return function(){function e(){clearTimeout(n),clearInterval(r),t()}var n=setTimeout(e,0),r=setInterval(e,50)}}t.exports=n;var o,a=[],s=!1,u=0,l=1024,c="undefined"!==typeof e?e:self,p=c.MutationObserver||c.WebKitMutationObserver;o="function"===typeof p?function(t){var e=1,n=new p(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}(r):i(r),n.requestFlush=o,n.makeRequestCallFromTimer=i}).call(e,n(18))},function(t,e,n){"use strict";function r(t){var e=new i(i._44);return e._83=1,e._18=t,e}var i=n(30);t.exports=i;var o=r(!0),a=r(!1),s=r(null),u=r(void 0),l=r(0),c=r("");i.resolve=function(t){if(t instanceof i)return t;if(null===t)return s;if(void 0===t)return u;if(!0===t)return o;if(!1===t)return a;if(0===t)return l;if(""===t)return c;if("object"===typeof t||"function"===typeof t)try{var e=t.then;if("function"===typeof e)return new i(e.bind(t))}catch(t){return new i(function(e,n){n(t)})}return r(t)},i.all=function(t){var e=Array.prototype.slice.call(t);return new i(function(t,n){function r(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._83;)s=s._18;return 1===s._83?r(a,s._18):(2===s._83&&n(s._18),void s.then(function(t){r(a,t)},n))}var u=s.then;if("function"===typeof u){return void new i(u.bind(s)).then(function(t){r(a,t)},n)}}e[a]=s,0===--o&&t(e)}if(0===e.length)return t([]);for(var o=e.length,a=0;a<e.length;a++)r(a,e[a])})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(t){return new i(function(e,n){t.forEach(function(t){i.resolve(t).then(e,n)})})},i.prototype.catch=function(t){return this.then(null,t)}},function(t,e){!function(t){"use strict";function e(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!==typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return v.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function u(t){var e=new FileReader,n=a(e);return e.readAsText(t),n}function l(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function c(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"===typeof t)this._bodyText=t;else if(v.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(v.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(v.arrayBuffer&&v.blob&&_(t))this._bodyArrayBuffer=c(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!b(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(t)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(t){var e=t.toUpperCase();return x.indexOf(e)>-1?e:t}function f(t,e){e=e||{};var n=e.body;if(t instanceof f){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=h(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function m(t){var e=new i;return t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}function y(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var v={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(v.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=function(t){return t&&DataView.prototype.isPrototypeOf(t)},b=ArrayBuffer.isView||function(t){return t&&g.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];this.map[t]=i?i+","+r:r},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=n(r)},i.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},v.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},p.call(f.prototype),p.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var w=[301,302,303,307,308];y.redirect=function(t,e){if(-1===w.indexOf(e))throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=f,t.Response=y,t.fetch=function(t,e){return new Promise(function(n,r){var i=new f(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:m(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;n(new y(e,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&v.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send("undefined"===typeof i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1),a=n(94),s=n.n(a),u=n(11),l=n(4),c=n(5),p=n(59),h=n(54);s.a.render(i.a.createElement(o.a,{store:c.f},i.a.createElement(u.c,{history:h.a},i.a.createElement(p.a,null))),document.getElementById("root")),Object(l.a)()},function(t,e,n){"use strict";function r(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);g(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function i(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||M}function o(){}function a(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||M}function s(t,e,n){var r=void 0,i={},o=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)L.call(e,r)&&!D.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:w,type:t,key:o,ref:a,props:i,_owner:R.current}}function u(t){return"object"===typeof t&&null!==t&&t.$$typeof===w}function l(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}function c(t,e,n,r){if(j.length){var i=j.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function p(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>j.length&&j.push(t)}function h(t,e,n,i){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var a=!1;if(null===t)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case w:case E:a=!0}}if(a)return n(i,t,""===e?"."+f(t,0):e),1;if(a=0,e=""===e?".":e+":",Array.isArray(t))for(var s=0;s<t.length;s++){o=t[s];var u=e+f(o,s);a+=h(o,u,n,i)}else if(null===t||"undefined"===typeof t?u=null:(u=I&&t[I]||t["@@iterator"],u="function"===typeof u?u:null),"function"===typeof u)for(t=u.call(t),s=0;!(o=t.next()).done;)o=o.value,u=e+f(o,s++),a+=h(o,u,n,i);else"object"===o&&(n=""+t,r("31","[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return a}function f(t,e){return"object"===typeof t&&null!==t&&null!=t.key?l(t.key):e.toString(36)}function d(t,e){t.func.call(t.context,e,t.count++)}function m(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?y(t,r,n,b.thatReturnsArgument):null!=t&&(u(t)&&(e=i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(B,"$&/")+"/")+n,t={$$typeof:w,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}),r.push(t))}function y(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(B,"$&/")+"/"),e=c(e,o,r,i),null==t||h(t,"",m,e),p(e)}var v=n(19),g=n(31),_=n(32),b=n(33),x="function"===typeof Symbol&&Symbol.for,w=x?Symbol.for("react.element"):60103,E=x?Symbol.for("react.portal"):60106,S=x?Symbol.for("react.fragment"):60107,T=x?Symbol.for("react.strict_mode"):60108,k=x?Symbol.for("react.profiler"):60114,C=x?Symbol.for("react.provider"):60109,P=x?Symbol.for("react.context"):60110,A=x?Symbol.for("react.async_mode"):60111,O=x?Symbol.for("react.forward_ref"):60112;x&&Symbol.for("react.timeout");var I="function"===typeof Symbol&&Symbol.iterator,M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};i.prototype.isReactComponent={},i.prototype.setState=function(t,e){"object"!==typeof t&&"function"!==typeof t&&null!=t&&r("85"),this.updater.enqueueSetState(this,t,e,"setState")},i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},o.prototype=i.prototype;var z=a.prototype=new o;z.constructor=a,v(z,i.prototype),z.isPureReactComponent=!0;var R={current:null},L=Object.prototype.hasOwnProperty,D={key:!0,ref:!0,__self:!0,__source:!0},B=/\/+/g,j=[],F={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return y(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;e=c(null,null,e,n),null==t||h(t,"",d,e),p(e)},count:function(t){return null==t?0:h(t,"",b.thatReturnsNull,null)},toArray:function(t){var e=[];return y(t,e,null,b.thatReturnsArgument),e},only:function(t){return u(t)||r("143"),t}},createRef:function(){return{current:null}},Component:i,PureComponent:a,createContext:function(t,e){return void 0===e&&(e=null),t={$$typeof:P,_calculateChangedBits:e,_defaultValue:t,_currentValue:t,_currentValue2:t,_changedBits:0,_changedBits2:0,Provider:null,Consumer:null},t.Provider={$$typeof:C,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:O,render:t}},Fragment:S,StrictMode:T,unstable_AsyncMode:A,unstable_Profiler:k,createElement:s,cloneElement:function(t,e,n){(null===t||void 0===t)&&r("267",t);var i=void 0,o=v({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){void 0!==e.ref&&(s=e.ref,u=R.current),void 0!==e.key&&(a=""+e.key);var l=void 0;t.type&&t.type.defaultProps&&(l=t.type.defaultProps);for(i in e)L.call(e,i)&&!D.hasOwnProperty(i)&&(o[i]=void 0===e[i]&&void 0!==l?l[i]:e[i])}if(1===(i=arguments.length-2))o.children=n;else if(1<i){l=Array(i);for(var c=0;c<i;c++)l[c]=arguments[c+2];o.children=l}return{$$typeof:w,type:t.type,key:a,ref:s,props:o,_owner:u}},createFactory:function(t){var e=s.bind(null,t);return e.type=t,e},isValidElement:u,version:"16.4.2",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:R,assign:v}},N={default:F},U=N&&F||N;t.exports=U.default?U.default:U},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(3)),u=n.n(s),l=n(34);n(20);e.a=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",n=arguments[1],s=n||e+"Subscription",c=function(t){function n(o,a){r(this,n);var s=i(this,t.call(this,o,a));return s[e]=o.store,s}return o(n,t),n.prototype.getChildContext=function(){var t;return t={},t[e]=this[e],t[s]=null,t},n.prototype.render=function(){return a.Children.only(this.props.children)},n}(a.Component);return c.propTypes={store:l.a.isRequired,children:u.a.element.isRequired},c.childContextTypes=(t={},t[e]=l.a.isRequired,t[s]=l.b,t),c}()},function(t,e,n){"use strict";function r(){}var i=n(73);t.exports=function(){function t(t,e,n,r,o,a){if(a!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=r,n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(){var t=[],e=[];return{clear:function(){e=o,t=o},notify:function(){for(var n=t=e,r=0;r<n.length;r++)n[r]()},get:function(){return e},subscribe:function(n){var r=!0;return e===t&&(e=t.slice()),e.push(n),function(){r&&t!==o&&(r=!1,e===t&&(e=t.slice()),e.splice(e.indexOf(n),1))}}}}n.d(e,"a",function(){return s});var o=null,a={notify:function(){}},s=function(){function t(e,n,i){r(this,t),this.store=e,this.parentSub=n,this.onStateChange=i,this.unsubscribe=null,this.listeners=a}return t.prototype.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},t.prototype.notifyNestedSubs=function(){this.listeners.notify()},t.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},t.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=i())},t.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=a)},t}()},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e,n){for(var r=e.length-1;r>=0;r--){var i=e[r](t);if(i)return i}return function(e,r){throw new Error("Invalid value of type "+typeof t+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function o(t,e){return t===e}var a=n(35),s=n(76),u=n(77),l=n(90),c=n(91),p=n(92),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.connectHOC,n=void 0===e?a.a:e,f=t.mapStateToPropsFactories,d=void 0===f?l.a:f,m=t.mapDispatchToPropsFactories,y=void 0===m?u.a:m,v=t.mergePropsFactories,g=void 0===v?c.a:v,_=t.selectorFactory,b=void 0===_?p.a:_;return function(t,e,a){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=u.pure,c=void 0===l||l,p=u.areStatesEqual,f=void 0===p?o:p,m=u.areOwnPropsEqual,v=void 0===m?s.a:m,_=u.areStatePropsEqual,x=void 0===_?s.a:_,w=u.areMergedPropsEqual,E=void 0===w?s.a:w,S=r(u,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),T=i(t,d,"mapStateToProps"),k=i(e,y,"mapDispatchToProps"),C=i(a,g,"mergeProps");return n(b,h({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:Boolean(t),initMapStateToProps:T,initMapDispatchToProps:k,initMergeProps:C,pure:c,areStatesEqual:f,areOwnPropsEqual:v,areStatePropsEqual:x,areMergedPropsEqual:E},S))}}()},function(t,e,n){"use strict";function r(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function i(t,e){if(r(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!o.call(e,n[a])||!r(t[n[a]],e[n[a]]))return!1;return!0}e.a=i;var o=Object.prototype.hasOwnProperty},function(t,e,n){"use strict";function r(t){return"function"===typeof t?Object(s.b)(t,"mapDispatchToProps"):void 0}function i(t){return t?void 0:Object(s.a)(function(t){return{dispatch:t}})}function o(t){return t&&"object"===typeof t?Object(s.a)(function(e){return Object(a.b)(t,e)}):void 0}var a=n(37),s=n(38);e.a=[r,i,o]},function(t,e,n){"use strict";(function(t,r){var i,o=n(80);i="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof t?t:r;var a=Object(o.a)(i);e.a=a}).call(e,n(18),n(79)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"===typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}e.a=r},function(t,e,n){"use strict";function r(t){if(!Object(a.a)(t)||Object(i.a)(t)!=s)return!1;var e=Object(o.a)(t);if(null===e)return!0;var n=p.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==h}var i=n(82),o=n(87),a=n(89),s="[object Object]",u=Function.prototype,l=Object.prototype,c=u.toString,p=l.hasOwnProperty,h=c.call(Object);e.a=r},function(t,e,n){"use strict";function r(t){return null==t?void 0===t?u:s:l&&l in Object(t)?Object(o.a)(t):Object(a.a)(t)}var i=n(40),o=n(85),a=n(86),s="[object Null]",u="[object Undefined]",l=i.a?i.a.toStringTag:void 0;e.a=r},function(t,e,n){"use strict";var r=n(84),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();e.a=o},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(e,n(18))},function(t,e,n){"use strict";function r(t){var e=a.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[u]=n:delete t[u]),i}var i=n(40),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=i.a?i.a.toStringTag:void 0;e.a=r},function(t,e,n){"use strict";function r(t){return o.call(t)}var i=Object.prototype,o=i.toString;e.a=r},function(t,e,n){"use strict";var r=n(88),i=Object(r.a)(Object.getPrototypeOf,Object);e.a=i},function(t,e,n){"use strict";function r(t,e){return function(n){return t(e(n))}}e.a=r},function(t,e,n){"use strict";function r(t){return null!=t&&"object"==typeof t}e.a=r},function(t,e,n){"use strict";function r(t){return"function"===typeof t?Object(o.b)(t,"mapStateToProps"):void 0}function i(t){return t?void 0:Object(o.a)(function(){return{}})}var o=n(38);e.a=[r,i]},function(t,e,n){"use strict";function r(t,e,n){return s({},n,t,e)}function i(t){return function(e,n){var r=(n.displayName,n.pure),i=n.areMergedPropsEqual,o=!1,a=void 0;return function(e,n,s){var u=t(e,n,s);return o?r&&i(u,a)||(a=u):(o=!0,a=u),a}}}function o(t){return"function"===typeof t?i(t):void 0}function a(t){return t?void 0:function(){return r}}var s=(n(39),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t});e.a=[o,a]},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e,n,r){return function(i,o){return n(t(i,o),e(r,o),o)}}function o(t,e,n,r,i){function o(i,o){return d=i,m=o,y=t(d,m),v=e(r,m),g=n(y,v,m),f=!0,g}function a(){return y=t(d,m),e.dependsOnOwnProps&&(v=e(r,m)),g=n(y,v,m)}function s(){return t.dependsOnOwnProps&&(y=t(d,m)),e.dependsOnOwnProps&&(v=e(r,m)),g=n(y,v,m)}function u(){var e=t(d,m),r=!h(e,y);return y=e,r&&(g=n(y,v,m)),g}function l(t,e){var n=!p(e,m),r=!c(t,d);return d=t,m=e,n&&r?a():n?s():r?u():g}var c=i.areStatesEqual,p=i.areOwnPropsEqual,h=i.areStatePropsEqual,f=!1,d=void 0,m=void 0,y=void 0,v=void 0,g=void 0;return function(t,e){return f?l(t,e):o(t,e)}}function a(t,e){var n=e.initMapStateToProps,a=e.initMapDispatchToProps,s=e.initMergeProps,u=r(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),l=n(t,u),c=a(t,u),p=s(t,u);return(u.pure?o:i)(l,c,p,t,u)}e.a=a;n(93)},function(t,e,n){"use strict";n(20)},function(t,e,n){"use strict";function r(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}r(),t.exports=n(95)},function(t,e,n){"use strict";function r(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);Rr(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function i(t,e,n,r,i,o,a,s,u){this._hasCaughtError=!1,this._caughtError=null;var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(t){this._caughtError=t,this._hasCaughtError=!0}}function o(){if(qr._hasRethrowError){var t=qr._rethrowError;throw qr._rethrowError=null,qr._hasRethrowError=!1,t}}function a(){if($r)for(var t in Gr){var e=Gr[t],n=$r.indexOf(t);if(-1<n||r("96",t),!Zr[n]){e.extractEvents||r("97",t),Zr[n]=e,n=e.eventTypes;for(var i in n){var o=void 0,a=n[i],u=e,l=i;Wr.hasOwnProperty(l)&&r("99",l),Wr[l]=a;var c=a.phasedRegistrationNames;if(c){for(o in c)c.hasOwnProperty(o)&&s(c[o],u,l);o=!0}else a.registrationName?(s(a.registrationName,u,l),o=!0):o=!1;o||r("98",i,t)}}}}function s(t,e,n){Hr[t]&&r("100",t),Hr[t]=e,Xr[t]=e.eventTypes[n].dependencies}function u(t){$r&&r("101"),$r=Array.prototype.slice.call(t),a()}function l(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var i=t[e];Gr.hasOwnProperty(e)&&Gr[e]===i||(Gr[e]&&r("102",e),Gr[e]=i,n=!0)}n&&a()}function c(t,e,n,r){e=t.type||"unknown-event",t.currentTarget=Qr(r),qr.invokeGuardedCallbackAndCatchFirstError(e,n,void 0,t),t.currentTarget=null}function p(t,e){return null==e&&r("30"),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function h(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}function f(t,e){if(t){var n=t._dispatchListeners,r=t._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!t.isPropagationStopped();i++)c(t,e,n[i],r[i]);else n&&c(t,e,n,r);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function d(t){return f(t,!0)}function m(t){return f(t,!1)}function y(t,e){var n=t.stateNode;if(!n)return null;var i=Yr(n);if(!i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(i=!i.disabled)||(t=t.type,i=!("button"===t||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}return t?null:(n&&"function"!==typeof n&&r("231",e,typeof n),n)}function v(t,e){null!==t&&(ti=p(ti,t)),t=ti,ti=null,t&&(e?h(t,d):h(t,m),ti&&r("95"),qr.rethrowCaughtError())}function g(t,e,n,r){for(var i=null,o=0;o<Zr.length;o++){var a=Zr[o];a&&(a=a.extractEvents(t,e,n,r))&&(i=p(i,a))}v(i,!1)}function _(t){if(t[ii])return t[ii];for(;!t[ii];){if(!t.parentNode)return null;t=t.parentNode}return t=t[ii],5===t.tag||6===t.tag?t:null}function b(t){if(5===t.tag||6===t.tag)return t.stateNode;r("33")}function x(t){return t[oi]||null}function w(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function E(t,e,n){for(var r=[];t;)r.push(t),t=w(t);for(t=r.length;0<t--;)e(r[t],"captured",n);for(t=0;t<r.length;t++)e(r[t],"bubbled",n)}function S(t,e,n){(e=y(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=p(n._dispatchListeners,e),n._dispatchInstances=p(n._dispatchInstances,t))}function T(t){t&&t.dispatchConfig.phasedRegistrationNames&&E(t._targetInst,S,t)}function k(t){if(t&&t.dispatchConfig.phasedRegistrationNames){var e=t._targetInst;e=e?w(e):null,E(e,S,t)}}function C(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=y(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=p(n._dispatchListeners,e),n._dispatchInstances=p(n._dispatchInstances,t))}function P(t){t&&t.dispatchConfig.registrationName&&C(t._targetInst,null,t)}function A(t){h(t,T)}function O(t,e,n,r){if(n&&r)t:{for(var i=n,o=r,a=0,s=i;s;s=w(s))a++;s=0;for(var u=o;u;u=w(u))s++;for(;0<a-s;)i=w(i),a--;for(;0<s-a;)o=w(o),s--;for(;a--;){if(i===o||i===o.alternate)break t;i=w(i),o=w(o)}i=null}else i=null;for(o=i,i=[];n&&n!==o&&(null===(a=n.alternate)||a!==o);)i.push(n),n=w(n);for(n=[];r&&r!==o&&(null===(a=r.alternate)||a!==o);)n.push(r),r=w(r);for(r=0;r<i.length;r++)C(i[r],"bubbled",t);for(t=n.length;0<t--;)C(n[t],"captured",e)}function I(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n["ms"+t]="MS"+e,n["O"+t]="o"+e.toLowerCase(),n}function M(t){if(li[t])return li[t];if(!ui[t])return t;var e,n=ui[t];for(e in n)if(n.hasOwnProperty(e)&&e in ci)return li[t]=n[e];return t}function z(){return!yi&&Dr.canUseDOM&&(yi="textContent"in document.documentElement?"textContent":"innerText"),yi}function R(){if(vi._fallbackText)return vi._fallbackText;var t,e,n=vi._startText,r=n.length,i=L(),o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return vi._fallbackText=i.slice(t,1<e?1-e:void 0),vi._fallbackText}function L(){return"value"in vi._root?vi._root.value:vi._root[z()]}function D(t,e,n,r){this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface;for(var i in t)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?jr.thatReturnsTrue:jr.thatReturnsFalse,this.isPropagationStopped=jr.thatReturnsFalse,this}function B(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function j(t){t instanceof this||r("223"),t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function F(t){t.eventPool=[],t.getPooled=B,t.release=j}function N(t,e){switch(t){case"keyup":return-1!==wi.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function U(t){return t=t.detail,"object"===typeof t&&"data"in t?t.data:null}function V(t,e){switch(t){case"compositionend":return U(e);case"keypress":return 32!==e.which?null:(Ai=!0,Ci);case"textInput":return t=e.data,t===Ci&&Ai?null:t;default:return null}}function q(t,e){if(Oi)return"compositionend"===t||!Ei&&N(t,e)?(t=R(),vi._root=null,vi._startText=null,vi._fallbackText=null,Oi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ki?null:e.data;default:return null}}function $(t){if(t=Jr(t)){Mi&&"function"===typeof Mi.restoreControlledState||r("194");var e=Yr(t.stateNode);Mi.restoreControlledState(t.stateNode,t.type,e)}}function G(t){Ri?Li?Li.push(t):Li=[t]:Ri=t}function Z(){return null!==Ri||null!==Li}function W(){if(Ri){var t=Ri,e=Li;if(Li=Ri=null,$(t),e)for(t=0;t<e.length;t++)$(e[t])}}function H(t,e){return t(e)}function X(t,e,n){return t(e,n)}function K(){}function Y(t,e){if(Bi)return t(e);Bi=!0;try{return H(t,e)}finally{Bi=!1,Z()&&(K(),W())}}function J(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!ji[t.type]:"textarea"===e}function Q(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function tt(t,e){return!(!Dr.canUseDOM||e&&!("addEventListener"in document))&&(t="on"+t,e=t in document,e||(e=document.createElement("div"),e.setAttribute(t,"return;"),e="function"===typeof e[t]),e)}function et(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function nt(t){var e=et(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rt(t){t._valueTracker||(t._valueTracker=nt(t))}function it(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=et(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function ot(t){return null===t||"undefined"===typeof t?null:(t=Yi&&t[Yi]||t["@@iterator"],"function"===typeof t?t:null)}function at(t){var e=t.type;if("function"===typeof e)return e.displayName||e.name;if("string"===typeof e)return e;switch(e){case Hi:return"AsyncMode";case Wi:return"Context.Consumer";case qi:return"ReactFragment";case Vi:return"ReactPortal";case Gi:return"Profiler("+t.pendingProps.id+")";case Zi:return"Context.Provider";case $i:return"StrictMode";case Ki:return"Timeout"}if("object"===typeof e&&null!==e)switch(e.$$typeof){case Xi:return t=e.render.displayName||e.render.name||"",""!==t?"ForwardRef("+t+")":"ForwardRef"}return null}function st(t){var e="";do{t:switch(t.tag){case 0:case 1:case 2:case 5:var n=t._debugOwner,r=t._debugSource,i=at(t),o=null;n&&(o=at(n)),n=r,i="\n    in "+(i||"Unknown")+(n?" (at "+n.fileName.replace(/^.*[\\\/]/,"")+":"+n.lineNumber+")":o?" (created by "+o+")":"");break t;default:i=""}e+=i,t=t.return}while(t);return e}function ut(t){return!!Qi.call(eo,t)||!Qi.call(to,t)&&(Ji.test(t)?eo[t]=!0:(to[t]=!0,!1))}function lt(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}function ct(t,e,n,r){if(null===e||"undefined"===typeof e||lt(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pt(t,e,n,r,i){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e}function ht(t){return t[1].toUpperCase()}function ft(t,e,n,r){var i=no.hasOwnProperty(e)?no[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(ct(e,n,i,r)&&(n=null),r||null===i?ut(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(i=i.type,n=3===i||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}function dt(t,e){var n=e.checked;return Br({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function mt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=bt(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function yt(t,e){null!=(e=e.checked)&&ft(t,"checked",e,!1)}function vt(t,e){yt(t,e);var n=bt(e.value);null!=n&&("number"===e.type?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n)),e.hasOwnProperty("value")?_t(t,e.type,n):e.hasOwnProperty("defaultValue")&&_t(t,e.type,bt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function gt(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){e=""+t._wrapperState.initialValue;var r=t.value;n||e===r||(t.value=e),t.defaultValue=e}n=t.name,""!==n&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!t.defaultChecked,""!==n&&(t.name=n)}function _t(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function bt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function xt(t,e,n){return t=D.getPooled(io.change,t,e,n),t.type="change",G(n),A(t),t}function wt(t){v(t,!1)}function Et(t){if(it(b(t)))return t}function St(t,e){if("change"===t)return e}function Tt(){oo&&(oo.detachEvent("onpropertychange",kt),ao=oo=null)}function kt(t){"value"===t.propertyName&&Et(ao)&&(t=xt(ao,t,Q(t)),Y(wt,t))}function Ct(t,e,n){"focus"===t?(Tt(),oo=e,ao=n,oo.attachEvent("onpropertychange",kt)):"blur"===t&&Tt()}function Pt(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Et(ao)}function At(t,e){if("click"===t)return Et(e)}function Ot(t,e){if("input"===t||"change"===t)return Et(e)}function It(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=co[t])&&!!e[t]}function Mt(){return It}function zt(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!==(2&e.effectTag))return 1;for(;e.return;)if(e=e.return,0!==(2&e.effectTag))return 1}return 3===e.tag?2:3}function Rt(t){2!==zt(t)&&r("188")}function Lt(t){var e=t.alternate;if(!e)return e=zt(t),3===e&&r("188"),1===e?null:t;for(var n=t,i=e;;){var o=n.return,a=o?o.alternate:null;if(!o||!a)break;if(o.child===a.child){for(var s=o.child;s;){if(s===n)return Rt(o),t;if(s===i)return Rt(o),e;s=s.sibling}r("188")}if(n.return!==i.return)n=o,i=a;else{s=!1;for(var u=o.child;u;){if(u===n){s=!0,n=o,i=a;break}if(u===i){s=!0,i=o,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,i=o;break}if(u===i){s=!0,i=a,n=o;break}u=u.sibling}s||r("189")}}n.alternate!==i&&r("190")}return 3!==n.tag&&r("188"),n.stateNode.current===n?t:e}function Dt(t){if(!(t=Lt(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function Bt(t){if(!(t=Lt(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child&&4!==e.tag)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function jt(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function Ft(t,e){var n=t[0];t=t[1];var r="on"+(t[0].toUpperCase()+t.slice(1));e={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:e},Co[t]=e,Po[n]=e}function Nt(t){var e=t.targetInst;do{if(!e){t.ancestors.push(e);break}var n;for(n=e;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;t.ancestors.push(e),e=_(n)}while(e);for(n=0;n<t.ancestors.length;n++)e=t.ancestors[n],g(t.topLevelType,e,t.nativeEvent,Q(t.nativeEvent))}function Ut(t){Mo=!!t}function Vt(t,e){if(!e)return null;var n=(Oo(t)?$t:Gt).bind(null,t);e.addEventListener(t,n,!1)}function qt(t,e){if(!e)return null;var n=(Oo(t)?$t:Gt).bind(null,t);e.addEventListener(t,n,!0)}function $t(t,e){X(Gt,t,e)}function Gt(t,e){if(Mo){var n=Q(e);if(n=_(n),null===n||"number"!==typeof n.tag||2===zt(n)||(n=null),Io.length){var r=Io.pop();r.topLevelType=t,r.nativeEvent=e,r.targetInst=n,t=r}else t={topLevelType:t,nativeEvent:e,targetInst:n,ancestors:[]};try{Y(Nt,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>Io.length&&Io.push(t)}}}function Zt(t){return Object.prototype.hasOwnProperty.call(t,Do)||(t[Do]=Lo++,Ro[t[Do]]={}),Ro[t[Do]]}function Wt(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ht(t,e){var n=Wt(t);t=0;for(var r;n;){if(3===n.nodeType){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Wt(n)}}function Xt(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function Kt(t,e){if(Vo||null==Fo||Fo!==Fr())return null;var n=Fo;return"selectionStart"in n&&Xt(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?(n=window.getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}):n=void 0,Uo&&Nr(Uo,n)?null:(Uo=n,t=D.getPooled(jo.select,No,t,e),t.type="select",t.target=Fo,A(t),t)}function Yt(t){var e="";return Lr.Children.forEach(t,function(t){null==t||"string"!==typeof t&&"number"!==typeof t||(e+=t)}),e}function Jt(t,e){return t=Br({children:void 0},e),(e=Yt(e.children))&&(t.children=e),t}function Qt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+n,e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function te(t,e){var n=e.value;t._wrapperState={initialValue:null!=n?n:e.defaultValue,wasMultiple:!!e.multiple}}function ee(t,e){return null!=e.dangerouslySetInnerHTML&&r("91"),Br({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ne(t,e){var n=e.value;null==n&&(n=e.defaultValue,e=e.children,null!=e&&(null!=n&&r("92"),Array.isArray(e)&&(1>=e.length||r("93"),e=e[0]),n=""+e),null==n&&(n="")),t._wrapperState={initialValue:""+n}}function re(t,e){var n=e.value;null!=n&&(n=""+n,n!==t.value&&(t.value=n),null==e.defaultValue&&(t.defaultValue=n)),null!=e.defaultValue&&(t.defaultValue=e.defaultValue)}function ie(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}function oe(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ae(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?oe(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}function se(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function ue(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=n,o=e[n];i=null==o||"boolean"===typeof o||""===o?"":r||"number"!==typeof o||0===o||ma.hasOwnProperty(i)&&ma[i]?(""+o).trim():o+"px","float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}function le(t,e,n){e&&(va[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&r("137",t,n()),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&r("60"),"object"===typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML||r("61")),null!=e.style&&"object"!==typeof e.style&&r("62",n()))}function ce(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function pe(t,e){t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument;var n=Zt(t);e=Xr[e];for(var r=0;r<e.length;r++){var i=e[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":qt("scroll",t);break;case"focus":case"blur":qt("focus",t),qt("blur",t),n.blur=!0,n.focus=!0;break;case"cancel":case"close":tt(i,!0)&&qt(i,t);break;case"invalid":case"submit":case"reset":break;default:-1===mi.indexOf(i)&&Vt(i,t)}n[i]=!0}}}function he(t,e,n,r){return n=9===n.nodeType?n:n.ownerDocument,r===ha.html&&(r=oe(t)),r===ha.html?"script"===t?(t=n.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):t="string"===typeof e.is?n.createElement(t,{is:e.is}):n.createElement(t):t=n.createElementNS(r,t),t}function fe(t,e){return(9===e.nodeType?e:e.ownerDocument).createTextNode(t)}function de(t,e,n,r){var i=ce(e,n);switch(e){case"iframe":case"object":Vt("load",t);var o=n;break;case"video":case"audio":for(o=0;o<mi.length;o++)Vt(mi[o],t);o=n;break;case"source":Vt("error",t),o=n;break;case"img":case"image":case"link":Vt("error",t),Vt("load",t),o=n;break;case"form":Vt("reset",t),Vt("submit",t),o=n;break;case"details":Vt("toggle",t),o=n;break;case"input":mt(t,n),o=dt(t,n),Vt("invalid",t),pe(r,"onChange");break;case"option":o=Jt(t,n);break;case"select":te(t,n),o=Br({},n,{value:void 0}),Vt("invalid",t),pe(r,"onChange");break;case"textarea":ne(t,n),o=ee(t,n),Vt("invalid",t),pe(r,"onChange");break;default:o=n}le(e,o,ga);var a,s=o;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];"style"===a?ue(t,u,ga):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&da(t,u):"children"===a?"string"===typeof u?("textarea"!==e||""!==u)&&se(t,u):"number"===typeof u&&se(t,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(Hr.hasOwnProperty(a)?null!=u&&pe(r,a):null!=u&&ft(t,a,u,i))}switch(e){case"input":rt(t),gt(t,n,!1);break;case"textarea":rt(t),ie(t,n);break;case"option":null!=n.value&&t.setAttribute("value",n.value);break;case"select":t.multiple=!!n.multiple,e=n.value,null!=e?Qt(t,!!n.multiple,e,!1):null!=n.defaultValue&&Qt(t,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof o.onClick&&(t.onclick=jr)}}function me(t,e,n,r,i){var o=null;switch(e){case"input":n=dt(t,n),r=dt(t,r),o=[];break;case"option":n=Jt(t,n),r=Jt(t,r),o=[];break;case"select":n=Br({},n,{value:void 0}),r=Br({},r,{value:void 0}),o=[];break;case"textarea":n=ee(t,n),r=ee(t,r),o=[];break;default:"function"!==typeof n.onClick&&"function"===typeof r.onClick&&(t.onclick=jr)}le(e,r,ga),e=t=void 0;var a=null;for(t in n)if(!r.hasOwnProperty(t)&&n.hasOwnProperty(t)&&null!=n[t])if("style"===t){var s=n[t];for(e in s)s.hasOwnProperty(e)&&(a||(a={}),a[e]="")}else"dangerouslySetInnerHTML"!==t&&"children"!==t&&"suppressContentEditableWarning"!==t&&"suppressHydrationWarning"!==t&&"autoFocus"!==t&&(Hr.hasOwnProperty(t)?o||(o=[]):(o=o||[]).push(t,null));for(t in r){var u=r[t];if(s=null!=n?n[t]:void 0,r.hasOwnProperty(t)&&u!==s&&(null!=u||null!=s))if("style"===t)if(s){for(e in s)!s.hasOwnProperty(e)||u&&u.hasOwnProperty(e)||(a||(a={}),a[e]="");for(e in u)u.hasOwnProperty(e)&&s[e]!==u[e]&&(a||(a={}),a[e]=u[e])}else a||(o||(o=[]),o.push(t,a)),a=u;else"dangerouslySetInnerHTML"===t?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(o=o||[]).push(t,""+u)):"children"===t?s===u||"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(t,""+u):"suppressContentEditableWarning"!==t&&"suppressHydrationWarning"!==t&&(Hr.hasOwnProperty(t)?(null!=u&&pe(i,t),o||s===u||(o=[])):(o=o||[]).push(t,u))}return a&&(o=o||[]).push("style",a),o}function ye(t,e,n,r,i){"input"===n&&"radio"===i.type&&null!=i.name&&yt(t,i),ce(n,r),r=ce(n,i);for(var o=0;o<e.length;o+=2){var a=e[o],s=e[o+1];"style"===a?ue(t,s,ga):"dangerouslySetInnerHTML"===a?da(t,s):"children"===a?se(t,s):ft(t,a,s,r)}switch(n){case"input":vt(t,i);break;case"textarea":re(t,i);break;case"select":t._wrapperState.initialValue=void 0,e=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!i.multiple,n=i.value,null!=n?Qt(t,!!i.multiple,n,!1):e!==!!i.multiple&&(null!=i.defaultValue?Qt(t,!!i.multiple,i.defaultValue,!0):Qt(t,!!i.multiple,i.multiple?[]:"",!1))}}function ve(t,e,n,r,i){switch(e){case"iframe":case"object":Vt("load",t);break;case"video":case"audio":for(r=0;r<mi.length;r++)Vt(mi[r],t);break;case"source":Vt("error",t);break;case"img":case"image":case"link":Vt("error",t),Vt("load",t);break;case"form":Vt("reset",t),Vt("submit",t);break;case"details":Vt("toggle",t);break;case"input":mt(t,n),Vt("invalid",t),pe(i,"onChange");break;case"select":te(t,n),Vt("invalid",t),pe(i,"onChange");break;case"textarea":ne(t,n),Vt("invalid",t),pe(i,"onChange")}le(e,n,ga),r=null;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o];"children"===o?"string"===typeof a?t.textContent!==a&&(r=["children",a]):"number"===typeof a&&t.textContent!==""+a&&(r=["children",""+a]):Hr.hasOwnProperty(o)&&null!=a&&pe(i,o)}switch(e){case"input":rt(t),gt(t,n,!0);break;case"textarea":rt(t),ie(t,n);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(t.onclick=jr)}return r}function ge(t,e){return t.nodeValue!==e}function _e(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function be(t,e){return"textarea"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&"string"===typeof e.dangerouslySetInnerHTML.__html}function xe(t){for(t=t.nextSibling;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}function we(t){for(t=t.firstChild;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}function Ee(t){return{current:t}}function Se(t){0>ka||(t.current=Ta[ka],Ta[ka]=null,ka--)}function Te(t,e){ka++,Ta[ka]=t.current,t.current=e}function ke(t){return Pe(t)?Aa:Ca.current}function Ce(t,e){var n=t.type.contextTypes;if(!n)return Vr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Pe(t){return 2===t.tag&&null!=t.type.childContextTypes}function Ae(t){Pe(t)&&(Se(Pa,t),Se(Ca,t))}function Oe(t){Se(Pa,t),Se(Ca,t)}function Ie(t,e,n){Ca.current!==Vr&&r("168"),Te(Ca,e,t),Te(Pa,n,t)}function Me(t,e){var n=t.stateNode,i=t.type.childContextTypes;if("function"!==typeof n.getChildContext)return e;n=n.getChildContext();for(var o in n)o in i||r("108",at(t)||"Unknown",o);return Br({},e,n)}function ze(t){if(!Pe(t))return!1;var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||Vr,Aa=Ca.current,Te(Ca,e,t),Te(Pa,Pa.current,t),!0}function Re(t,e){var n=t.stateNode;if(n||r("169"),e){var i=Me(t,Aa);n.__reactInternalMemoizedMergedChildContext=i,Se(Pa,t),Se(Ca,t),Te(Ca,i,t)}else Se(Pa,t);Te(Pa,e,t)}function Le(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=null,this.index=0,this.ref=null,this.pendingProps=e,this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function De(t,e,n){var r=t.alternate;return null===r?(r=new Le(t.tag,e,t.key,t.mode),r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.expirationTime=n,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Be(t,e,n){var i=t.type,o=t.key;if(t=t.props,"function"===typeof i)var a=i.prototype&&i.prototype.isReactComponent?2:0;else if("string"===typeof i)a=5;else switch(i){case qi:return je(t.children,e,n,o);case Hi:a=11,e|=3;break;case $i:a=11,e|=2;break;case Gi:return i=new Le(15,t,o,4|e),i.type=Gi,i.expirationTime=n,i;case Ki:a=16,e|=2;break;default:t:{switch("object"===typeof i&&null!==i?i.$$typeof:null){case Zi:a=13;break t;case Wi:a=12;break t;case Xi:a=14;break t;default:r("130",null==i?i:typeof i,"")}a=void 0}}return e=new Le(a,t,o,e),e.type=i,e.expirationTime=n,e}function je(t,e,n,r){return t=new Le(10,t,r,e),t.expirationTime=n,t}function Fe(t,e,n){return t=new Le(6,t,null,e),t.expirationTime=n,t}function Ne(t,e,n){return e=new Le(4,null!==t.children?t.children:[],t.key,e),e.expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ue(t,e,n){return e=new Le(3,null,null,e?3:0),t={current:e,containerInfo:t,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null},e.stateNode=t}function Ve(t){return function(e){try{return t(e)}catch(t){}}}function qe(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);Oa=Ve(function(t){return e.onCommitFiberRoot(n,t)}),Ia=Ve(function(t){return e.onCommitFiberUnmount(n,t)})}catch(t){}return!0}function $e(t){"function"===typeof Oa&&Oa(t)}function Ge(t){"function"===typeof Ia&&Ia(t)}function Ze(t){return{expirationTime:0,baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function We(t){return{expirationTime:t.expirationTime,baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function He(t){return{expirationTime:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Xe(t,e,n){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e),(0===t.expirationTime||t.expirationTime>n)&&(t.expirationTime=n)}function Ke(t,e,n){var r=t.alternate;if(null===r){var i=t.updateQueue,o=null;null===i&&(i=t.updateQueue=Ze(t.memoizedState))}else i=t.updateQueue,o=r.updateQueue,null===i?null===o?(i=t.updateQueue=Ze(t.memoizedState),o=r.updateQueue=Ze(r.memoizedState)):i=t.updateQueue=We(o):null===o&&(o=r.updateQueue=We(i));null===o||i===o?Xe(i,e,n):null===i.lastUpdate||null===o.lastUpdate?(Xe(i,e,n),Xe(o,e,n)):(Xe(i,e,n),o.lastUpdate=e)}function Ye(t,e,n){var r=t.updateQueue;r=null===r?t.updateQueue=Ze(t.memoizedState):Je(t,r),null===r.lastCapturedUpdate?r.firstCapturedUpdate=r.lastCapturedUpdate=e:(r.lastCapturedUpdate.next=e,r.lastCapturedUpdate=e),(0===r.expirationTime||r.expirationTime>n)&&(r.expirationTime=n)}function Je(t,e){var n=t.alternate;return null!==n&&e===n.updateQueue&&(e=t.updateQueue=We(e)),e}function Qe(t,e,n,r,i,o){switch(n.tag){case 1:return t=n.payload,"function"===typeof t?t.call(o,r,i):t;case 3:t.effectTag=-1025&t.effectTag|64;case 0:if(t=n.payload,null===(i="function"===typeof t?t.call(o,r,i):t)||void 0===i)break;return Br({},r,i);case 2:Ma=!0}return r}function tn(t,e,n,r,i){if(Ma=!1,!(0===e.expirationTime||e.expirationTime>i)){e=Je(t,e);for(var o=e.baseState,a=null,s=0,u=e.firstUpdate,l=o;null!==u;){var c=u.expirationTime;c>i?(null===a&&(a=u,o=l),(0===s||s>c)&&(s=c)):(l=Qe(t,e,u,l,n,r),null!==u.callback&&(t.effectTag|=32,u.nextEffect=null,null===e.lastEffect?e.firstEffect=e.lastEffect=u:(e.lastEffect.nextEffect=u,e.lastEffect=u))),u=u.next}for(c=null,u=e.firstCapturedUpdate;null!==u;){var p=u.expirationTime;p>i?(null===c&&(c=u,null===a&&(o=l)),(0===s||s>p)&&(s=p)):(l=Qe(t,e,u,l,n,r),null!==u.callback&&(t.effectTag|=32,u.nextEffect=null,null===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=u:(e.lastCapturedEffect.nextEffect=u,e.lastCapturedEffect=u))),u=u.next}null===a&&(e.lastUpdate=null),null===c?e.lastCapturedUpdate=null:t.effectTag|=32,null===a&&null===c&&(o=l),e.baseState=o,e.firstUpdate=a,e.firstCapturedUpdate=c,e.expirationTime=s,t.memoizedState=l}}function en(t,e){"function"!==typeof t&&r("191",t),t.call(e)}function nn(t,e,n){for(null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),t=e.firstEffect,e.firstEffect=e.lastEffect=null;null!==t;){var r=t.callback;null!==r&&(t.callback=null,en(r,n)),t=t.nextEffect}for(t=e.firstCapturedEffect,e.firstCapturedEffect=e.lastCapturedEffect=null;null!==t;)e=t.callback,null!==e&&(t.callback=null,en(e,n)),t=t.nextEffect}function rn(t,e){return{value:t,source:e,stack:st(e)}}function on(t){var e=t.type._context;Te(La,e._changedBits,t),Te(Ra,e._currentValue,t),Te(za,t,t),e._currentValue=t.pendingProps.value,e._changedBits=t.stateNode}function an(t){var e=La.current,n=Ra.current;Se(za,t),Se(Ra,t),Se(La,t),t=t.type._context,t._currentValue=n,t._changedBits=e}function sn(t){return t===Da&&r("174"),t}function un(t,e){Te(Fa,e,t),Te(ja,t,t),Te(Ba,Da,t);var n=e.nodeType;switch(n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ae(null,"");break;default:n=8===n?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=ae(e,n)}Se(Ba,t),Te(Ba,e,t)}function ln(t){Se(Ba,t),Se(ja,t),Se(Fa,t)}function cn(t){ja.current===t&&(Se(Ba,t),Se(ja,t))}function pn(t,e,n){var r=t.memoizedState;e=e(n,r),r=null===e||void 0===e?r:Br({},r,e),t.memoizedState=r,null!==(t=t.updateQueue)&&0===t.expirationTime&&(t.baseState=r)}function hn(t,e,n,r,i,o){var a=t.stateNode;return t=t.type,"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(n,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!Nr(e,n)||!Nr(r,i))}function fn(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Na.enqueueReplaceState(e,e.state,null)}function dn(t,e){var n=t.type,r=t.stateNode,i=t.pendingProps,o=ke(t);r.props=i,r.state=t.memoizedState,r.refs=Vr,r.context=Ce(t,o),o=t.updateQueue,null!==o&&(tn(t,o,i,r,e),r.state=t.memoizedState),o=t.type.getDerivedStateFromProps,"function"===typeof o&&(pn(t,o,i),r.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(n=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),n!==r.state&&Na.enqueueReplaceState(r,r.state,null),null!==(o=t.updateQueue)&&(tn(t,o,i,r,e),r.state=t.memoizedState)),"function"===typeof r.componentDidMount&&(t.effectTag|=4)}function mn(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){n=n._owner;var i=void 0;n&&(2!==n.tag&&r("110"),i=n.stateNode),i||r("147",t);var o=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=i.refs===Vr?i.refs={}:i.refs;null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}"string"!==typeof t&&r("148"),n._owner||r("254",t)}return t}function yn(t,e){"textarea"!==t.type&&r("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function vn(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(t,e,n){return t=De(t,e,n),t.index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index,r<n?(e.effectTag=2,n):r):(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?(e=Fe(n,t.mode,r),e.return=t,e):(e=o(e,n,r),e.return=t,e)}function l(t,e,n,r){return null!==e&&e.type===n.type?(r=o(e,n.props,r),r.ref=mn(t,e,n),r.return=t,r):(r=Be(n,t.mode,r),r.ref=mn(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?(e=Ne(n,t.mode,r),e.return=t,e):(e=o(e,n.children||[],r),e.return=t,e)}function p(t,e,n,r,i){return null===e||10!==e.tag?(e=je(n,t.mode,r,i),e.return=t,e):(e=o(e,n,r),e.return=t,e)}function h(t,e,n){if("string"===typeof e||"number"===typeof e)return e=Fe(""+e,t.mode,n),e.return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case Ui:return n=Be(e,t.mode,n),n.ref=mn(t,null,e),n.return=t,n;case Vi:return e=Ne(e,t.mode,n),e.return=t,e}if(Ua(e)||ot(e))return e=je(e,t.mode,n,null),e.return=t,e;yn(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Ui:return n.key===i?n.type===qi?p(t,e,n.props.children,r,i):l(t,e,n,r):null;case Vi:return n.key===i?c(t,e,n,r):null}if(Ua(n)||ot(n))return null!==i?null:p(t,e,n,r,null);yn(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return t=t.get(n)||null,u(e,t,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case Ui:return t=t.get(null===r.key?n:r.key)||null,r.type===qi?p(e,t,r.props.children,i,r.key):l(e,t,r,i);case Vi:return t=t.get(null===r.key?n:r.key)||null,c(e,t,r,i)}if(Ua(r)||ot(r))return t=t.get(n)||null,p(e,t,r,i,null);yn(e,r)}return null}function m(r,o,s,u){for(var l=null,c=null,p=o,m=o=0,y=null;null!==p&&m<s.length;m++){p.index>m?(y=p,p=null):y=p.sibling;var v=f(r,p,s[m],u);if(null===v){null===p&&(p=y);break}t&&p&&null===v.alternate&&e(r,p),o=a(v,o,m),null===c?l=v:c.sibling=v,c=v,p=y}if(m===s.length)return n(r,p),l;if(null===p){for(;m<s.length;m++)(p=h(r,s[m],u))&&(o=a(p,o,m),null===c?l=p:c.sibling=p,c=p);return l}for(p=i(r,p);m<s.length;m++)(y=d(p,r,m,s[m],u))&&(t&&null!==y.alternate&&p.delete(null===y.key?m:y.key),o=a(y,o,m),null===c?l=y:c.sibling=y,c=y);return t&&p.forEach(function(t){return e(r,t)}),l}function y(o,s,u,l){var c=ot(u);"function"!==typeof c&&r("150"),null==(u=c.call(u))&&r("151");for(var p=c=null,m=s,y=s=0,v=null,g=u.next();null!==m&&!g.done;y++,g=u.next()){m.index>y?(v=m,m=null):v=m.sibling;var _=f(o,m,g.value,l);if(null===_){m||(m=v);break}t&&m&&null===_.alternate&&e(o,m),s=a(_,s,y),null===p?c=_:p.sibling=_,p=_,m=v}if(g.done)return n(o,m),c;if(null===m){for(;!g.done;y++,g=u.next())null!==(g=h(o,g.value,l))&&(s=a(g,s,y),null===p?c=g:p.sibling=g,p=g);return c}for(m=i(o,m);!g.done;y++,g=u.next())null!==(g=d(m,o,y,g.value,l))&&(t&&null!==g.alternate&&m.delete(null===g.key?y:g.key),s=a(g,s,y),null===p?c=g:p.sibling=g,p=g);return t&&m.forEach(function(t){return e(o,t)}),c}return function(t,i,a,u){var l="object"===typeof a&&null!==a&&a.type===qi&&null===a.key;l&&(a=a.props.children);var c="object"===typeof a&&null!==a;if(c)switch(a.$$typeof){case Ui:t:{for(c=a.key,l=i;null!==l;){if(l.key===c){if(10===l.tag?a.type===qi:l.type===a.type){n(t,l.sibling),i=o(l,a.type===qi?a.props.children:a.props,u),i.ref=mn(t,l,a),i.return=t,t=i;break t}n(t,l);break}e(t,l),l=l.sibling}a.type===qi?(i=je(a.props.children,t.mode,u,a.key),i.return=t,t=i):(u=Be(a,t.mode,u),u.ref=mn(t,i,a),u.return=t,t=u)}return s(t);case Vi:t:{for(l=a.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(t,i.sibling),i=o(i,a.children||[],u),i.return=t,t=i;break t}n(t,i);break}e(t,i),i=i.sibling}i=Ne(a,t.mode,u),i.return=t,t=i}return s(t)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==i&&6===i.tag?(n(t,i.sibling),i=o(i,a,u),i.return=t,t=i):(n(t,i),i=Fe(a,t.mode,u),i.return=t,t=i),s(t);if(Ua(a))return m(t,i,a,u);if(ot(a))return y(t,i,a,u);if(c&&yn(t,a),"undefined"===typeof a&&!l)switch(t.tag){case 2:case 1:u=t.type,r("152",u.displayName||u.name||"Component")}return n(t,i)}}function gn(t,e){var n=new Le(5,null,null,0);n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function _n(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function bn(t){if(Za){var e=Ga;if(e){var n=e;if(!_n(t,e)){if(!(e=xe(n))||!_n(t,e))return t.effectTag|=2,Za=!1,void($a=t);gn($a,n)}$a=t,Ga=we(e)}else t.effectTag|=2,Za=!1,$a=t}}function xn(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag;)t=t.return;$a=t}function wn(t){if(t!==$a)return!1;if(!Za)return xn(t),Za=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!be(e,t.memoizedProps))for(e=Ga;e;)gn(t,e),e=xe(e);return xn(t),Ga=$a?xe(t.stateNode):null,!0}function En(){Ga=$a=null,Za=!1}function Sn(t,e,n){Tn(t,e,n,e.expirationTime)}function Tn(t,e,n,r){e.child=null===t?qa(e,null,n,r):Va(e,t.child,n,r)}function kn(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function Cn(t,e,n,r,i){kn(t,e);var o=0!==(64&e.effectTag);if(!n&&!o)return r&&Re(e,!1),In(t,e);n=e.stateNode,Fi.current=e;var a=o?null:n.render();return e.effectTag|=1,o&&(Tn(t,e,null,i),e.child=null),Tn(t,e,a,i),e.memoizedState=n.state,e.memoizedProps=n.props,r&&Re(e,!0),e.child}function Pn(t){var e=t.stateNode;e.pendingContext?Ie(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ie(t,e.context,!1),un(t,e.containerInfo)}function An(t,e,n,r){var i=t.child;for(null!==i&&(i.return=t);null!==i;){switch(i.tag){case 12:var o=0|i.stateNode;if(i.type===e&&0!==(o&n)){for(o=i;null!==o;){var a=o.alternate;if(0===o.expirationTime||o.expirationTime>r)o.expirationTime=r,null!==a&&(0===a.expirationTime||a.expirationTime>r)&&(a.expirationTime=r);else{if(null===a||!(0===a.expirationTime||a.expirationTime>r))break;a.expirationTime=r}o=o.return}o=null}else o=i.child;break;case 13:o=i.type===t.type?null:i.child;break;default:o=i.child}if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function On(t,e,n){var r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=!0;if(Pa.current)a=!1;else if(o===i)return e.stateNode=0,on(e),In(t,e);var s=i.value;if(e.memoizedProps=i,null===o)s=1073741823;else if(o.value===i.value){if(o.children===i.children&&a)return e.stateNode=0,on(e),In(t,e);s=0}else{var u=o.value;if(u===s&&(0!==u||1/u===1/s)||u!==u&&s!==s){if(o.children===i.children&&a)return e.stateNode=0,on(e),In(t,e);s=0}else if(s="function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,s):1073741823,0===(s|=0)){if(o.children===i.children&&a)return e.stateNode=0,on(e),In(t,e)}else An(e,r,s,n)}return e.stateNode=s,on(e),Sn(t,e,i.children),e.child}function In(t,e){if(null!==t&&e.child!==t.child&&r("153"),null!==e.child){t=e.child;var n=De(t,t.pendingProps,t.expirationTime);for(e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,n=n.sibling=De(t,t.pendingProps,t.expirationTime),n.return=e;n.sibling=null}return e.child}function Mn(t,e,n){if(0===e.expirationTime||e.expirationTime>n){switch(e.tag){case 3:Pn(e);break;case 2:ze(e);break;case 4:un(e,e.stateNode.containerInfo);break;case 13:on(e)}return null}switch(e.tag){case 0:null!==t&&r("155");var i=e.type,o=e.pendingProps,a=ke(e);return a=Ce(e,a),i=i(o,a),e.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(a=e.type,e.tag=2,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,a=a.getDerivedStateFromProps,"function"===typeof a&&pn(e,a,o),o=ze(e),i.updater=Na,e.stateNode=i,i._reactInternalFiber=e,dn(e,n),t=Cn(t,e,!0,o,n)):(e.tag=1,Sn(t,e,i),e.memoizedProps=o,t=e.child),t;case 1:return o=e.type,n=e.pendingProps,Pa.current||e.memoizedProps!==n?(i=ke(e),i=Ce(e,i),o=o(n,i),e.effectTag|=1,Sn(t,e,o),e.memoizedProps=n,t=e.child):t=In(t,e),t;case 2:if(o=ze(e),null===t)if(null===e.stateNode){var s=e.pendingProps,u=e.type;i=ke(e);var l=2===e.tag&&null!=e.type.contextTypes;a=l?Ce(e,i):Vr,s=new u(s,a),e.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=Na,e.stateNode=s,s._reactInternalFiber=e,l&&(l=e.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=i,l.__reactInternalMemoizedMaskedChildContext=a),dn(e,n),i=!0}else{u=e.type,i=e.stateNode,l=e.memoizedProps,a=e.pendingProps,i.props=l;var c=i.context;s=ke(e),s=Ce(e,s);var p=u.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==a||c!==s)&&fn(e,i,a,s),Ma=!1;var h=e.memoizedState;c=i.state=h;var f=e.updateQueue;null!==f&&(tn(e,f,a,i,n),c=e.memoizedState),l!==a||h!==c||Pa.current||Ma?("function"===typeof p&&(pn(e,p,a),c=e.memoizedState),(l=Ma||hn(e,l,a,h,c,s))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(e.effectTag|=4)):("function"===typeof i.componentDidMount&&(e.effectTag|=4),e.memoizedProps=a,e.memoizedState=c),i.props=a,i.state=c,i.context=s,i=l):("function"===typeof i.componentDidMount&&(e.effectTag|=4),i=!1)}else u=e.type,i=e.stateNode,a=e.memoizedProps,l=e.pendingProps,i.props=a,c=i.context,s=ke(e),s=Ce(e,s),p=u.getDerivedStateFromProps,(u="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==l||c!==s)&&fn(e,i,l,s),Ma=!1,c=e.memoizedState,h=i.state=c,f=e.updateQueue,null!==f&&(tn(e,f,l,i,n),h=e.memoizedState),a!==l||c!==h||Pa.current||Ma?("function"===typeof p&&(pn(e,p,l),h=e.memoizedState),(p=Ma||hn(e,a,l,c,h,s))?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(l,h,s),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(l,h,s)),"function"===typeof i.componentDidUpdate&&(e.effectTag|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof i.componentDidUpdate||a===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=256),e.memoizedProps=l,e.memoizedState=h),i.props=l,i.state=h,i.context=s,i=p):("function"!==typeof i.componentDidUpdate||a===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=256),i=!1);return Cn(t,e,i,o,n);case 3:return Pn(e),o=e.updateQueue,null!==o?(i=e.memoizedState,i=null!==i?i.element:null,tn(e,o,e.pendingProps,null,n),(o=e.memoizedState.element)===i?(En(),t=In(t,e)):(i=e.stateNode,(i=(null===t||null===t.child)&&i.hydrate)&&(Ga=we(e.stateNode.containerInfo),$a=e,i=Za=!0),i?(e.effectTag|=2,e.child=qa(e,null,o,n)):(En(),Sn(t,e,o)),t=e.child)):(En(),t=In(t,e)),t;case 5:return sn(Fa.current),o=sn(Ba.current),i=ae(o,e.type),o!==i&&(Te(ja,e,e),Te(Ba,i,e)),null===t&&bn(e),o=e.type,l=e.memoizedProps,i=e.pendingProps,a=null!==t?t.memoizedProps:null,Pa.current||l!==i||((l=1&e.mode&&!!i.hidden)&&(e.expirationTime=1073741823),l&&1073741823===n)?(l=i.children,be(o,i)?l=null:a&&be(o,a)&&(e.effectTag|=16),kn(t,e),1073741823!==n&&1&e.mode&&i.hidden?(e.expirationTime=1073741823,e.memoizedProps=i,t=null):(Sn(t,e,l),e.memoizedProps=i,t=e.child)):t=In(t,e),t;case 6:return null===t&&bn(e),e.memoizedProps=e.pendingProps,null;case 16:return null;case 4:return un(e,e.stateNode.containerInfo),o=e.pendingProps,Pa.current||e.memoizedProps!==o?(null===t?e.child=Va(e,null,o,n):Sn(t,e,o),e.memoizedProps=o,t=e.child):t=In(t,e),t;case 14:return o=e.type.render,n=e.pendingProps,i=e.ref,Pa.current||e.memoizedProps!==n||i!==(null!==t?t.ref:null)?(o=o(n,i),Sn(t,e,o),e.memoizedProps=n,t=e.child):t=In(t,e),t;case 10:return n=e.pendingProps,Pa.current||e.memoizedProps!==n?(Sn(t,e,n),e.memoizedProps=n,t=e.child):t=In(t,e),t;case 11:return n=e.pendingProps.children,Pa.current||null!==n&&e.memoizedProps!==n?(Sn(t,e,n),e.memoizedProps=n,t=e.child):t=In(t,e),t;case 15:return n=e.pendingProps,e.memoizedProps===n?t=In(t,e):(Sn(t,e,n.children),e.memoizedProps=n,t=e.child),t;case 13:return On(t,e,n);case 12:t:if(i=e.type,a=e.pendingProps,l=e.memoizedProps,o=i._currentValue,s=i._changedBits,Pa.current||0!==s||l!==a){if(e.memoizedProps=a,u=a.unstable_observedBits,void 0!==u&&null!==u||(u=1073741823),e.stateNode=u,0!==(s&u))An(e,i,s,n);else if(l===a){t=In(t,e);break t}n=a.children,n=n(o),e.effectTag|=1,Sn(t,e,n),t=e.child}else t=In(t,e);return t;default:r("156")}}function zn(t){t.effectTag|=4}function Rn(t,e){var n=e.pendingProps;switch(e.tag){case 1:return null;case 2:return Ae(e),null;case 3:ln(e),Oe(e);var i=e.stateNode;return i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(wn(e),e.effectTag&=-3),Wa(e),null;case 5:cn(e),i=sn(Fa.current);var o=e.type;if(null!==t&&null!=e.stateNode){var a=t.memoizedProps,s=e.stateNode,u=sn(Ba.current);s=me(s,o,a,n,i),Ha(t,e,s,o,a,n,i,u),t.ref!==e.ref&&(e.effectTag|=128)}else{if(!n)return null===e.stateNode&&r("166"),null;if(t=sn(Ba.current),wn(e))n=e.stateNode,o=e.type,a=e.memoizedProps,n[ii]=e,n[oi]=a,i=ve(n,o,a,t,i),e.updateQueue=i,null!==i&&zn(e);else{t=he(o,n,i,t),t[ii]=e,t[oi]=n;t:for(a=e.child;null!==a;){if(5===a.tag||6===a.tag)t.appendChild(a.stateNode);else if(4!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===e)break;for(;null===a.sibling;){if(null===a.return||a.return===e)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}de(t,o,n,i),_e(o,n)&&zn(e),e.stateNode=t}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)Xa(t,e,t.memoizedProps,n);else{if("string"!==typeof n)return null===e.stateNode&&r("166"),null;i=sn(Fa.current),sn(Ba.current),wn(e)?(i=e.stateNode,n=e.memoizedProps,i[ii]=e,ge(i,n)&&zn(e)):(i=fe(n,i),i[ii]=e,e.stateNode=i)}return null;case 14:case 16:case 10:case 11:case 15:return null;case 4:return ln(e),Wa(e),null;case 13:return an(e),null;case 12:return null;case 0:r("167");default:r("156")}}function Ln(t,e){var n=e.source;null===e.stack&&null!==n&&st(n),null!==n&&at(n),e=e.value,null!==t&&2===t.tag&&at(t);try{e&&e.suppressReactErrorLogging||console.error(e)}catch(t){t&&t.suppressReactErrorLogging||console.error(t)}}function Dn(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(e){Kn(t,e)}else e.current=null}function Bn(t){switch("function"===typeof Ge&&Ge(t),t.tag){case 2:Dn(t);var e=t.stateNode;if("function"===typeof e.componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Kn(t,e)}break;case 5:Dn(t);break;case 4:Nn(t)}}function jn(t){return 5===t.tag||3===t.tag||4===t.tag}function Fn(t){t:{for(var e=t.return;null!==e;){if(jn(e)){var n=e;break t}e=e.return}r("160"),n=void 0}var i=e=void 0;switch(n.tag){case 5:e=n.stateNode,i=!1;break;case 3:case 4:e=n.stateNode.containerInfo,i=!0;break;default:r("161")}16&n.effectTag&&(se(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||jn(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var o=t;;){if(5===o.tag||6===o.tag)if(n)if(i){var a=e,s=o.stateNode,u=n;8===a.nodeType?a.parentNode.insertBefore(s,u):a.insertBefore(s,u)}else e.insertBefore(o.stateNode,n);else i?(a=e,s=o.stateNode,8===a.nodeType?a.parentNode.insertBefore(s,a):a.appendChild(s)):e.appendChild(o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}function Nn(t){for(var e=t,n=!1,i=void 0,o=void 0;;){if(!n){n=e.return;t:for(;;){switch(null===n&&r("160"),n.tag){case 5:i=n.stateNode,o=!1;break t;case 3:case 4:i=n.stateNode.containerInfo,o=!0;break t}n=n.return}n=!0}if(5===e.tag||6===e.tag){t:for(var a=e,s=a;;)if(Bn(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===a)break;for(;null===s.sibling;){if(null===s.return||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}o?(a=i,s=e.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):i.removeChild(e.stateNode)}else if(4===e.tag?i=e.stateNode.containerInfo:Bn(e),null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;e=e.return,4===e.tag&&(n=!1)}e.sibling.return=e.return,e=e.sibling}}function Un(t,e){switch(e.tag){case 2:break;case 5:var n=e.stateNode;if(null!=n){var i=e.memoizedProps;t=null!==t?t.memoizedProps:i;var o=e.type,a=e.updateQueue;e.updateQueue=null,null!==a&&(n[oi]=i,ye(n,a,o,t,i))}break;case 6:null===e.stateNode&&r("162"),e.stateNode.nodeValue=e.memoizedProps;break;case 3:case 15:case 16:break;default:r("163")}}function Vn(t,e,n){n=He(n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){dr(r),Ln(t,e)},n}function qn(t,e,n){n=He(n),n.tag=3;var r=t.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){null===cs?cs=new Set([this]):cs.add(this);var n=e.value,r=e.stack;Ln(t,e),this.componentDidCatch(n,{componentStack:null!==r?r:""})}),n}function $n(t,e,n,r,i,o){n.effectTag|=512,n.firstEffect=n.lastEffect=null,r=rn(r,n),t=e;do{switch(t.tag){case 3:return t.effectTag|=1024,r=Vn(t,r,o),void Ye(t,r,o);case 2:if(e=r,n=t.stateNode,0===(64&t.effectTag)&&null!==n&&"function"===typeof n.componentDidCatch&&(null===cs||!cs.has(n)))return t.effectTag|=1024,r=qn(t,e,o),void Ye(t,r,o)}t=t.return}while(null!==t)}function Gn(t){switch(t.tag){case 2:Ae(t);var e=t.effectTag;return 1024&e?(t.effectTag=-1025&e|64,t):null;case 3:return ln(t),Oe(t),e=t.effectTag,1024&e?(t.effectTag=-1025&e|64,t):null;case 5:return cn(t),null;case 16:return e=t.effectTag,1024&e?(t.effectTag=-1025&e|64,t):null;case 4:return ln(t),null;case 13:return an(t),null;default:return null}}function Zn(){if(null!==ns)for(var t=ns.return;null!==t;){var e=t;switch(e.tag){case 2:Ae(e);break;case 3:ln(e),Oe(e);break;case 5:cn(e);break;case 4:ln(e);break;case 13:an(e)}t=t.return}rs=null,is=0,os=-1,as=!1,ns=null,ls=!1}function Wn(t){for(;;){var e=t.alternate,n=t.return,r=t.sibling;if(0===(512&t.effectTag)){e=Rn(e,t,is);var i=t;if(1073741823===is||1073741823!==i.expirationTime){var o=0;switch(i.tag){case 3:case 2:var a=i.updateQueue;null!==a&&(o=a.expirationTime)}for(a=i.child;null!==a;)0!==a.expirationTime&&(0===o||o>a.expirationTime)&&(o=a.expirationTime),a=a.sibling;i.expirationTime=o}if(null!==e)return e;if(null!==n&&0===(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=t.firstEffect),n.lastEffect=t.lastEffect),1<t.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=t:n.firstEffect=t,n.lastEffect=t)),null!==r)return r;if(null===n){ls=!0;break}t=n}else{if(null!==(t=Gn(t,as,is)))return t.effectTag&=511,t;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512),null!==r)return r;if(null===n)break;t=n}}return null}function Hn(t){var e=Mn(t.alternate,t,is);return null===e&&(e=Wn(t)),Fi.current=null,e}function Xn(t,e,n){es&&r("243"),es=!0,e===is&&t===rs&&null!==ns||(Zn(),rs=t,is=e,os=-1,ns=De(rs.current,null,is),t.pendingCommitExpirationTime=0);var i=!1;for(as=!n||is<=Ya;;){try{if(n)for(;null!==ns&&!fr();)ns=Hn(ns);else for(;null!==ns;)ns=Hn(ns)}catch(e){if(null===ns)i=!0,dr(e);else{null===ns&&r("271"),n=ns;var o=n.return;if(null===o){i=!0,dr(e);break}$n(t,o,n,e,as,is,Ja),ns=Wn(n)}}break}if(es=!1,i)return null;if(null===ns){if(ls)return t.pendingCommitExpirationTime=e,t.current.alternate;as&&r("262"),0<=os&&setTimeout(function(){var e=t.current.expirationTime;0!==e&&(0===t.remainingExpirationTime||t.remainingExpirationTime<e)&&ir(t,e)},os),mr(t.current.expirationTime)}return null}function Kn(t,e){var n;t:{for(es&&!us&&r("263"),n=t.return;null!==n;){switch(n.tag){case 2:var i=n.stateNode;if("function"===typeof n.type.getDerivedStateFromCatch||"function"===typeof i.componentDidCatch&&(null===cs||!cs.has(i))){t=rn(e,t),t=qn(n,t,1),Ke(n,t,1),Qn(n,1),n=void 0;break t}break;case 3:t=rn(e,t),t=Vn(n,t,1),Ke(n,t,1),Qn(n,1),n=void 0;break t}n=n.return}3===t.tag&&(n=rn(e,t),n=Vn(t,n,1),Ke(t,n,1),Qn(t,1)),n=void 0}return n}function Yn(){var t=2+25*(1+((tr()-2+500)/25|0));return t<=Qa&&(t=Qa+1),Qa=t}function Jn(t,e){return t=0!==ts?ts:es?us?1:is:1&e.mode?Ts?2+10*(1+((t-2+15)/10|0)):2+25*(1+((t-2+500)/25|0)):1,Ts&&(0===gs||t>gs)&&(gs=t),t}function Qn(t,e){for(;null!==t;){if((0===t.expirationTime||t.expirationTime>e)&&(t.expirationTime=e),null!==t.alternate&&(0===t.alternate.expirationTime||t.alternate.expirationTime>e)&&(t.alternate.expirationTime=e),null===t.return){if(3!==t.tag)break;var n=t.stateNode;!es&&0!==is&&e<is&&Zn();var i=n.current.expirationTime;es&&!us&&rs===n||ir(n,i),Ps>Cs&&r("185")}t=t.return}}function tr(){return Ja=wa()-Ka,Ya=2+(Ja/10|0)}function er(t){var e=ts;ts=2+25*(1+((tr()-2+500)/25|0));try{return t()}finally{ts=e}}function nr(t,e,n,r,i){var o=ts;ts=1;try{return t(e,n,r,i)}finally{ts=o}}function rr(t){if(0!==fs){if(t>fs)return;null!==ds&&Sa(ds)}var e=wa()-Ka;fs=t,ds=Ea(ar,{timeout:10*(t-2)-e})}function ir(t,e){if(null===t.nextScheduledRoot)t.remainingExpirationTime=e,null===hs?(ps=hs=t,t.nextScheduledRoot=t):(hs=hs.nextScheduledRoot=t,hs.nextScheduledRoot=ps);else{var n=t.remainingExpirationTime;(0===n||e<n)&&(t.remainingExpirationTime=e)}ms||(Es?Ss&&(ys=t,vs=1,pr(t,1,!1)):1===e?sr():rr(e))}function or(){var t=0,e=null;if(null!==hs)for(var n=hs,i=ps;null!==i;){var o=i.remainingExpirationTime;if(0===o){if((null===n||null===hs)&&r("244"),i===i.nextScheduledRoot){ps=hs=i.nextScheduledRoot=null;break}if(i===ps)ps=o=i.nextScheduledRoot,hs.nextScheduledRoot=o,i.nextScheduledRoot=null;else{if(i===hs){hs=n,hs.nextScheduledRoot=ps,i.nextScheduledRoot=null;break}n.nextScheduledRoot=i.nextScheduledRoot,i.nextScheduledRoot=null}i=n.nextScheduledRoot}else{if((0===t||o<t)&&(t=o,e=i),i===hs)break;n=i,i=i.nextScheduledRoot}}n=ys,null!==n&&n===e&&1===t?Ps++:Ps=0,ys=e,vs=t}function ar(t){ur(0,!0,t)}function sr(){ur(1,!1,null)}function ur(t,e,n){if(ws=n,or(),e)for(;null!==ys&&0!==vs&&(0===t||t>=vs)&&(!_s||tr()>=vs);)tr(),pr(ys,vs,!_s),or();else for(;null!==ys&&0!==vs&&(0===t||t>=vs);)pr(ys,vs,!1),or();null!==ws&&(fs=0,ds=null),0!==vs&&rr(vs),ws=null,_s=!1,cr()}function lr(t,e){ms&&r("253"),ys=t,vs=e,pr(t,e,!1),sr(),cr()}function cr(){if(Ps=0,null!==ks){var t=ks;ks=null;for(var e=0;e<t.length;e++){var n=t[e];try{n._onComplete()}catch(t){bs||(bs=!0,xs=t)}}}if(bs)throw t=xs,xs=null,bs=!1,t}function pr(t,e,n){ms&&r("245"),ms=!0,n?(n=t.finishedWork,null!==n?hr(t,n,e):null!==(n=Xn(t,e,!0))&&(fr()?t.finishedWork=n:hr(t,n,e))):(n=t.finishedWork,null!==n?hr(t,n,e):null!==(n=Xn(t,e,!1))&&hr(t,n,e)),ms=!1}function hr(t,e,n){var i=t.firstBatch;if(null!==i&&i._expirationTime<=n&&(null===ks?ks=[i]:ks.push(i),i._defer))return t.finishedWork=e,void(t.remainingExpirationTime=0);if(t.finishedWork=null,us=es=!0,n=e.stateNode,n.current===e&&r("177"),i=n.pendingCommitExpirationTime,0===i&&r("261"),n.pendingCommitExpirationTime=0,tr(),Fi.current=null,1<e.effectTag)if(null!==e.lastEffect){e.lastEffect.nextEffect=e;var o=e.firstEffect}else o=e;else o=e.firstEffect;ba=Mo;var a=Fr();if(Xt(a)){if("selectionStart"in a)var s={start:a.selectionStart,end:a.selectionEnd};else t:{var u=window.getSelection&&window.getSelection();if(u&&0!==u.rangeCount){s=u.anchorNode;var l=u.anchorOffset,c=u.focusNode;u=u.focusOffset;try{s.nodeType,c.nodeType}catch(t){s=null;break t}var p=0,h=-1,f=-1,d=0,m=0,y=a,v=null;e:for(;;){for(var g;y!==s||0!==l&&3!==y.nodeType||(h=p+l),y!==c||0!==u&&3!==y.nodeType||(f=p+u),3===y.nodeType&&(p+=y.nodeValue.length),null!==(g=y.firstChild);)v=y,y=g;for(;;){if(y===a)break e;if(v===s&&++d===l&&(h=p),v===c&&++m===u&&(f=p),null!==(g=y.nextSibling))break;y=v,v=y.parentNode}y=g}s=-1===h||-1===f?null:{start:h,end:f}}else s=null}s=s||{start:0,end:0}}else s=null;for(xa={focusedElem:a,selectionRange:s},Ut(!1),ss=o;null!==ss;){a=!1,s=void 0;try{for(;null!==ss;){if(256&ss.effectTag){var _=ss.alternate;switch(l=ss,l.tag){case 2:if(256&l.effectTag&&null!==_){var b=_.memoizedProps,x=_.memoizedState,w=l.stateNode;w.props=l.memoizedProps,w.state=l.memoizedState;var E=w.getSnapshotBeforeUpdate(b,x);w.__reactInternalSnapshotBeforeUpdate=E}break;case 3:case 5:case 6:case 4:break;default:r("163")}}ss=ss.nextEffect}}catch(t){a=!0,s=t}a&&(null===ss&&r("178"),Kn(ss,s),null!==ss&&(ss=ss.nextEffect))}for(ss=o;null!==ss;){_=!1,b=void 0;try{for(;null!==ss;){var S=ss.effectTag;if(16&S&&se(ss.stateNode,""),128&S){var T=ss.alternate;if(null!==T){var k=T.ref;null!==k&&("function"===typeof k?k(null):k.current=null)}}switch(14&S){case 2:Fn(ss),ss.effectTag&=-3;break;case 6:Fn(ss),ss.effectTag&=-3,Un(ss.alternate,ss);break;case 4:Un(ss.alternate,ss);break;case 8:x=ss,Nn(x),x.return=null,x.child=null,x.alternate&&(x.alternate.child=null,x.alternate.return=null)}ss=ss.nextEffect}}catch(t){_=!0,b=t}_&&(null===ss&&r("178"),Kn(ss,b),null!==ss&&(ss=ss.nextEffect))}if(k=xa,T=Fr(),S=k.focusedElem,_=k.selectionRange,T!==S&&Ur(document.documentElement,S)){null!==_&&Xt(S)&&(T=_.start,k=_.end,void 0===k&&(k=T),"selectionStart"in S?(S.selectionStart=T,S.selectionEnd=Math.min(k,S.value.length)):window.getSelection&&(T=window.getSelection(),b=S[z()].length,k=Math.min(_.start,b),_=void 0===_.end?k:Math.min(_.end,b),!T.extend&&k>_&&(b=_,_=k,k=b),b=Ht(S,k),x=Ht(S,_),b&&x&&(1!==T.rangeCount||T.anchorNode!==b.node||T.anchorOffset!==b.offset||T.focusNode!==x.node||T.focusOffset!==x.offset)&&(w=document.createRange(),w.setStart(b.node,b.offset),T.removeAllRanges(),k>_?(T.addRange(w),T.extend(x.node,x.offset)):(w.setEnd(x.node,x.offset),T.addRange(w))))),T=[];for(k=S;k=k.parentNode;)1===k.nodeType&&T.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"===typeof S.focus&&S.focus(),S=0;S<T.length;S++)k=T[S],k.element.scrollLeft=k.left,k.element.scrollTop=k.top}for(xa=null,Ut(ba),ba=null,n.current=e,ss=o;null!==ss;){o=!1,S=void 0;try{for(T=i;null!==ss;){var C=ss.effectTag;if(36&C){var P=ss.alternate;switch(k=ss,_=T,k.tag){case 2:var A=k.stateNode;if(4&k.effectTag)if(null===P)A.props=k.memoizedProps,A.state=k.memoizedState,A.componentDidMount();else{var O=P.memoizedProps,I=P.memoizedState;A.props=k.memoizedProps,A.state=k.memoizedState,A.componentDidUpdate(O,I,A.__reactInternalSnapshotBeforeUpdate)}var M=k.updateQueue;null!==M&&(A.props=k.memoizedProps,A.state=k.memoizedState,nn(k,M,A,_));break;case 3:var R=k.updateQueue;if(null!==R){if(b=null,null!==k.child)switch(k.child.tag){case 5:b=k.child.stateNode;break;case 2:b=k.child.stateNode}nn(k,R,b,_)}break;case 5:var L=k.stateNode;null===P&&4&k.effectTag&&_e(k.type,k.memoizedProps)&&L.focus();break;case 6:case 4:case 15:case 16:break;default:r("163")}}if(128&C){k=void 0;var D=ss.ref;if(null!==D){var B=ss.stateNode;switch(ss.tag){case 5:k=B;break;default:k=B}"function"===typeof D?D(k):D.current=k}}var j=ss.nextEffect;ss.nextEffect=null,ss=j}}catch(t){o=!0,S=t}o&&(null===ss&&r("178"),Kn(ss,S),null!==ss&&(ss=ss.nextEffect))}es=us=!1,"function"===typeof $e&&$e(e.stateNode),e=n.current.expirationTime,0===e&&(cs=null),t.remainingExpirationTime=e}function fr(){return!(null===ws||ws.timeRemaining()>As)&&(_s=!0)}function dr(t){null===ys&&r("246"),ys.remainingExpirationTime=0,bs||(bs=!0,xs=t)}function mr(t){null===ys&&r("246"),ys.remainingExpirationTime=t}function yr(t,e){var n=Es;Es=!0;try{return t(e)}finally{(Es=n)||ms||sr()}}function vr(t,e){if(Es&&!Ss){Ss=!0;try{return t(e)}finally{Ss=!1}}return t(e)}function gr(t,e){ms&&r("187");var n=Es;Es=!0;try{return nr(t,e)}finally{Es=n,sr()}}function _r(t,e,n){if(Ts)return t(e,n);Es||ms||0===gs||(ur(gs,!1,null),gs=0);var r=Ts,i=Es;Es=Ts=!0;try{return t(e,n)}finally{Ts=r,(Es=i)||ms||sr()}}function br(t){var e=Es;Es=!0;try{nr(t)}finally{(Es=e)||ms||ur(1,!1,null)}}function xr(t,e,n,i,o){var a=e.current;if(n){n=n._reactInternalFiber;var s;t:{for(2===zt(n)&&2===n.tag||r("170"),s=n;3!==s.tag;){if(Pe(s)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}(s=s.return)||r("171")}s=s.stateNode.context}n=Pe(n)?Me(n,s):s}else n=Vr;return null===e.context?e.context=n:e.pendingContext=n,e=o,o=He(i),o.payload={element:t},e=void 0===e?null:e,null!==e&&(o.callback=e),Ke(a,o,i),Qn(a,i),i}function wr(t){var e=t._reactInternalFiber;return void 0===e&&("function"===typeof t.render?r("188"):r("268",Object.keys(t))),t=Dt(e),null===t?null:t.stateNode}function Er(t,e,n,r){var i=e.current;return i=Jn(tr(),i),xr(t,e,n,i,r)}function Sr(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Tr(t){var e=t.findFiberByHostInstance;return qe(Br({},t,{findHostInstanceByFiber:function(t){return t=Dt(t),null===t?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null}}))}function kr(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Vi,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Cr(t){this._expirationTime=Yn(),this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Pr(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Ar(t,e,n){this._internalRoot=Ue(t,e,n)}function Or(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Ir(t,e){if(e||(e=t?9===t.nodeType?t.documentElement:t.firstChild:null,e=!(!e||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Ar(t,!1,e)}function Mr(t,e,n,i,o){Or(n)||r("200");var a=n._reactRootContainer;if(a){if("function"===typeof o){var s=o;o=function(){var t=Sr(a._internalRoot);s.call(t)}}null!=t?a.legacy_renderSubtreeIntoContainer(t,e,o):a.render(e,o)}else{if(a=n._reactRootContainer=Ir(n,i),"function"===typeof o){var u=o;o=function(){var t=Sr(a._internalRoot);u.call(t)}}vr(function(){null!=t?a.legacy_renderSubtreeIntoContainer(t,e,o):a.render(e,o)})}return Sr(a._internalRoot)}function zr(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Or(e)||r("200"),kr(t,e,null,n)}var Rr=n(31),Lr=n(0),Dr=n(96),Br=n(19),jr=n(33),Fr=n(97),Nr=n(98),Ur=n(99),Vr=n(32);Lr||r("227");var qr={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(t,e,n,r,o,a,s,u,l){i.apply(qr,arguments)},invokeGuardedCallbackAndCatchFirstError:function(t,e,n,r,i,o,a,s,u){if(qr.invokeGuardedCallback.apply(this,arguments),qr.hasCaughtError()){var l=qr.clearCaughtError();qr._hasRethrowError||(qr._hasRethrowError=!0,qr._rethrowError=l)}},rethrowCaughtError:function(){return o.apply(qr,arguments)},hasCaughtError:function(){return qr._hasCaughtError},clearCaughtError:function(){if(qr._hasCaughtError){var t=qr._caughtError;return qr._caughtError=null,qr._hasCaughtError=!1,t}r("198")}},$r=null,Gr={},Zr=[],Wr={},Hr={},Xr={},Kr={plugins:Zr,eventNameDispatchConfigs:Wr,registrationNameModules:Hr,registrationNameDependencies:Xr,possibleRegistrationNames:null,injectEventPluginOrder:u,injectEventPluginsByName:l},Yr=null,Jr=null,Qr=null,ti=null,ei={injectEventPluginOrder:u,injectEventPluginsByName:l},ni={injection:ei,getListener:y,runEventsInBatch:v,runExtractedEventsInBatch:g},ri=Math.random().toString(36).slice(2),ii="__reactInternalInstance$"+ri,oi="__reactEventHandlers$"+ri,ai={precacheFiberNode:function(t,e){e[ii]=t},getClosestInstanceFromNode:_,getInstanceFromNode:function(t){return t=t[ii],!t||5!==t.tag&&6!==t.tag?null:t},getNodeFromInstance:b,getFiberCurrentPropsFromNode:x,updateFiberProps:function(t,e){t[oi]=e}},si={accumulateTwoPhaseDispatches:A,accumulateTwoPhaseDispatchesSkipTarget:function(t){h(t,k)},accumulateEnterLeaveDispatches:O,accumulateDirectDispatches:function(t){h(t,P)}},ui={animationend:I("Animation","AnimationEnd"),animationiteration:I("Animation","AnimationIteration"),animationstart:I("Animation","AnimationStart"),transitionend:I("Transition","TransitionEnd")},li={},ci={};Dr.canUseDOM&&(ci=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);var pi=M("animationend"),hi=M("animationiteration"),fi=M("animationstart"),di=M("transitionend"),mi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yi=null,vi={_root:null,_startText:null,_fallbackText:null},gi="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),_i={type:null,target:null,currentTarget:jr.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};Br(D.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=jr.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=jr.thatReturnsTrue)},persist:function(){this.isPersistent=jr.thatReturnsTrue},isPersistent:jr.thatReturnsFalse,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;for(e=0;e<gi.length;e++)this[gi[e]]=null}}),D.Interface=_i,D.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var i=new e;return Br(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=Br({},r.Interface,t),n.extend=r.extend,F(n),n},F(D);var bi=D.extend({data:null}),xi=D.extend({data:null}),wi=[9,13,27,32],Ei=Dr.canUseDOM&&"CompositionEvent"in window,Si=null;Dr.canUseDOM&&"documentMode"in document&&(Si=document.documentMode);var Ti=Dr.canUseDOM&&"TextEvent"in window&&!Si,ki=Dr.canUseDOM&&(!Ei||Si&&8<Si&&11>=Si),Ci=String.fromCharCode(32),Pi={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Ai=!1,Oi=!1,Ii={eventTypes:Pi,extractEvents:function(t,e,n,r){var i=void 0,o=void 0;if(Ei)t:{switch(t){case"compositionstart":i=Pi.compositionStart;break t;case"compositionend":i=Pi.compositionEnd;break t;case"compositionupdate":i=Pi.compositionUpdate;break t}i=void 0}else Oi?N(t,n)&&(i=Pi.compositionEnd):"keydown"===t&&229===n.keyCode&&(i=Pi.compositionStart);return i?(ki&&(Oi||i!==Pi.compositionStart?i===Pi.compositionEnd&&Oi&&(o=R()):(vi._root=r,vi._startText=L(),Oi=!0)),i=bi.getPooled(i,e,n,r),o?i.data=o:null!==(o=U(n))&&(i.data=o),A(i),o=i):o=null,(t=Ti?V(t,n):q(t,n))?(e=xi.getPooled(Pi.beforeInput,e,n,r),e.data=t,A(e)):e=null,null===o?e:null===e?o:[o,e]}},Mi=null,zi={injectFiberControlledHostComponent:function(t){Mi=t}},Ri=null,Li=null,Di={injection:zi,enqueueStateRestore:G,needsStateRestore:Z,restoreStateIfNeeded:W},Bi=!1,ji={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Fi=Lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ni="function"===typeof Symbol&&Symbol.for,Ui=Ni?Symbol.for("react.element"):60103,Vi=Ni?Symbol.for("react.portal"):60106,qi=Ni?Symbol.for("react.fragment"):60107,$i=Ni?Symbol.for("react.strict_mode"):60108,Gi=Ni?Symbol.for("react.profiler"):60114,Zi=Ni?Symbol.for("react.provider"):60109,Wi=Ni?Symbol.for("react.context"):60110,Hi=Ni?Symbol.for("react.async_mode"):60111,Xi=Ni?Symbol.for("react.forward_ref"):60112,Ki=Ni?Symbol.for("react.timeout"):60113,Yi="function"===typeof Symbol&&Symbol.iterator,Ji=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qi=Object.prototype.hasOwnProperty,to={},eo={},no={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){no[t]=new pt(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];no[e]=new pt(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){no[t]=new pt(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(t){no[t]=new pt(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){no[t]=new pt(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){no[t]=new pt(t,3,!0,t.toLowerCase(),null)}),["capture","download"].forEach(function(t){no[t]=new pt(t,4,!1,t.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(t){no[t]=new pt(t,6,!1,t.toLowerCase(),null)}),["rowSpan","start"].forEach(function(t){no[t]=new pt(t,5,!1,t.toLowerCase(),null)});var ro=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ro,ht);no[e]=new pt(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ro,ht);no[e]=new pt(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ro,ht);no[e]=new pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),no.tabIndex=new pt("tabIndex",1,!1,"tabindex",null);var io={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},oo=null,ao=null,so=!1;Dr.canUseDOM&&(so=tt("input")&&(!document.documentMode||9<document.documentMode));var uo={eventTypes:io,_isInputEventSupported:so,extractEvents:function(t,e,n,r){var i=e?b(e):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=St:J(i)?so?o=Ot:(o=Pt,a=Ct):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=At),o&&(o=o(t,e)))return xt(o,n,r);a&&a(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&_t(i,"number",i.value)}},lo=D.extend({view:null,detail:null}),co={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},po=lo.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Mt,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)}}),ho=po.extend({pointerId:null,width:null,height:null,pressure:null,tiltX:null,tiltY:null,pointerType:null,isPrimary:null}),fo={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},mo={eventTypes:fo,extractEvents:function(t,e,n,r){var i="mouseover"===t||"pointerover"===t,o="mouseout"===t||"pointerout"===t;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=e,e=(e=n.relatedTarget||n.toElement)?_(e):null):o=null,o===e)return null;var a=void 0,s=void 0,u=void 0,l=void 0;return"mouseout"===t||"mouseover"===t?(a=po,s=fo.mouseLeave,u=fo.mouseEnter,l="mouse"):"pointerout"!==t&&"pointerover"!==t||(a=ho,s=fo.pointerLeave,u=fo.pointerEnter,l="pointer"),t=null==o?i:b(o),i=null==e?i:b(e),s=a.getPooled(s,o,n,r),s.type=l+"leave",s.target=t,s.relatedTarget=i,n=a.getPooled(u,e,n,r),n.type=l+"enter",n.target=i,n.relatedTarget=t,O(s,n,o,e),[s,n]}},yo=D.extend({animationName:null,elapsedTime:null,pseudoElement:null}),vo=D.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),go=lo.extend({relatedTarget:null}),_o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xo=lo.extend({key:function(t){if(t.key){var e=_o[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?(t=jt(t),13===t?"Enter":String.fromCharCode(t)):"keydown"===t.type||"keyup"===t.type?bo[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Mt,charCode:function(t){return"keypress"===t.type?jt(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?jt(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),wo=po.extend({dataTransfer:null}),Eo=lo.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Mt}),So=D.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),To=po.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),ko=[["abort","abort"],[pi,"animationEnd"],[hi,"animationIteration"],[fi,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[di,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],Co={},Po={};[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(t){Ft(t,!0)}),ko.forEach(function(t){Ft(t,!1)});var Ao={eventTypes:Co,isInteractiveTopLevelEventType:function(t){return void 0!==(t=Po[t])&&!0===t.isInteractive},extractEvents:function(t,e,n,r){var i=Po[t];if(!i)return null;switch(t){case"keypress":if(0===jt(n))return null;case"keydown":case"keyup":t=xo;break;case"blur":case"focus":t=go;break;case"click":if(2===n.button)return null;case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=po;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=wo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=Eo;break;case pi:case hi:case fi:t=yo;break;case di:t=So;break;case"scroll":t=lo;break;case"wheel":t=To;break;case"copy":case"cut":case"paste":t=vo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=ho;break;default:t=D}return e=t.getPooled(i,e,n,r),A(e),e}},Oo=Ao.isInteractiveTopLevelEventType,Io=[],Mo=!0,zo={get _enabled(){return Mo},setEnabled:Ut,isEnabled:function(){return Mo},trapBubbledEvent:Vt,trapCapturedEvent:qt,dispatchEvent:Gt},Ro={},Lo=0,Do="_reactListenersID"+(""+Math.random()).slice(2),Bo=Dr.canUseDOM&&"documentMode"in document&&11>=document.documentMode,jo={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Fo=null,No=null,Uo=null,Vo=!1,qo={eventTypes:jo,extractEvents:function(t,e,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){t:{o=Zt(o),i=Xr.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break t}}o=!0}i=!o}if(i)return null;switch(o=e?b(e):window,t){case"focus":(J(o)||"true"===o.contentEditable)&&(Fo=o,No=e,Uo=null);break;case"blur":Uo=No=Fo=null;break;case"mousedown":Vo=!0;break;case"contextmenu":case"mouseup":return Vo=!1,Kt(n,r);case"selectionchange":if(Bo)break;case"keydown":case"keyup":return Kt(n,r)}return null}};ei.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),Yr=ai.getFiberCurrentPropsFromNode,Jr=ai.getInstanceFromNode,Qr=ai.getNodeFromInstance,ei.injectEventPluginsByName({SimpleEventPlugin:Ao,EnterLeaveEventPlugin:mo,ChangeEventPlugin:uo,SelectEventPlugin:qo,BeforeInputEventPlugin:Ii});var $o="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,Go=Date,Zo=setTimeout,Wo=clearTimeout,Ho=void 0;if("object"===typeof performance&&"function"===typeof performance.now){var Xo=performance;Ho=function(){return Xo.now()}}else Ho=function(){return Go.now()};var Ko=void 0,Yo=void 0;if(Dr.canUseDOM){var Jo="function"===typeof $o?$o:function(){r("276")},Qo=null,ta=null,ea=-1,na=!1,ra=!1,ia=0,oa=33,aa=33,sa={didTimeout:!1,timeRemaining:function(){var t=ia-Ho();return 0<t?t:0}},ua=function(t,e){var n=t.scheduledCallback,r=!1;try{n(e),r=!0}finally{Yo(t),r||(na=!0,window.postMessage(la,"*"))}},la="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(t){if(t.source===window&&t.data===la&&(na=!1,null!==Qo)){if(null!==Qo){var e=Ho();if(!(-1===ea||ea>e)){t=-1;for(var n=[],r=Qo;null!==r;){var i=r.timeoutTime;-1!==i&&i<=e?n.push(r):-1!==i&&(-1===t||i<t)&&(t=i),r=r.next}if(0<n.length)for(sa.didTimeout=!0,e=0,r=n.length;e<r;e++)ua(n[e],sa);ea=t}}for(t=Ho();0<ia-t&&null!==Qo;)t=Qo,sa.didTimeout=!1,ua(t,sa),t=Ho();null===Qo||ra||(ra=!0,Jo(ca))}},!1);var ca=function(t){ra=!1;var e=t-ia+aa;e<aa&&oa<aa?(8>e&&(e=8),aa=e<oa?oa:e):oa=e,ia=t+aa,na||(na=!0,window.postMessage(la,"*"))};Ko=function(t,e){var n=-1;return null!=e&&"number"===typeof e.timeout&&(n=Ho()+e.timeout),(-1===ea||-1!==n&&n<ea)&&(ea=n),t={scheduledCallback:t,timeoutTime:n,prev:null,next:null},null===Qo?Qo=t:null!==(e=t.prev=ta)&&(e.next=t),ta=t,ra||(ra=!0,Jo(ca)),t},Yo=function(t){if(null!==t.prev||Qo===t){var e=t.next,n=t.prev;t.next=null,t.prev=null,null!==e?null!==n?(n.next=e,e.prev=n):(e.prev=null,Qo=e):null!==n?(n.next=null,ta=n):ta=Qo=null}}}else{var pa=new Map;Ko=function(t){var e={scheduledCallback:t,timeoutTime:0,next:null,prev:null},n=Zo(function(){t({timeRemaining:function(){return 1/0},didTimeout:!1})});return pa.set(t,n),e},Yo=function(t){var e=pa.get(t.scheduledCallback);pa.delete(t),Wo(e)}}var ha={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},fa=void 0,da=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n)})}:t}(function(t,e){if(t.namespaceURI!==ha.svg||"innerHTML"in t)t.innerHTML=e;else{for(fa=fa||document.createElement("div"),fa.innerHTML="<svg>"+e+"</svg>",e=fa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}),ma={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ya=["Webkit","ms","Moz","O"];Object.keys(ma).forEach(function(t){ya.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ma[e]=ma[t]})});var va=Br({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ga=jr.thatReturns(""),_a={createElement:he,createTextNode:fe,setInitialProperties:de,diffProperties:me,updateProperties:ye,diffHydratedProperties:ve,diffHydratedText:ge,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(t,e,n){switch(e){case"input":if(vt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=x(i);o||r("90"),it(i),vt(i,o)}}}break;case"textarea":re(t,n);break;case"select":null!=(e=n.value)&&Qt(t,!!n.multiple,e,!1)}}},ba=null,xa=null,wa=Ho,Ea=Ko,Sa=Yo;new Set;var Ta=[],ka=-1,Ca=Ee(Vr),Pa=Ee(!1),Aa=Vr,Oa=null,Ia=null,Ma=!1,za=Ee(null),Ra=Ee(null),La=Ee(0),Da={},Ba=Ee(Da),ja=Ee(Da),Fa=Ee(Da),Na={isMounted:function(t){return!!(t=t._reactInternalFiber)&&2===zt(t)},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=tr();r=Jn(r,t);var i=He(r);i.payload=e,void 0!==n&&null!==n&&(i.callback=n),Ke(t,i,r),Qn(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=tr();r=Jn(r,t);var i=He(r);i.tag=1,i.payload=e,void 0!==n&&null!==n&&(i.callback=n),Ke(t,i,r),Qn(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=tr();n=Jn(n,t);var r=He(n);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),Ke(t,r,n),Qn(t,n)}},Ua=Array.isArray,Va=vn(!0),qa=vn(!1),$a=null,Ga=null,Za=!1,Wa=void 0,Ha=void 0,Xa=void 0;Wa=function(){},Ha=function(t,e,n){(e.updateQueue=n)&&zn(e)},Xa=function(t,e,n,r){n!==r&&zn(e)};var Ka=wa(),Ya=2,Ja=Ka,Qa=0,ts=0,es=!1,ns=null,rs=null,is=0,os=-1,as=!1,ss=null,us=!1,ls=!1,cs=null,ps=null,hs=null,fs=0,ds=void 0,ms=!1,ys=null,vs=0,gs=0,_s=!1,bs=!1,xs=null,ws=null,Es=!1,Ss=!1,Ts=!1,ks=null,Cs=1e3,Ps=0,As=1,Os={updateContainerAtExpirationTime:xr,createContainer:function(t,e,n){return Ue(t,e,n)},updateContainer:Er,flushRoot:lr,requestWork:ir,computeUniqueAsyncExpiration:Yn,batchedUpdates:yr,unbatchedUpdates:vr,deferredUpdates:er,syncUpdates:nr,interactiveUpdates:_r,flushInteractiveUpdates:function(){ms||0===gs||(ur(gs,!1,null),gs=0)},flushControlled:br,flushSync:gr,getPublicRootInstance:Sr,findHostInstance:wr,findHostInstanceWithNoPortals:function(t){return t=Bt(t),null===t?null:t.stateNode},injectIntoDevTools:Tr};zi.injectFiberControlledHostComponent(_a),Cr.prototype.render=function(t){this._defer||r("250"),this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,n=this._expirationTime,i=new Pr;return xr(t,e,null,n,i._onCommit),i},Cr.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},Cr.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(this._defer&&null!==e||r("251"),this._hasChildren){var n=this._expirationTime;if(e!==this){this._hasChildren&&(n=this._expirationTime=e._expirationTime,this.render(this._children));for(var i=null,o=e;o!==this;)i=o,o=o._next;null===i&&r("251"),i._next=o._next,this._next=e,t.firstBatch=this}this._defer=!1,lr(t,n),e=this._next,this._next=null,e=t.firstBatch=e,null!==e&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},Cr.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},Pr.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},Pr.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var n=t[e];"function"!==typeof n&&r("191",n),n()}}},Ar.prototype.render=function(t,e){var n=this._internalRoot,r=new Pr;return e=void 0===e?null:e,null!==e&&r.then(e),Er(t,n,null,r._onCommit),r},Ar.prototype.unmount=function(t){var e=this._internalRoot,n=new Pr;return t=void 0===t?null:t,null!==t&&n.then(t),Er(null,e,null,n._onCommit),n},Ar.prototype.legacy_renderSubtreeIntoContainer=function(t,e,n){var r=this._internalRoot,i=new Pr;return n=void 0===n?null:n,null!==n&&i.then(n),Er(e,r,t,i._onCommit),i},Ar.prototype.createBatch=function(){var t=new Cr(this),e=t._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=t,t._next=null;else{for(n=null;null!==r&&r._expirationTime<=e;)n=r,r=r._next;t._next=r,null!==n&&(n._next=t)}return t},H=Os.batchedUpdates,X=Os.interactiveUpdates,K=Os.flushInteractiveUpdates;var Is={createPortal:zr,findDOMNode:function(t){return null==t?null:1===t.nodeType?t:wr(t)},hydrate:function(t,e,n){return Mr(null,t,e,!0,n)},render:function(t,e,n){return Mr(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,i){return(null==t||void 0===t._reactInternalFiber)&&r("38"),Mr(t,e,n,!1,i)},unmountComponentAtNode:function(t){return Or(t)||r("40"),!!t._reactRootContainer&&(vr(function(){Mr(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return zr.apply(void 0,arguments)},unstable_batchedUpdates:yr,unstable_deferredUpdates:er,unstable_interactiveUpdates:_r,flushSync:gr,unstable_flushControlled:br,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:ni,EventPluginRegistry:Kr,EventPropagators:si,ReactControlledComponent:Di,ReactDOMComponentTree:ai,ReactDOMEventListener:zo},unstable_createRoot:function(t,e){return new Ar(t,!0,null!=e&&!0===e.hydrate)}};Tr({findFiberByHostInstance:_,bundleType:0,version:"16.4.2",rendererPackageName:"react-dom"});var Ms={default:Is},zs=Ms&&Is||Ms;t.exports=zs.default?zs.default:zs},function(t,e,n){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=i},function(t,e,n){"use strict";function r(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}t.exports=r},function(t,e,n){"use strict";function r(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function i(t,e){if(r(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!o.call(e,n[a])||!r(t[n[a]],e[n[a]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;t.exports=i},function(t,e,n){"use strict";function r(t,e){return!(!t||!e)&&(t===e||!i(t)&&(i(e)?r(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}var i=n(100);t.exports=r},function(t,e,n){"use strict";function r(t){return i(t)&&3==t.nodeType}var i=n(101);t.exports=r},function(t,e,n){"use strict";function r(t){var e=t?t.ownerDocument||t:document,n=e.defaultView||window;return!(!t||!("function"===typeof n.Node?t instanceof n.Node:"object"===typeof t&&"number"===typeof t.nodeType&&"string"===typeof t.nodeName))}t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(9),s=n.n(a),u=n(0),l=n.n(u),c=n(3),p=n.n(c),h=n(12),f=n(22),d=function(t){function e(){var n,o,a;r(this,e);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,t.call.apply(t,[this].concat(u))),o.history=Object(h.a)(o.props),a=n,i(o,a)}return o(e,t),e.prototype.componentWillMount=function(){s()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},e.prototype.render=function(){return l.a.createElement(f.a,{history:this.history,children:this.props.children})},e}(l.a.Component);d.propTypes={basename:p.a.string,forceRefresh:p.a.bool,getUserConfirmation:p.a.func,keyLength:p.a.number,children:p.a.node}},function(t,e,n){"use strict";var r=n(10),i=n.n(r),o=n(7),a=n.n(o),s=n(17),u=n(13),l=n(21),c=n(43),p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f=function(){try{return window.history.state||{}}catch(t){return{}}},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a()(c.b,"Browser history needs a DOM");var e=window.history,n=Object(c.g)(),r=!Object(c.h)(),o=t.forceRefresh,d=void 0!==o&&o,m=t.getUserConfirmation,y=void 0===m?c.c:m,v=t.keyLength,g=void 0===v?6:v,_=t.basename?Object(u.g)(Object(u.a)(t.basename)):"",b=function(t){var e=t||{},n=e.key,r=e.state,o=window.location,a=o.pathname,l=o.search,c=o.hash,p=a+l+c;return i()(!_||Object(u.c)(p,_),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+p+'" to begin with "'+_+'".'),_&&(p=Object(u.e)(p,_)),Object(s.a)(p,r,n)},x=function(){return Math.random().toString(36).substr(2,g)},w=Object(l.a)(),E=function(t){h(V,t),V.length=e.length,w.notifyListeners(V.location,V.action)},S=function(t){Object(c.d)(t)||C(b(t.state))},T=function(){C(b(f()))},k=!1,C=function(t){if(k)k=!1,E();else{w.confirmTransitionTo(t,"POP",y,function(e){e?E({action:"POP",location:t}):P(t)})}},P=function(t){var e=V.location,n=O.indexOf(e.key);-1===n&&(n=0);var r=O.indexOf(t.key);-1===r&&(r=0);var i=n-r;i&&(k=!0,R(i))},A=b(f()),O=[A.key],I=function(t){return _+Object(u.b)(t)},M=function(t,r){i()(!("object"===("undefined"===typeof t?"undefined":p(t))&&void 0!==t.state&&void 0!==r),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var o=Object(s.a)(t,r,x(),V.location);w.confirmTransitionTo(o,"PUSH",y,function(t){if(t){var r=I(o),a=o.key,s=o.state;if(n)if(e.pushState({key:a,state:s},null,r),d)window.location.href=r;else{var u=O.indexOf(V.location.key),l=O.slice(0,-1===u?0:u+1);l.push(o.key),O=l,E({action:"PUSH",location:o})}else i()(void 0===s,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=r}})},z=function(t,r){i()(!("object"===("undefined"===typeof t?"undefined":p(t))&&void 0!==t.state&&void 0!==r),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var o=Object(s.a)(t,r,x(),V.location);w.confirmTransitionTo(o,"REPLACE",y,function(t){if(t){var r=I(o),a=o.key,s=o.state;if(n)if(e.replaceState({key:a,state:s},null,r),d)window.location.replace(r);else{var u=O.indexOf(V.location.key);-1!==u&&(O[u]=o.key),E({action:"REPLACE",location:o})}else i()(void 0===s,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(r)}})},R=function(t){e.go(t)},L=function(){return R(-1)},D=function(){return R(1)},B=0,j=function(t){B+=t,1===B?(Object(c.a)(window,"popstate",S),r&&Object(c.a)(window,"hashchange",T)):0===B&&(Object(c.e)(window,"popstate",S),r&&Object(c.e)(window,"hashchange",T))},F=!1,N=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=w.setPrompt(t);return F||(j(1),F=!0),function(){return F&&(F=!1,j(-1)),e()}},U=function(t){var e=w.appendListener(t);return j(1),function(){j(-1),e()}},V={length:e.length,action:"POP",location:A,createHref:I,push:M,replace:z,go:R,goBack:L,goForward:D,block:N,listen:U};return V};e.a=d},function(t,e,n){"use strict";var r=n(10),i=n.n(r),o=n(7),a=n.n(o),s=n(17),u=n(13),l=n(21),c=n(43),p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+Object(u.f)(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:u.f,decodePath:u.a},slash:{encodePath:u.a,decodePath:u.a}},f=function(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)},d=function(t){return window.location.hash=t},m=function(t){var e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a()(c.b,"Hash history needs a DOM");var e=window.history,n=Object(c.f)(),r=t.getUserConfirmation,o=void 0===r?c.c:r,y=t.hashType,v=void 0===y?"slash":y,g=t.basename?Object(u.g)(Object(u.a)(t.basename)):"",_=h[v],b=_.encodePath,x=_.decodePath,w=function(){var t=x(f());return i()(!g||Object(u.c)(t,g),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+g+'".'),g&&(t=Object(u.e)(t,g)),Object(s.a)(t)},E=Object(l.a)(),S=function(t){p(G,t),G.length=e.length,E.notifyListeners(G.location,G.action)},T=!1,k=null,C=function(){var t=f(),e=b(t);if(t!==e)m(e);else{var n=w(),r=G.location;if(!T&&Object(s.b)(r,n))return;if(k===Object(u.b)(n))return;k=null,P(n)}},P=function(t){if(T)T=!1,S();else{E.confirmTransitionTo(t,"POP",o,function(e){e?S({action:"POP",location:t}):A(t)})}},A=function(t){var e=G.location,n=z.lastIndexOf(Object(u.b)(e));-1===n&&(n=0);var r=z.lastIndexOf(Object(u.b)(t));-1===r&&(r=0);var i=n-r;i&&(T=!0,B(i))},O=f(),I=b(O);O!==I&&m(I);var M=w(),z=[Object(u.b)(M)],R=function(t){return"#"+b(g+Object(u.b)(t))},L=function(t,e){i()(void 0===e,"Hash history cannot push state; it is ignored");var n=Object(s.a)(t,void 0,void 0,G.location);E.confirmTransitionTo(n,"PUSH",o,function(t){if(t){var e=Object(u.b)(n),r=b(g+e);if(f()!==r){k=e,d(r);var o=z.lastIndexOf(Object(u.b)(G.location)),a=z.slice(0,-1===o?0:o+1);a.push(e),z=a,S({action:"PUSH",location:n})}else i()(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),S()}})},D=function(t,e){i()(void 0===e,"Hash history cannot replace state; it is ignored");var n=Object(s.a)(t,void 0,void 0,G.location);E.confirmTransitionTo(n,"REPLACE",o,function(t){if(t){var e=Object(u.b)(n),r=b(g+e);f()!==r&&(k=e,m(r));var i=z.indexOf(Object(u.b)(G.location));-1!==i&&(z[i]=e),S({action:"REPLACE",location:n})}})},B=function(t){i()(n,"Hash history go(n) causes a full page reload in this browser"),e.go(t)},j=function(){return B(-1)},F=function(){return B(1)},N=0,U=function(t){N+=t,1===N?Object(c.a)(window,"hashchange",C):0===N&&Object(c.e)(window,"hashchange",C)},V=!1,q=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=E.setPrompt(t);return V||(U(1),V=!0),function(){return V&&(V=!1,U(-1)),e()}},$=function(t){var e=E.appendListener(t);return U(1),function(){U(-1),e()}},G={length:e.length,action:"POP",location:M,createHref:R,push:L,replace:D,go:B,goBack:j,goForward:F,block:q,listen:$};return G};e.a=y},function(t,e,n){"use strict";var r=n(10),i=n.n(r),o=n(13),a=n(17),s=n(21),u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(t,e,n){return Math.min(Math.max(t,e),n)},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.getUserConfirmation,n=t.initialEntries,r=void 0===n?["/"]:n,p=t.initialIndex,h=void 0===p?0:p,f=t.keyLength,d=void 0===f?6:f,m=Object(s.a)(),y=function(t){l(A,t),A.length=A.entries.length,m.notifyListeners(A.location,A.action)},v=function(){return Math.random().toString(36).substr(2,d)},g=c(h,0,r.length-1),_=r.map(function(t){return"string"===typeof t?Object(a.a)(t,void 0,v()):Object(a.a)(t,void 0,t.key||v())}),b=o.b,x=function(t,n){i()(!("object"===("undefined"===typeof t?"undefined":u(t))&&void 0!==t.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r=Object(a.a)(t,n,v(),A.location);m.confirmTransitionTo(r,"PUSH",e,function(t){if(t){var e=A.index,n=e+1,i=A.entries.slice(0);i.length>n?i.splice(n,i.length-n,r):i.push(r),y({action:"PUSH",location:r,index:n,entries:i})}})},w=function(t,n){i()(!("object"===("undefined"===typeof t?"undefined":u(t))&&void 0!==t.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r=Object(a.a)(t,n,v(),A.location);m.confirmTransitionTo(r,"REPLACE",e,function(t){t&&(A.entries[A.index]=r,y({action:"REPLACE",location:r}))})},E=function(t){var n=c(A.index+t,0,A.entries.length-1),r=A.entries[n];m.confirmTransitionTo(r,"POP",e,function(t){t?y({action:"POP",location:r,index:n}):y()})},S=function(){return E(-1)},T=function(){return E(1)},k=function(t){var e=A.index+t;return e>=0&&e<A.entries.length},C=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.setPrompt(t)},P=function(t){return m.appendListener(t)},A={length:_.length,action:"POP",location:_[g],index:g,entries:_,createHref:b,push:x,replace:w,go:E,goBack:S,goForward:T,canGo:k,block:C,listen:P};return A};e.a=p},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(9),s=n.n(a),u=n(0),l=n.n(u),c=n(3),p=n.n(c),h=n(12),f=n(22),d=function(t){function e(){var n,o,a;r(this,e);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,t.call.apply(t,[this].concat(u))),o.history=Object(h.b)(o.props),a=n,i(o,a)}return o(e,t),e.prototype.componentWillMount=function(){s()(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},e.prototype.render=function(){return l.a.createElement(f.a,{history:this.history,children:this.props.children})},e}(l.a.Component);d.propTypes={basename:p.a.string,getUserConfirmation:p.a.func,hashType:p.a.oneOf(["hashbang","noslash","slash"]),children:p.a.node}},function(t,e,n){"use strict";var r=n(108);r.a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(9),s=n.n(a),u=n(0),l=n.n(u),c=n(3),p=n.n(c),h=n(12),f=n(23),d=function(t){function e(){var n,o,a;r(this,e);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,t.call.apply(t,[this].concat(u))),o.history=Object(h.d)(o.props),a=n,i(o,a)}return o(e,t),e.prototype.componentWillMount=function(){s()(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},e.prototype.render=function(){return l.a.createElement(f.a,{history:this.history,children:this.props.children})},e}(l.a.Component);d.propTypes={initialEntries:p.a.array,initialIndex:p.a.number,getUserConfirmation:p.a.func,keyLength:p.a.number,children:p.a.node},e.a=d},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var i=n(0),o=n.n(i),a=n(3),s=n.n(a),u=n(45),l=n(44),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function(t){var e=t.to,n=t.exact,i=t.strict,a=t.location,s=t.activeClassName,h=t.className,f=t.activeStyle,d=t.style,m=t.isActive,y=t["aria-current"],v=r(t,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),g="object"===("undefined"===typeof e?"undefined":p(e))?e.pathname:e,_=g&&g.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1");return o.a.createElement(u.a,{path:_,exact:n,strict:i,location:a,children:function(t){var n=t.location,r=t.match,i=!!(m?m(r,n):r);return o.a.createElement(l.a,c({to:e,className:i?[h,s].filter(function(t){return t}).join(" "):h,style:i?c({},d,f):d,"aria-current":i&&y||null},v))}})};h.propTypes={to:l.a.propTypes.to,exact:s.a.bool,strict:s.a.bool,location:s.a.object,activeClassName:s.a.string,className:s.a.string,activeStyle:s.a.object,style:s.a.object,isActive:s.a.func,"aria-current":s.a.oneOf(["page","step","location","date","time","true"])},h.defaultProps={activeClassName:"active","aria-current":"page"}},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=n(112);r.a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(3),l=n.n(u),c=n(7),p=n.n(c),h=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.enable=function(t){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(t)},e.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},e.prototype.componentWillMount=function(){p()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},e.prototype.componentWillReceiveProps=function(t){t.when?this.props.when&&this.props.message===t.message||this.enable(t.message):this.disable()},e.prototype.componentWillUnmount=function(){this.disable()},e.prototype.render=function(){return null},e}(s.a.Component);h.propTypes={when:l.a.bool,message:l.a.oneOfType([l.a.func,l.a.string]).isRequired},h.defaultProps={when:!0},h.contextTypes={router:l.a.shape({history:l.a.shape({block:l.a.func.isRequired}).isRequired}).isRequired},e.a=h},function(t,e,n){"use strict";var r=n(114);r.a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(3),l=n.n(u),c=n(9),p=n.n(c),h=n(7),f=n.n(h),d=n(12),m=n(48),y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},e.prototype.componentWillMount=function(){f()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},e.prototype.componentDidMount=function(){this.isStatic()||this.perform()},e.prototype.componentDidUpdate=function(t){var e=Object(d.c)(t.to),n=Object(d.c)(this.props.to);if(Object(d.f)(e,n))return void p()(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"');this.perform()},e.prototype.computeTo=function(t){var e=t.computedMatch,n=t.to;return e?"string"===typeof n?Object(m.a)(n,e.params):y({},n,{pathname:Object(m.a)(n.pathname,e.params)}):n},e.prototype.perform=function(){var t=this.context.router.history,e=this.props.push,n=this.computeTo(this.props);e?t.push(n):t.replace(n)},e.prototype.render=function(){return null},e}(s.a.Component);v.propTypes={computedMatch:l.a.object,push:l.a.bool,from:l.a.string,to:l.a.oneOfType([l.a.string,l.a.object]).isRequired},v.defaultProps={push:!1},v.contextTypes={router:l.a.shape({history:l.a.shape({push:l.a.func.isRequired,replace:l.a.func.isRequired}).isRequired,staticContext:l.a.object}).isRequired},e.a=v},function(t,e,n){"use strict";var r=n(116);r.a},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(9),u=n.n(s),l=n(7),c=n.n(l),p=n(0),h=n.n(p),f=n(3),d=n.n(f),m=n(12),y=n(23),v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g=function(t){return"/"===t.charAt(0)?t:"/"+t},_=function(t,e){return t?v({},e,{pathname:g(t)+e.pathname}):e},b=function(t,e){if(!t)return e;var n=g(t);return 0!==e.pathname.indexOf(n)?e:v({},e,{pathname:e.pathname.substr(n.length)})},x=function(t){return"string"===typeof t?t:Object(m.e)(t)},w=function(t){return function(){c()(!1,"You cannot %s with <StaticRouter>",t)}},E=function(){},S=function(t){function e(){var n,r,a;i(this,e);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=o(this,t.call.apply(t,[this].concat(u))),r.createHref=function(t){return g(r.props.basename+x(t))},r.handlePush=function(t){var e=r.props,n=e.basename,i=e.context;i.action="PUSH",i.location=_(n,Object(m.c)(t)),i.url=x(i.location)},r.handleReplace=function(t){var e=r.props,n=e.basename,i=e.context;i.action="REPLACE",i.location=_(n,Object(m.c)(t)),i.url=x(i.location)},r.handleListen=function(){return E},r.handleBlock=function(){return E},a=n,o(r,a)}return a(e,t),e.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},e.prototype.componentWillMount=function(){u()(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},e.prototype.render=function(){var t=this.props,e=t.basename,n=(t.context,t.location),i=r(t,["basename","context","location"]),o={createHref:this.createHref,action:"POP",location:b(e,Object(m.c)(n)),push:this.handlePush,replace:this.handleReplace,go:w("go"),goBack:w("goBack"),goForward:w("goForward"),listen:this.handleListen,block:this.handleBlock};return h.a.createElement(y.a,v({},i,{history:o}))},e}(h.a.Component);S.propTypes={basename:d.a.string,context:d.a.object.isRequired,location:d.a.oneOfType([d.a.string,d.a.object])},S.defaultProps={basename:"",location:"/"},S.childContextTypes={router:d.a.object.isRequired},e.a=S},function(t,e,n){"use strict";var r=n(118);e.a=r.a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(3),l=n.n(u),c=n(9),p=n.n(c),h=n(7),f=n.n(h),d=n(24),m=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return o(e,t),e.prototype.componentWillMount=function(){f()(this.context.router,"You should not use <Switch> outside a <Router>")},e.prototype.componentWillReceiveProps=function(t){p()(!(t.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),p()(!(!t.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},e.prototype.render=function(){var t=this.context.router.route,e=this.props.children,n=this.props.location||t.location,r=void 0,i=void 0;return s.a.Children.forEach(e,function(e){if(null==r&&s.a.isValidElement(e)){var o=e.props,a=o.path,u=o.exact,l=o.strict,c=o.sensitive,p=o.from,h=a||p;i=e,r=Object(d.a)(n.pathname,{path:h,exact:u,strict:l,sensitive:c},t.match)}}),r?s.a.cloneElement(i,{location:n,computedMatch:r}):null},e}(s.a.Component);m.contextTypes={router:l.a.shape({route:l.a.object.isRequired}).isRequired},m.propTypes={children:l.a.node,location:l.a.object},e.a=m},function(t,e,n){"use strict";var r=n(48);r.a},function(t,e,n){"use strict";var r=n(24);r.a},function(t,e,n){"use strict";var r=n(122);e.a=r.a},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}var i=n(0),o=n.n(i),a=n(3),s=n.n(a),u=n(36),l=n.n(u),c=n(46),p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h=function(t){var e=function(e){var n=e.wrappedComponentRef,i=r(e,["wrappedComponentRef"]);return o.a.createElement(c.a,{children:function(e){return o.a.createElement(t,p({},i,e,{ref:n}))}})};return e.displayName="withRouter("+(t.displayName||t.name)+")",e.WrappedComponent=t,e.propTypes={wrappedComponentRef:s.a.func},l()(e,t)};e.a=h},function(t,e,n){"use strict";function r(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(i){return"function"===typeof i?i(n,r,t):e(i)}}}}var i=r();i.withExtraArgument=r,e.a=i},function(t,e,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(125),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";function n(t,e,n,r){var o=e&&e.prototype instanceof i?e:i,a=Object.create(o.prototype),s=new f(r||[]);return a._invoke=l(t,n,s),a}function r(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function i(){}function o(){}function a(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function u(t){function e(n,i,o,a){var s=r(t[n],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"===typeof l&&g.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(l).then(function(t){u.value=t,o(u)},a)}a(s.arg)}function n(t,n){function r(){return new Promise(function(r,i){e(t,n,r,i)})}return i=i?i.then(r,r):r()}var i;this._invoke=n}function l(t,e,n){var i=T;return function(o,a){if(i===C)throw new Error("Generator is already running");if(i===P){if("throw"===o)throw a;return m()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=c(s,n);if(u){if(u===A)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===T)throw i=P,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=C;var l=r(t,e,n);if("normal"===l.type){if(i=n.done?P:k,l.arg===A)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=P,n.method="throw",n.arg=l.arg)}}}function c(t,e){var n=t.iterator[e.method];if(n===y){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=y,c(t,e),"throw"===e.method))return A;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var i=r(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,A;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=y),e.delegate=null,A):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,A)}function p(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function h(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function f(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(p,this),this.reset(!0)}function d(t){if(t){var e=t[b];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(g.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=y,e.done=!0,e};return r.next=r}}return{next:m}}function m(){return{value:y,done:!0}}var y,v=Object.prototype,g=v.hasOwnProperty,_="function"===typeof Symbol?Symbol:{},b=_.iterator||"@@iterator",x=_.asyncIterator||"@@asyncIterator",w=_.toStringTag||"@@toStringTag",E="object"===typeof t,S=e.regeneratorRuntime;if(S)return void(E&&(t.exports=S));S=e.regeneratorRuntime=E?t.exports:{},S.wrap=n;var T="suspendedStart",k="suspendedYield",C="executing",P="completed",A={},O={};O[b]=function(){return this};var I=Object.getPrototypeOf,M=I&&I(I(d([])));M&&M!==v&&g.call(M,b)&&(O=M);var z=a.prototype=i.prototype=Object.create(O);o.prototype=z.constructor=a,a.constructor=o,a[w]=o.displayName="GeneratorFunction",S.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},S.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,w in t||(t[w]="GeneratorFunction")),t.prototype=Object.create(z),t},S.awrap=function(t){return{__await:t}},s(u.prototype),u.prototype[x]=function(){return this},S.AsyncIterator=u,S.async=function(t,e,r,i){var o=new u(n(t,e,r,i));return S.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},s(z),z[w]="Generator",z[b]=function(){return this},z.toString=function(){return"[object Generator]"},S.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},S.values=d,f.prototype={constructor:f,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(h),!t)for(var e in this)"t"===e.charAt(0)&&g.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=y)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,r&&(n.method="next",n.arg=y),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),s=g.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),A},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),h(n),A}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;h(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:d(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=y),A}}}(function(){return this}()||Function("return this")())},function(t,e,n){"use strict";function r(t){var e=new a(t),n=o(a.prototype.request,e);return i.extend(n,a.prototype,e),i.extend(n,e),n}var i=n(6),o=n(49),a=n(128),s=n(25),u=r(s);u.Axios=a,u.create=function(t){return r(i.merge(s,t))},u.Cancel=n(53),u.CancelToken=n(143),u.isCancel=n(52),u.all=function(t){return Promise.all(t)},u.spread=n(144),t.exports=u,t.exports.default=u},function(t,e){function n(t){return!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function r(t){return"function"===typeof t.readFloatLE&&"function"===typeof t.slice&&n(t.slice(0,0))}t.exports=function(t){return null!=t&&(n(t)||r(t)||!!t._isBuffer)}},function(t,e,n){"use strict";function r(t){this.defaults=t,this.interceptors={request:new a,response:new a}}var i=n(25),o=n(6),a=n(138),s=n(139);r.prototype.request=function(t){"string"===typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),t=o.merge(i,{method:"get"},this.defaults,t),t.method=t.method.toLowerCase();var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},o.forEach(["delete","get","head","options"],function(t){r.prototype[t]=function(e,n){return this.request(o.merge(n||{},{method:t,url:e}))}}),o.forEach(["post","put","patch"],function(t){r.prototype[t]=function(e,n,r){return this.request(o.merge(r||{},{method:t,url:e,data:n}))}}),t.exports=r},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(p===clearTimeout)return clearTimeout(t);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function a(){m&&f&&(m=!1,f.length?d=f.concat(d):y=-1,d.length&&s())}function s(){if(!m){var t=i(a);m=!0;for(var e=d.length;e;){for(f=d,d=[];++y<e;)f&&f[y].run();y=-1,e=d.length}f=null,m=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,p,h=t.exports={};!function(){try{c="function"===typeof setTimeout?setTimeout:n}catch(t){c=n}try{p="function"===typeof clearTimeout?clearTimeout:r}catch(t){p=r}}();var f,d=[],m=!1,y=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||m||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(6);t.exports=function(t,e){r.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},function(t,e,n){"use strict";var r=n(51);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t}},function(t,e,n){"use strict";function r(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(6);t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(i.isURLSearchParams(e))o=e.toString();else{var a=[];i.forEach(e,function(t,e){null!==t&&"undefined"!==typeof t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),a.push(r(e)+"="+r(t))}))}),o=a.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e,n){"use strict";var r=n(6),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,a={};return t?(r.forEach(t.split("\n"),function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),n=r.trim(t.substr(o+1)),e){if(a[e]&&i.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}}),a):a}},function(t,e,n){"use strict";var r=n(6);t.exports=r.isStandardBrowserEnv()?function(){function t(t){var e=t;return n&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var e,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return e=t(window.location.href),function(n){var i=r.isString(n)?t(n):n;return i.protocol===e.protocol&&i.host===e.host}}():function(){return function(){return!0}}()},function(t,e,n){"use strict";function r(){this.message="String contains an invalid character"}function i(t){for(var e,n,i=String(t),a="",s=0,u=o;i.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&e>>8-s%1*8)){if((n=i.charCodeAt(s+=.75))>255)throw new r;e=e<<8|n}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",t.exports=i},function(t,e,n){"use strict";var r=n(6);t.exports=r.isStandardBrowserEnv()?function(){return{write:function(t,e,n,i,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(t,e,n){"use strict";function r(){this.handlers=[]}var i=n(6);r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},function(t,e,n){"use strict";function r(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var i=n(6),o=n(140),a=n(52),s=n(25),u=n(141),l=n(142);t.exports=function(t){return r(t),t.baseURL&&!u(t.url)&&(t.url=l(t.baseURL,t.url)),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function(e){return r(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return a(e)||(r(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var r=n(6);t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";function r(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new i(t),e(n.reason))})}var i=n(53);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t;return{token:new r(function(e){t=e}),cancel:t}},t.exports=r},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(10),s=r(a),u=n(7),l=r(u),c=n(55),p=n(26),h=n(56),f=r(h),d=n(146),m=function(){try{return window.history.state||{}}catch(t){return{}}},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(d.canUseDOM,"Browser history needs a DOM");var e=window.history,n=(0,d.supportsHistory)(),r=!(0,d.supportsPopStateOnHashChange)(),a=t.forceRefresh,u=void 0!==a&&a,h=t.getUserConfirmation,y=void 0===h?d.getConfirmation:h,v=t.keyLength,g=void 0===v?6:v,_=t.basename?(0,p.stripTrailingSlash)((0,p.addLeadingSlash)(t.basename)):"",b=function(t){var e=t||{},n=e.key,r=e.state,i=window.location,o=i.pathname,a=i.search,u=i.hash,l=o+a+u;return(0,s.default)(!_||(0,p.hasBasename)(l,_),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+l+'" to begin with "'+_+'".'),_&&(l=(0,p.stripBasename)(l,_)),(0,c.createLocation)(l,r,n)},x=function(){return Math.random().toString(36).substr(2,g)},w=(0,f.default)(),E=function(t){o(V,t),V.length=e.length,w.notifyListeners(V.location,V.action)},S=function(t){(0,d.isExtraneousPopstateEvent)(t)||C(b(t.state))},T=function(){C(b(m()))},k=!1,C=function(t){if(k)k=!1,E();else{w.confirmTransitionTo(t,"POP",y,function(e){e?E({action:"POP",location:t}):P(t)})}},P=function(t){var e=V.location,n=O.indexOf(e.key);-1===n&&(n=0);var r=O.indexOf(t.key);-1===r&&(r=0);var i=n-r;i&&(k=!0,R(i))},A=b(m()),O=[A.key],I=function(t){return _+(0,p.createPath)(t)},M=function(t,r){(0,s.default)(!("object"===("undefined"===typeof t?"undefined":i(t))&&void 0!==t.state&&void 0!==r),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var o=(0,c.createLocation)(t,r,x(),V.location);w.confirmTransitionTo(o,"PUSH",y,function(t){if(t){var r=I(o),i=o.key,a=o.state;if(n)if(e.pushState({key:i,state:a},null,r),u)window.location.href=r;else{var l=O.indexOf(V.location.key),c=O.slice(0,-1===l?0:l+1);c.push(o.key),O=c,E({action:"PUSH",location:o})}else(0,s.default)(void 0===a,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=r}})},z=function(t,r){(0,s.default)(!("object"===("undefined"===typeof t?"undefined":i(t))&&void 0!==t.state&&void 0!==r),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var o=(0,c.createLocation)(t,r,x(),V.location);w.confirmTransitionTo(o,"REPLACE",y,function(t){if(t){var r=I(o),i=o.key,a=o.state;if(n)if(e.replaceState({key:i,state:a},null,r),u)window.location.replace(r);else{var l=O.indexOf(V.location.key);-1!==l&&(O[l]=o.key),E({action:"REPLACE",location:o})}else(0,s.default)(void 0===a,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(r)}})},R=function(t){e.go(t)},L=function(){return R(-1)},D=function(){return R(1)},B=0,j=function(t){B+=t,1===B?((0,d.addEventListener)(window,"popstate",S),r&&(0,d.addEventListener)(window,"hashchange",T)):0===B&&((0,d.removeEventListener)(window,"popstate",S),r&&(0,d.removeEventListener)(window,"hashchange",T))},F=!1,N=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=w.setPrompt(t);return F||(j(1),F=!0),function(){return F&&(F=!1,j(-1)),e()}},U=function(t){var e=w.appendListener(t);return j(1),function(){j(-1),e()}},V={length:e.length,action:"POP",location:A,createHref:I,push:M,replace:z,go:R,goBack:L,goForward:D,block:N,listen:U};return V};e.default=y},function(t,e,n){"use strict";e.__esModule=!0;e.canUseDOM=!("undefined"===typeof window||!window.document||!window.document.createElement),e.addEventListener=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},e.removeEventListener=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},e.getConfirmation=function(t,e){return e(window.confirm(t))},e.supportsHistory=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},e.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},e.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},e.isExtraneousPopstateEvent=function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(10),s=r(a),u=n(26),l=n(55),c=n(56),p=r(c),h=function(t,e,n){return Math.min(Math.max(t,e),n)},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.getUserConfirmation,n=t.initialEntries,r=void 0===n?["/"]:n,a=t.initialIndex,c=void 0===a?0:a,f=t.keyLength,d=void 0===f?6:f,m=(0,p.default)(),y=function(t){o(A,t),A.length=A.entries.length,m.notifyListeners(A.location,A.action)},v=function(){return Math.random().toString(36).substr(2,d)},g=h(c,0,r.length-1),_=r.map(function(t){return"string"===typeof t?(0,l.createLocation)(t,void 0,v()):(0,l.createLocation)(t,void 0,t.key||v())}),b=u.createPath,x=function(t,n){(0,s.default)(!("object"===("undefined"===typeof t?"undefined":i(t))&&void 0!==t.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r=(0,l.createLocation)(t,n,v(),A.location);m.confirmTransitionTo(r,"PUSH",e,function(t){if(t){var e=A.index,n=e+1,i=A.entries.slice(0);i.length>n?i.splice(n,i.length-n,r):i.push(r),y({action:"PUSH",location:r,index:n,entries:i})}})},w=function(t,n){(0,s.default)(!("object"===("undefined"===typeof t?"undefined":i(t))&&void 0!==t.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r=(0,l.createLocation)(t,n,v(),A.location);m.confirmTransitionTo(r,"REPLACE",e,function(t){t&&(A.entries[A.index]=r,y({action:"REPLACE",location:r}))})},E=function(t){var n=h(A.index+t,0,A.entries.length-1),r=A.entries[n];m.confirmTransitionTo(r,"POP",e,function(t){t?y({action:"POP",location:r,index:n}):y()})},S=function(){return E(-1)},T=function(){return E(1)},k=function(t){var e=A.index+t;return e>=0&&e<A.entries.length},C=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.setPrompt(t)},P=function(t){return m.appendListener(t)},A={length:_.length,action:"POP",location:_[g],index:g,entries:_,createHref:b,push:x,replace:w,go:E,goBack:S,goForward:T,canGo:k,block:C,listen:P};return A};e.default=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(11),l=n(16),c=n(5),p=n(1),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),h(e,[{key:"componentDidMount",value:function(){this.props.loadInitialData()}},{key:"render",value:function(){var t=this.props,e=t.isLoggedIn,n=t.isProfileComplete;return s.a.createElement(u.d,null,s.a.createElement(u.b,{exact:!0,path:"/",component:l.d}),s.a.createElement(u.b,{exact:!0,path:"/login",component:l.e}),s.a.createElement(u.b,{exact:!0,path:"/signup",component:l.o}),e&&s.a.createElement(u.d,null,s.a.createElement(u.b,{exact:!0,path:"/profile",component:l.p}),s.a.createElement(u.b,{exact:!0,path:"/logout",component:l.f}),n&&s.a.createElement(u.d,null,s.a.createElement(u.b,{exact:!0,path:"/pods",component:l.k}),s.a.createElement(u.b,{exact:!0,path:"/search",component:l.m}),s.a.createElement(u.b,{exact:!0,path:"/pods/:id",component:l.j}),s.a.createElement(u.b,{exact:!0,path:"/pods/:id/CreateAdventure",component:l.c}),s.a.createElement(u.b,{exact:!0,path:"/users/:id/text",component:l.n}),s.a.createElement(u.b,{exact:!0,path:"/adventures",component:l.b}),s.a.createElement(u.b,{exact:!0,path:"/adventures/:id/",component:l.a}),s.a.createElement(u.b,{exact:!0,path:"/users/:id",component:l.n})),s.a.createElement(u.b,{component:l.p})),s.a.createElement(u.b,{component:l.e}))}}]),e}(a.Component),d=function(t){return{isLoggedIn:!!t.user.id,isProfileComplete:t.user.phone&&t.user.firstName&&t.user.lastName&&t.user.address}},m=function(t){return{loadInitialData:function(){return t(Object(c.l)())}}};e.a=Object(u.e)(Object(p.b)(d,m)(f))},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=n(2),l=n.n(u),c=n(1),p=n(0),h=n.n(p),f=n(15),d=n(8),m=n.n(d),y=n(16),v=n(14),g=n(4),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),b=g.b?"http://localhost:3001":"https://obscure-lowlands-38066.herokuapp.com",x=function(t){function e(){o(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={priceRange:2,activityLevel:2,artsyLevel:2,hungerLevel:2,drinkLevel:2,location:"enter a location"},t.handleChange=t.handleChange.bind(t),t.getGeocode=t.getGeocode.bind(t),t.handleSubmit=t.handleSubmit.bind(t),t}return s(e,t),_(e,[{key:"componentDidMount",value:function(){function t(){return e.apply(this,arguments)}var e=i(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setState({location:this.props.address});case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"componentWillReceiveProps",value:function(){function t(t){return e.apply(this,arguments)}var e=i(l.a.mark(function t(e){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setState({location:e.location});case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"handleChange",value:function(){function t(t){return e.apply(this,arguments)}var e=i(l.a.mark(function t(e){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setState(r({},e.target.name,e.target.value));case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"getGeocode",value:function(){function t(t){return e.apply(this,arguments)}var e=i(l.a.mark(function t(e){var n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.post(b+"/api/geoLoc/geocode",e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"handleSubmit",value:function(){function t(t){return e.apply(this,arguments)}var e=i(l.a.mark(function t(e){var n,r,i,o,a,s,u,c,p;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n=this.state,r=n.priceRange,i=n.activityLevel,o=n.artsyLevel,a=n.hungerLevel,s=n.drinkLevel,t.next=4,this.getGeocode(this.state.location);case 4:u=t.sent,c=u.latitude,p=u.longitude,this.props.submitPollThunk({latitude:c,longitude:p,priceRange:r,activityLevel:i,artsyLevel:o,hungerLevel:a,drinkLevel:s,adventureId:+this.props.adventureId,userId:this.props.userId}),this.props.updateThisAdventure(this.props.adventureId);case 9:case"end":return t.stop()}},t,this)}));return t}()},{key:"render",value:function(){return h.a.createElement("div",{className:"container",id:"poll-page"},h.a.createElement("h2",{className:"poll-header"},"Enter Your Preferences:"),h.a.createElement("form",{onSubmit:this.handleSubmit},h.a.createElement("div",{id:"map-and-poll",className:"form-group form-check"},h.a.createElement("div",null,h.a.createElement("label",{htmlFor:"location"}),h.a.createElement("input",{type:"text",name:"location",onChange:this.handleChange,className:"form-control",id:"nameInput","aria-describedby":"name",value:this.state.location}),h.a.createElement("small",{id:"location",className:"form-text text-muted"}),h.a.createElement("div",{id:"map-outer"},h.a.createElement("div",{id:"map-container"},h.a.createElement(y.g,{interactive:"true",coords:this.state.location})))),h.a.createElement("div",{className:"form-input"},h.a.createElement("label",{htmlFor:"priceRange"}),h.a.createElement("h5",{className:"text-center"}," How much money \ud83d\udcb8 would you like to spend?"),h.a.createElement("p",{className:"text-right"},"\ud83e\udd11\ud83d\udcb5"),h.a.createElement("input",{type:"range",name:"priceRange",onChange:this.handleChange,min:"0",max:"4",defaultValue:"2",className:"form-control-range",id:"formControlRange"}),h.a.createElement("small",{id:"priceRange",className:"form-text text-muted"})),h.a.createElement("div",{className:"form-input"},h.a.createElement("label",{htmlFor:"activityLevel"}),h.a.createElement("h5",{className:"text-center"}," How active \ud83d\udea3\u200d\ud83d\udeb4\ud83c\udfff would you like to be? "),h.a.createElement("h5",{className:"text-left"},"\ud83c\udfc3\ud83c\udffc\u200d"),h.a.createElement("h5",{className:"text-right"},"\ud83c\udfc3\ud83c\udffc\ud83c\udfcb\ufe0f\u200d\ud83d\udc83\ud83c\udfff"),h.a.createElement("input",{type:"range",name:"activityLevel",onChange:this.handleChange,min:"0",max:"4",defaultValue:"2",className:"form-control-range",id:"formControlRange"}),h.a.createElement("small",{id:"activityLevel",className:"form-text text-muted"})),h.a.createElement("div",{className:"form-input"},h.a.createElement("label",{htmlFor:"artsyLevel"}),h.a.createElement("h5",{className:"text-center"}," How artsy would you like to be? \ud83c\udfa8"),h.a.createElement("p",{className:"text-right"},"\ud83d\uddbc\ud83c\udfad\ud83d\udc69\ud83c\udffd\u200d\ud83c\udfa8"),h.a.createElement("p",{className:"text-left"},"\ud83d\udc69\ud83c\udffd\u200d\ud83c\udfa8"),h.a.createElement("input",{type:"range",name:"artsyLevel",onChange:this.handleChange,min:"0",max:"4",defaultValue:"2",className:"form-control-range",id:"formControlRange"}),h.a.createElement("small",{id:"artsyLevel",className:"form-text text-muted"})),h.a.createElement("div",{className:"form-input"},h.a.createElement("label",{htmlFor:"hungerLevel"}),h.a.createElement("h5",{className:"text-center"}," How hungry \ud83c\udf5dwill you be? "),h.a.createElement("p",{className:"text-right"},"\ud83c\udf2e\ud83c\udf57\ud83c\udf71\ud83c\udf54"),h.a.createElement("p",{className:"text-left"},"\ud83c\udf6a"),h.a.createElement("input",{type:"range",name:"hungerLevel",onChange:this.handleChange,min:"0",max:"4",defaultValue:"2",className:"form-control-range",id:"formControlRange"}),h.a.createElement("small",{id:"hungerLevel",className:"form-text text-muted"})),h.a.createElement("div",{className:"form-input"},h.a.createElement("label",{htmlFor:"drinkLevel"}),h.a.createElement("h5",{className:"text-center"}," \ud83c\udf7e How much would you like drink? "),h.a.createElement("p",{className:"text-right"},"\ud83c\udf7b\ud83c\udf79\ud83c\udf78\ud83c\udf77\ud83e\udd42\ud83c\udf78\ud83e\udd42\ud83e\udd64"),h.a.createElement("p",{className:"text-left"},"\ud83c\udf79"),h.a.createElement("input",{type:"range",name:"drinkLevel",onChange:this.handleChange,min:"0",max:"4",defaultValue:"2",className:"form-control-range",id:"formControlRange"}),h.a.createElement("small",{id:"drinkLevel",className:"form-text text-muted"})),h.a.createElement("span",null,h.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block"},"Submit")))))}}]),e}(p.Component),w=function(t){return{address:t.user.address,location:t.poll.location,userId:t.user.id}},E=function(t){return{submitPollThunk:function(e){return t(Object(f.d)(e))},updateThisAdventure:function(e){return t(Object(v.i)(e))}}};e.a=Object(c.b)(w,E)(x)},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=n(2),l=n.n(u),c=n(0),p=n.n(c),h=n(1),f=n(5),d=n(8),m=n.n(d),y=n(60),v=n(4),g=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_=v.b?"http://localhost:3001":"https://obscure-lowlands-38066.herokuapp.com",b=function(t){function e(){var t=this;o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.handleSubmit=function(){var e=i(l.a.mark(function e(r){var i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.next=3,n.props.createNewPod({name:n.state.name});case 3:return i=t.sent,t.next=6,m.a.post(_+"/api/pods/userPod",{podId:i.id,userId:n.props.userId});case 6:window.location="/pods/"+i.id;case 7:case"end":return t.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(t){n.setState(r({},t.target.name,t.target.value))},n.state={name:"",userId:null},n}return s(e,t),g(e,[{key:"render",value:function(){return p.a.createElement("div",null,p.a.createElement("div",{id:"user-pods"},p.a.createElement(y.a,{id:this.props.userId})),p.a.createElement("br",null),p.a.createElement("h3",{className:"text-center font-weight-normal"}," Create a new pod! "),p.a.createElement("form",{onSubmit:this.handleSubmit},p.a.createElement("div",{className:"form-group form-check"},p.a.createElement("label",{htmlFor:"name"}),p.a.createElement("input",{type:"text",name:"name",onChange:this.handleChange,className:"form-control",id:"name","aria-describedby":"name",placeholder:"Enter pod name"}),p.a.createElement("small",{id:"name",className:"form-text text-muted"})),p.a.createElement("span",null,p.a.createElement("br",null),p.a.createElement("button",{className:"btn btn-secondary btn-lg btn-block",type:"submit"},"Create a New Pod"))))}}]),e}(c.Component),x=function(t){return{userId:t.user.id}},w=function(t){return{createNewPod:function(e){return t(Object(f.c)(e))}}};e.a=Object(h.b)(x,w)(b)},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(3),a=n.n(o),s=n(1),u=n(11),l=n(5),c=function(t){var e=t.isLoggedIn,n=t.handleLogout;return i.a.createElement("div",{id:"navbar",className:"navbar navbar-default"},i.a.createElement("div",{id:"navbar-header"},i.a.createElement(u.a,{to:"/"},i.a.createElement("h2",{id:"title"},"indecisive"))),e?i.a.createElement("div",{className:"nav-items"},i.a.createElement("ul",{id:"logged-out-navbar",className:"nav navbar-nav"},i.a.createElement("li",null,i.a.createElement(u.a,{to:"/profile"},"Profile")),i.a.createElement("li",null,i.a.createElement(u.a,{to:"/adventures"},"Adventures")),i.a.createElement("li",null,i.a.createElement(u.a,{to:"/pods"},"Pods")),i.a.createElement("li",null,i.a.createElement("button",{id:"logout-button",className:"btn btn-primary btn-sm",onClick:n},"Log Out")))):i.a.createElement("div",{className:"nav-items"},i.a.createElement("ul",{id:"logged-in-navbar",className:"nav navbar-nav"},i.a.createElement("li",null,i.a.createElement(u.a,{to:"/login"},"Log In")),i.a.createElement("li",null,i.a.createElement(u.a,{to:"/signup"},"Sign Up")))))},p=function(t){return{isLoggedIn:!!t.user.id}},h=function(t){return{handleLogout:function(){return t(Object(l.k)())}}};e.a=Object(s.b)(p,h)(c),c.propTypes={isLoggedIn:a.a.bool.isRequired}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=n(2),l=n.n(u),c=n(0),p=n.n(c),h=n(5),f=n(1),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),m=function(t){function e(){o(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={user:{firstName:"",lastName:"",phone:"",email:"",address:"",image:""},currentImage:""},t.handleChange=t.handleChange.bind(t),t.handleSubmit=t.handleSubmit.bind(t),t}return s(e,t),d(e,[{key:"componentDidMount",value:function(){function t(){return e.apply(this,arguments)}var e=i(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.props.user.firstName){t.next=3;break}return t.next=3,this.setState({user:Object.assign({},this.state.user,{firstName:this.props.user.firstName})});case 3:if(!this.props.user.lastName){t.next=6;break}return t.next=6,this.setState({user:Object.assign({},this.state.user,{lastName:this.props.user.lastName})});case 6:if(!this.props.user.phone){t.next=9;break}return t.next=9,this.setState({user:Object.assign({},this.state.user,{phone:this.props.user.phone})});case 9:if(!this.props.user.email){t.next=12;break}return t.next=12,this.setState({user:Object.assign({},this.state.user,{email:this.props.user.email})});case 12:if(!this.props.user.address){t.next=15;break}return t.next=15,this.setState({user:Object.assign({},this.state.user,{address:this.props.user.address})});case 15:if(!this.props.user.image){t.next=18;break}return t.next=18,this.setState({user:Object.assign({},this.state.user,{image:this.props.user.image})});case 18:return t.next=20,this.setState({currentImage:this.state.user.image});case 20:case"end":return t.stop()}},t,this)}));return t}()},{key:"handleChange",value:function(t){t.preventDefault(),this.setState({user:Object.assign({},this.state.user,r({},t.target.name,t.target.value))})}},{key:"handleSubmit",value:function(t){t.preventDefault(),this.state.user.image.length>3&&this.setState({currentImage:this.state.user.image}),this.state.user.firstName&&this.state.user.lastName&&this.state.user.phone&&this.state.user.email&&this.state.user.address&&this.state.user.image&&this.props.updateProfile({firstName:this.state.user.firstName,lastName:this.state.user.lastName,phone:this.state.user.phone,email:this.state.user.email,address:this.state.user.address,image:this.state.user.image},this.props.user.id)}},{key:"render",value:function(){return p.a.createElement("div",{id:"user-profile"},p.a.createElement("h3",{className:"font-weight-normal"},"Welcome, ",this.state.user.firstName),p.a.createElement("br",null),p.a.createElement("form",{id:"userProfile",onSubmit:this.handleSubmit,className:"form-group"},p.a.createElement("div",{className:"form-group"},p.a.createElement("img",{src:this.state.currentImage,alt:"userprofile",className:"rounded mx-auto d-block",width:"200px",height:"200px"})),p.a.createElement("div",null,p.a.createElement("label",{htmlFor:"email"},"Email"),p.a.createElement("br",null),p.a.createElement("input",{className:"form-control mx-sm-3",name:"email",type:"string",onChange:this.handleChange,value:this.state.user.email}),this.state.user.email?null:p.a.createElement("p",null,"Email cannot be null")),p.a.createElement("div",null,p.a.createElement("label",{htmlFor:"firstName"},"First Name"),p.a.createElement("br",null),p.a.createElement("input",{className:"form-control mx-sm-3",name:"firstName",type:"string",onChange:this.handleChange,value:this.state.user.firstName}),this.state.user.firstName?null:p.a.createElement("p",null,"You must enter your first name ")),p.a.createElement("div",null,p.a.createElement("label",{htmlFor:"lastName"},"Last Name"),p.a.createElement("br",null),p.a.createElement("input",{className:"form-control mx-sm-3",name:"lastName",type:"string",onChange:this.handleChange,value:this.state.user.lastName}),this.state.user.lastName?null:p.a.createElement("p",null,"You must enter your last name")),p.a.createElement("div",null,p.a.createElement("label",{htmlFor:"phone"},"Phone Number"),p.a.createElement("br",null),p.a.createElement("input",{className:"form-control mx-sm-3",name:"phone",type:"string",onChange:this.handleChange,value:this.state.user.phone}),this.state.user.phone?null:p.a.createElement("p",null,"Phone number cannot be null")),p.a.createElement("div",null,p.a.createElement("label",{htmlFor:"address"},"Address"),p.a.createElement("br",null),p.a.createElement("input",{className:"form-control mx-sm-3",name:"address",type:"string",onChange:this.handleChange,value:this.state.user.address}),this.state.user.address?null:p.a.createElement("p",null,"Address cannot be null")),p.a.createElement("div",null,p.a.createElement("label",{htmlFor:"image"},"Profile Photo URL"),p.a.createElement("br",null),p.a.createElement("input",{className:"form-control mx-sm-3",name:"image",type:"string",onChange:this.handleChange,value:this.state.user.image}),this.state.user.image?null:p.a.createElement("p",null,"Photo URL cannot be null")),p.a.createElement("div",null,p.a.createElement("button",{type:"submit button",className:"btn btn-dark btn-lg btn-block"},"Submit"))))}}]),e}(c.Component),y=function(t){return{user:t.user}},v=function(t){return{updateProfile:function(e,n){return t(Object(h.d)(e,n))},getUser:function(){return t(Object(h.l)())}}};e.a=Object(f.b)(y,v)(m)},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),u=n.n(s),l=n(1),c=n(5),p=n(29),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.handleChange=function(e){t.setState(r({},e.target.name,e.target.value))},t.handleSubmit=function(e){e.preventDefault(),console.log("handle submit thunk"),t.props.createUser({email:t.state.email,password:t.state.password})},t.state={email:"",password:""},t.handleSubmit=t.handleSubmit.bind(t),t.handleChange=t.handleChange.bind(t),t}return a(e,t),h(e,[{key:"render",value:function(){return u.a.createElement("div",{className:"authForm",id:"signupPage"},u.a.createElement(p.a,{className:"authElement"}),u.a.createElement("form",{onSubmit:this.handleSubmit,className:"authElement"},u.a.createElement("div",null,u.a.createElement("label",{htmlFor:"email"},u.a.createElement("div",null,u.a.createElement("h3",null,"Email"))),u.a.createElement("div",null,u.a.createElement("input",{className:"form-control",name:"email",type:"text",onChange:this.handleChange}))),u.a.createElement("div",null,u.a.createElement("label",{htmlFor:"password"},u.a.createElement("div",null,u.a.createElement("h3",null,"Password"))),u.a.createElement("div",null,u.a.createElement("input",{className:"form-control",name:"password",type:"password",onChange:this.handleChange}))),u.a.createElement("div",{className:"authElement"})),u.a.createElement("div",{className:"authElement"},u.a.createElement("button",{className:"btn btn-primary",type:"submit",onClick:this.handleSubmit},"Sign Up")))}}]),e}(u.a.Component),d=function(t){return{createUser:function(e){return t(Object(c.b)(e))}}};e.a=Object(l.b)(null,d)(f)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(1),l=n(5),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),p=function(t){function e(){var t,n,o,a;r(this,e);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),o.handleLogout=function(t){t.preventDefault(),o.props.logout()},a=n,i(o,a)}return o(e,t),c(e,[{key:"render",value:function(){return s.a.createElement("div",{className:"landingPage",id:"logout"},s.a.createElement("button",{type:"button",onClick:this.handleLogout},"Log Out"))}}]),e}(a.Component),h=function(t){return{user:t.user}},f=function(t){return{logout:function(){t(Object(l.k)())}}};e.a=Object(u.b)(h,f)(p)},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),u=n.n(s),l=n(1),c=n(5),p=n(29),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.handleChange=function(e){t.setState(r({},e.target.name,e.target.value))},t.handleSubmit=function(e){e.preventDefault(),t.props.logInUser({email:t.state.email,password:t.state.password})},t.state={email:"",password:""},t}return a(e,t),h(e,[{key:"render",value:function(){return u.a.createElement("div",{className:"authForm",id:"loginPage"},u.a.createElement(p.a,{className:"authElement"}),u.a.createElement("form",{onSubmit:this.handleSubmit,className:"authElement"},u.a.createElement("div",null,u.a.createElement("label",{htmlFor:"email"},u.a.createElement("div",null,u.a.createElement("h3",null,"Email"))),u.a.createElement("div",null,u.a.createElement("input",{className:"form-control",name:"email",type:"text",onChange:this.handleChange}))),u.a.createElement("div",null,u.a.createElement("label",{htmlFor:"password"},u.a.createElement("div",null,u.a.createElement("h3",null,"Password"))),u.a.createElement("div",null,u.a.createElement("input",{className:"form-control",name:"password",type:"password",onChange:this.handleChange}))),u.a.createElement("div",{className:"authElement"},u.a.createElement("button",{className:"btn btn-primary",type:"submit",onClick:this.handleSubmit},"Log In"),this.props.user&&this.props.user.error&&u.a.createElement("span",null,"Wrong Username or Password"))))}}]),e}(u.a.Component),d=function(t){return{logInUser:function(e){return t(Object(c.a)(e))}}},m=function(t){return{user:t.user}};e.a=Object(l.b)(m,d)(f)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"render",value:function(){return s.a.createElement("div",{className:"container col-4"},s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("h4",{className:"text-center font-weight-normal"},"Welcome!"),s.a.createElement("br",null),s.a.createElement("h5",{className:"font-weight-normal"},"Indecisive helps you and your friends uncover new adventures based on your interests! Invite your friends, initiate an adventure and we will take care of the rest! ",s.a.createElement("br",null),s.a.createElement("br",null),"Based on a poll that everyone fills out about location and activity preferences, we will evaluate everyone's interest and suggest a few fun activities that everyone will like! "),s.a.createElement("br",null),s.a.createElement("div",{className:"card border-light align-items-center"},s.a.createElement("h5",{className:"card-header "},"Setting up your profile"),s.a.createElement("div",{className:"card-body"},s.a.createElement("p",{className:"card-text"},s.a.createElement("br",null),"1.  Select one of the awesome avatars ",s.a.createElement("br",null),"2.  Insert your phone number so you can be notified when you are invited on an adventure ",s.a.createElement("br",null),"3.  Your address, we will use it when we generate activities(you can always update!)  ",s.a.createElement("br",null),"4.  Invite your friends to sign up so you can plan adventures together! ",s.a.createElement("br",null)))),s.a.createElement("div",{className:" col-16 card border-light mb-3 align-items-center"},s.a.createElement("h5",{className:"card-header"},"Creating a pod with your friends"),s.a.createElement("div",{className:"card-body"},s.a.createElement("p",{className:"card-text"},s.a.createElement("br",null),"1.  Create a pod by giving your pod a name and selecting an image ",s.a.createElement("br",null),"2.  Search for your friends and add them to your pod, or invite them if they don't have an account ",s.a.createElement("br",null),"2.  Once you've added all of your friends to your pod, you can create an adventure! ",s.a.createElement("br",null)))),s.a.createElement("div",{className:"card border-light mb-3 align-items-center"},s.a.createElement("h5",{className:"card-header"},"Initiating an adventure for your pod"),s.a.createElement("div",{className:"card-body"},s.a.createElement("p",{className:"card-text"},s.a.createElement("br",null),"1.  Set up your adventure by selecting a date ",s.a.createElement("br",null),"2.  Fill out your own poll! ",s.a.createElement("br",null),"3.  Each pod member will receive text-message with a link to the poll ",s.a.createElement("br",null),"3.  Once all polls are completed, we will evaluate all preferences to generate 3 options",s.a.createElement("br",null)))),s.a.createElement("div",{className:"card border-light mb-3 align-items-center"},s.a.createElement("h5",{className:"card-header"},"Selecting final activity"),s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"}," "),s.a.createElement("p",{className:"card-text"},s.a.createElement("br",null),"1.  All pod members can review the suggested activities, and vote for the most appealing",s.a.createElement("br",null),"2.  Once a final activity is selected, you can save the date for your exciting adventure!"))))}}]),e}(s.a.Component);e.a=l},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),u=n.n(s),l=n(0),c=n.n(l),p=n(1),h=n(28),f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={notes:[]},t}return a(e,t),f(e,[{key:"componentDidMount",value:function(){function t(){return e.apply(this,arguments)}var e=r(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.getThisAdventure(this.props.id);case 2:return t.next=4,this.setState(this.props.adventure);case 4:console.log("this.props.adventure",this.props.adventure),console.log("this.state",this.state);case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"render",value:function(){var t=this.state.notes;return c.a.createElement("div",{id:"pinBoard"},t.map(function(t){return c.a.createElement("div",{id:"note",key:t.id},t.title,t.contents,t&&t.images&&t.images.map(function(t){return c.a.createElement("img",{src:t.uri,alt:"note-img",width:"100px",height:"100px"})}))}))}}]),e}(l.Component),m=function(t){return{adventure:t.adventure,notes:t.adventure.notes}},y=function(t){return{getThisAdventure:function(e){return t(Object(h.b)(e))}}};e.a=Object(p.b)(m,y)(d)},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),u=n.n(s),l=n(0),c=n.n(l),p=n(61),h=n(27),f=n(15),d=n(1),m=n(16),y=n(14),v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),g=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={date:"",time:"",podId:"",pollId:"",name:"",notes:[],userId:"",showMap:!1,locations:[]},t}return a(e,t),v(e,[{key:"componentDidMount",value:function(){function t(){return e.apply(this,arguments)}var e=r(u.a.mark(function t(){var e,n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.getPoll(this.props.match.params.id,this.props.userId);case 2:return t.next=4,this.props.fetch(this.props.match.params.id);case 4:return t.next=6,this.props.getAdventures(this.props.userId);case 6:e=this.props.activities,n=e.map(function(t){return{coords:t.address,title:t.name}}),this.setState({locations:n});case 9:case"end":return t.stop()}},t,this)}));return t}()},{key:"render",value:function(){if(this.props.activities.length)return c.a.createElement("div",{id:"adventure-page"},c.a.createElement("h3",null,"Adventure"),c.a.createElement("div",{id:"activities-container"},this.props.activities.map(function(t){return c.a.createElement(p.a,{activity:t,isCoord:!0,key:t.id})})),c.a.createElement("div",{id:"adventure-map-container"},this.state.locations.length&&c.a.createElement(m.g,{interactive:!1,coords:this.state.locations})),c.a.createElement("div",{id:"pinboard-container"},c.a.createElement(m.i,null)));if(Object.keys(this.props.poll).length){if(this.props.adventure){var t=this.props.adventure;return console.log("adventure",t),c.a.createElement("h1",null," ",t[0].counter+" out of "+t[0].totalCount+" of your polls are in"," ")}return c.a.createElement("div",{className:"page-body"},c.a.createElement("h1",null,"Loading"))}return c.a.createElement(m.l,{adventureId:this.props.match.params.id})}}]),e}(l.Component),_=function(t,e){var n=e.match;return{activities:t.activity,userId:t.user.id,poll:t.poll.poll,adventure:t.user.adventures&&t.user.adventures.filter(function(t){return t.id===+n.params.id})}},b=function(t){return{fetch:function(e){return t(Object(h.b)(e))},getPoll:function(e,n){return t(Object(f.b)(e,n))},getAdventures:function(e){return t(Object(y.f)(e))}}};e.a=Object(d.b)(_,b)(g)},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),u=n.n(s),l=n(0),c=n.n(l),p=n(62),h=n(1),f=n(5),d=n(11),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.onClick=function(e){e.preventDefault(),window.location="/pods/"+t.props.match.params.id+"/createAdventure"},t.state={adventures:[]},t}return a(e,t),m(e,[{key:"componentDidMount",value:function(){function t(){return e.apply(this,arguments)}var e=r(u.a.mark(function t(){var e,n=this;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.getAllUsersInPodThunk(this.props.match.params.id);case 2:return e=[],this.props.users.forEach(function(){var t=r(u.a.mark(function t(r){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=e.concat(r.adventures.filter(function(t){return t.podId===n.props.pod.id}));case 1:case"end":return t.stop()}},t,n)}));return function(e){return t.apply(this,arguments)}}()),t.next=6,this.setState({adventures:e});case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"render",value:function(){var t=this.state.adventures,e=t.filter(function(t){var e=new Date(t.date);return Date.parse(e)>=Date.now()}),n=t.filter(function(t){var e=new Date(t.date);return Date.parse(e)<Date.now()}),r=this.props.match.params.id;return this.props.users?c.a.createElement("div",{id:"single-pod"},c.a.createElement("div",{id:"pod-header"},c.a.createElement("ul",{id:"pod-header-contents"},c.a.createElement("li",null,c.a.createElement("h2",{className:"font-weight-normal"},this.props.pod.name)),c.a.createElement("li",null,c.a.createElement("button",{className:"btn btn-block btn-success",onClick:this.onClick},"Create An Adventure")))),c.a.createElement("div",{id:"pod-content"},c.a.createElement("div",{id:"pod-members"},c.a.createElement("h3",{className:"text-center"},"Members"),this.props.users.map(function(t){return c.a.createElement("div",{className:"col-sm-6",id:"user",key:t.id},c.a.createElement("h4",{className:"text-center font-weight-normal"},t.fullName),c.a.createElement("div",{className:"card-body"},c.a.createElement("img",{src:t.image,alt:"profile",className:"rounded mx-auto d-block",width:"30px",height:"30px"})))}),c.a.createElement("div",{id:"search-members",className:"text-center"},c.a.createElement(p.a,{podId:r}))),c.a.createElement("div",{id:"pod-adventures"},c.a.createElement("h3",{className:"text-center"},"Adventures"),c.a.createElement("h4",{className:"text-left"},"Upcoming:"),c.a.createElement("ul",null,e.map(function(t){return c.a.createElement("li",{key:t.id},c.a.createElement(d.a,{to:"/adventures/"+t.id},t.name))})),c.a.createElement("h4",{className:"text-left"},"Past:"),c.a.createElement("ul",null,n.map(function(t){return c.a.createElement("li",{key:t.id},c.a.createElement(d.a,{to:"/adventures/"+t.id},t.name))}))))):c.a.createElement("h1",null,"loading")}}]),e}(l.Component),v=function(t){return{pod:t.pod,users:t.pod.users}},g=function(t){return{getAllUsersInPodThunk:function(e){return t(Object(f.i)(e))}}};e.a=Object(h.b)(v,g)(y)},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),u=n.n(s),l=n(1),c=n(14),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.handleChange=function(e){t.setState(r({},e.target.name,e.target.value))},t.onClick=function(e){e.preventDefault(),console.log("here"),t.props.submit(Object.assign({},t.state,{podId:+t.props.match.params.id}))},t.state={name:"",date:""},t}return a(e,t),p(e,[{key:"render",value:function(){return this.props.user&&console.log("here",this.props.user),u.a.createElement("div",{className:"container"},u.a.createElement("br",null),u.a.createElement("form",{onSubmit:this.onClick,className:"input-group mb-2 mr-sm-2"},u.a.createElement("label",null,"Name:"),u.a.createElement("input",{className:"form-control mb-2 mr-sm-2",value:this.state.name,name:"name",onChange:this.handleChange}),u.a.createElement("label",null,"Date:"),u.a.createElement("input",{className:"form-control mb-2 mr-sm-2",type:"date",value:this.state.date,name:"date",onChange:this.handleChange}),u.a.createElement("br",null)),u.a.createElement("button",{type:"submit",className:"btn btn-secondary btn-lg btn-block",onClick:this.onClick},"Start your adventure!"))}}]),e}(s.Component),f=function(t,e){var n=e.history;return{submit:function(e){return t(Object(c.c)(e,n))}}};e.a=Object(l.b)(null,f)(h)},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),u=n.n(s),l=n(1),c=n(0),p=n.n(c),h=n(162),f=n.n(h),d=n(8),m=n.n(d),y=n(15),v=n(4),g=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();f.a.accessToken=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_MAPBOXGL_ACCESS_TOKEN;var _=v.b?"http://localhost:3001":"https://obscure-lowlands-38066.herokuapp.com",b=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={coords:t.coords,zoom:14.5,interactive:t.interactive},n.createInteractiveMap=n.createInteractiveMap.bind(n),n.createMultiPointMap=n.createMultiPointMap.bind(n),n.createSinglePointMap=n.createSinglePointMap.bind(n),n.getGeocode=n.getGeocode.bind(n),n.getAddress=n.getAddress.bind(n),n}return a(e,t),g(e,[{key:"componentDidMount",value:function(){this.state.interactive?this.createInteractiveMap():this.state.coords.length>1?this.createMultiPointMap():this.createSinglePointMap()}},{key:"createInteractiveMap",value:function(){function t(){return e.apply(this,arguments)}var e=r(u.a.mark(function t(){var e,n,i,o,a=this;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getGeocode(this.state.coords);case 2:return e=t.sent,n=[e.longitude,e.latitude],t.next=6,this.setState({coords:n});case 6:i={container:this.mapContainer,style:"mapbox://styles/mapbox/streets-v10",center:n,zoom:this.state.zoom},this.map=new f.a.Map(i),o=(new f.a.Marker).setLngLat(n).addTo(this.map),this.map.on("move",r(u.a.mark(function t(){var e,n,r,i,s;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.map.getCenter(),n=e.lng,r=e.lat,i=a.map.getZoom().toFixed(2),s=[n.toFixed(4),r.toFixed(4)],o.setLngLat(s),t.next=6,a.setState({coords:s,zoom:i});case 6:case"end":return t.stop()}},t,a)}))),this.map.on("mouseup",r(u.a.mark(function t(){var e;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.getAddress(a.state.coords);case 2:return e=t.sent,t.next=5,a.props.setLoc(e);case 5:case"end":return t.stop()}},t,a)})));case 11:case"end":return t.stop()}},t,this)}));return t}()},{key:"createMultiPointMap",value:function(){function t(){return e.apply(this,arguments)}var e=r(u.a.mark(function t(){var e,n,i,o,a,s,l,c,p,h,d,m,y,v,g,_,b,x=this;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.state.coords.map(function(){var t=r(u.a.mark(function t(e){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.getGeocode(e.coords);case 2:return n=t.sent,t.abrupt("return",{coords:[n.longitude,n.latitude],title:e.title});case 4:case"end":return t.stop()}},t,x)}));return function(e){return t.apply(this,arguments)}}()),t.next=3,Promise.all(e);case 3:for(n=t.sent,i=n.map(function(t){return Number(t.coords[0])}),o=n.map(function(t){return Number(t.coords[1])}),a=i[0],s=o[0],l=o[0],c=i[0],p=0;p<i.length;p++)i[p]>a&&(a=i[p]),i[p]<c&&(c=i[p]),o[p]>s&&(s=o[p]),o[p]<l&&(l=o[p]);for(h=(c+a)/2,d=(l+s)/2,m=[h,d],y={container:this.mapContainer,style:"mapbox://styles/mapbox/streets-v10",center:m,zoom:this.state.zoom},this.map=new f.a.Map(y),v=0;v<n.length;v++)g=n[v].title,_=new f.a.Popup({offset:[0,-15]}).setLngLat(n[v].coords).setHTML("<p>"+g+"</p>").setLngLat(n[v].coords),b=(new f.a.Marker).setLngLat(n[v].coords).addTo(this.map).setPopup(_);this.map.fitBounds([[c-.005,l-.005],[a+.005,s+.005]]);case 18:case"end":return t.stop()}},t,this)}));return t}()},{key:"createSinglePointMap",value:function(){function t(){return e.apply(this,arguments)}var e=r(u.a.mark(function t(){var e,n,r,i,o,a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getGeocode(this.state.coords.coords);case 2:e=t.sent,n=[e.longitude,e.latitude],r=this.state.coords.title,i={container:this.mapContainer,style:"mapbox://styles/mapbox/streets-v10",center:n,zoom:this.state.zoom},this.map=new f.a.Map(i),o=new f.a.Popup({offset:[0,-15]}).setLngLat(n).setHTML("<p>"+r+"</p>").setLngLat(n),a=(new f.a.Marker).setLngLat(n).addTo(this.map).setPopup(o);case 9:case"end":return t.stop()}},t,this)}));return t}()},{key:"getGeocode",value:function(){function t(t){return e.apply(this,arguments)}var e=r(u.a.mark(function t(e){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.post(_+"/api/geoLoc/geocode",e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"getAddress",value:function(){function t(t){return e.apply(this,arguments)}var e=r(u.a.mark(function t(e){var n,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.post(_+"/api/geoLoc/address",e);case 2:return n=t.sent,r=n.address,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"render",value:function(){var t=this,e={position:"absolute",top:0,bottom:0,width:"100%",height:"300px"};return p.a.createElement("div",{id:"mapbox-map",style:e,ref:function(e){return t.mapContainer=e}})}}]),e}(c.Component),x=function(t){return{setLoc:function(e){return t(Object(y.c)(e))}}};e.a=Object(l.b)(null,x)(b)},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t,i){if(e)if(n){var o="var sharedChunk = {}; ("+e+")(sharedChunk); ("+n+")(sharedChunk);",a={};e(a),r=i(a),r.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))}else n=i;else e=i}var e,n,r;return t(["exports"],function(t){function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t,e){return t(e={exports:{}},e.exports),e.exports}function r(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}function i(t,e){this.x=t,this.y=e}function o(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!o(t[n],e[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(!o(t[r],e[r]))return!1;return!0}return t===e}function a(t,e,n,r){var i=new rr(t,e,n,r);return function(t){return i.solve(t)}}function s(t,e,n){return Math.min(n,Math.max(e,t))}function u(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}function l(){return sr++}function c(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function p(t,e){return-1!==t.indexOf(e,t.length-e.length)}function h(t,e,n){var r={};for(var i in t)r[i]=e.call(n||this,t[i],i,t);return r}function f(t,e,n){var r={};for(var i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function d(t){return Array.isArray(t)?t.map(d):"object"==typeof t&&t?h(t,d):t}function m(t){ur[t]||("undefined"!=typeof console&&console.warn(t),ur[t]=!0)}function y(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function v(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)o=t[n],e+=((a=t[i]).x-o.x)*(o.y+a.y);return e}function g(t){var e=new self.XMLHttpRequest;for(var n in e.open("GET",t.url,!0),t.headers)e.setRequestHeader(n,t.headers[n]);return e.withCredentials="include"===t.credentials,e}function _(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function b(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}function x(t){var e=t.key,n=t.value;return n?[new yr(e,n,"constants have been deprecated as of v8")]:[]}function w(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}function E(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function S(t){return Array.isArray(t)?t.map(S):E(t)}function T(t,e){return{kind:"array",itemType:t,N:e}}function k(t){if("array"===t.kind){var e=k(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}function C(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&!C(t.itemType,e.itemType)&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,r=Cr;n<r.length;n+=1)if(!C(r[n],e))return null}return"Expected "+k(t)+" but found "+k(e)+" instead."}function P(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function A(t){if(null===t)return _r;if("string"==typeof t)return xr;if("boolean"==typeof t)return wr;if("number"==typeof t)return br;if(t instanceof Ar)return Er;if(t instanceof Or)return kr;if(Array.isArray(t)){for(var e,n=t.length,r=0,i=t;r<i.length;r+=1){var o=A(i[r]);if(e){if(e===o)continue;e=Tr;break}e=o}return T(e||Tr,n)}return Sr}function O(t){if(t instanceof Vr){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild(function(t){e&&!O(t)&&(e=!1)}),e}function I(t){if(t instanceof Vr&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!I(t)&&(e=!1)}),e}function M(t,e){if(t instanceof Vr&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild(function(t){n&&!M(t,e)&&(n=!1)}),n}function z(t,e){for(var n,r,i=0,o=t.length-1,a=0;i<=o;){if(n=t[a=Math.floor((i+o)/2)],r=t[a+1],e===n||e>n&&e<r)return a;if(n<e)i=a+1;else{if(!(n>e))throw new zr("Input is not a number.");o=a-1}}return Math.max(a-1,0)}function R(t,e,n){return t*(1-n)+e*n}function L(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}function D(t){return"string"===t.kind||"number"===t.kind||"boolean"===t.kind||"null"===t.kind}function B(t,e){return function(){function n(t,e,n){this.type=wr,this.lhs=t,this.rhs=e,this.collator=n}return n.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var r=e.parse(t[1],1,Tr);if(!r)return null;var i=e.parse(t[2],2,Tr);if(!i)return null;if(!D(r.type)&&!D(i.type))return e.error("Expected at least one argument to be a string, number, boolean, or null, but found ("+k(r.type)+", "+k(i.type)+") instead.");if(r.type.kind!==i.type.kind&&"value"!==r.type.kind&&"value"!==i.type.kind)return e.error("Cannot compare "+k(r.type)+" and "+k(i.type)+".");var o=null;if(4===t.length){if("string"!==r.type.kind&&"string"!==i.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(o=e.parse(t[3],3,kr)))return null}return new n(r,i,o)},n.prototype.evaluate=function(t){var n=this.collator?0===this.collator.evaluate(t).compare(this.lhs.evaluate(t),this.rhs.evaluate(t)):this.lhs.evaluate(t)===this.rhs.evaluate(t);return e?!n:n},n.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},n.prototype.possibleOutputs=function(){return[!0,!1]},n.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},n}()}function j(t,e){var n=e[0],r=e[1],i=e[2],o=e[3];n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);var a=o?o.evaluate(t):1,s=P(n,r,i,a);if(s)throw new zr(s);return new Ar(n/255*a,r/255*a,i/255*a,a)}function F(t,e){return t in e}function N(t,e){var n=e[t];return void 0===n?null:n}function U(t,e){var n=e[0],r=e[1];return n.evaluate(t)<r.evaluate(t)}function V(t,e){var n=e[0],r=e[1];return n.evaluate(t)>r.evaluate(t)}function q(t,e){var n=e[0],r=e[1];return n.evaluate(t)<=r.evaluate(t)}function $(t,e){var n=e[0],r=e[1];return n.evaluate(t)>=r.evaluate(t)}function G(t){return{type:t}}function Z(t){return{result:"success",value:t}}function W(t){return{result:"error",value:t}}function H(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function X(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function K(t){return!!t.expression&&t.expression.interpolated}function Y(t){return t>li?Math.pow(t,1/3):t/ui+ai}function J(t){return t>si?t*t*t:ui*(t-ai)}function Q(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function tt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function et(t){var e=tt(t.r),n=tt(t.g),r=tt(t.b),i=Y((.4124564*e+.3575761*n+.1804375*r)/ri),o=Y((.2126729*e+.7151522*n+.072175*r)/ii);return{l:116*o-16,a:500*(i-o),b:200*(o-Y((.0193339*e+.119192*n+.9503041*r)/oi)),alpha:t.a}}function nt(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=ii*J(e),n=ri*J(n),r=oi*J(r),new Ar(Q(3.2404542*n-1.5371385*e-.4985314*r),Q(-.969266*n+1.8760108*e+.041556*r),Q(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function rt(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function it(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function ot(t){return t}function at(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function st(t,e,n,r,i){return at(typeof n===i?r[n]:void 0,t.default,e.default)}function ut(t,e,n){if("number"!==rt(n))return at(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=pt(t.stops,n);return t.stops[i][1]}function lt(t,e,n){var r=void 0!==t.base?t.base:1;if("number"!==rt(n))return at(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o=pt(t.stops,n),a=function(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1],l=Zr[e.type]||ot;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=di[t.colorSpace];l=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=s.evaluate.apply(void 0,t),r=u.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==r)return l(n,r,a)}}:l(s,u,a)}function ct(t,e,n){return"color"===e.type?n=Ar.parse(n):rt(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),at(n,t.default,e.default)}function pt(t,e){for(var n,r,i=0,o=t.length-1,a=0;i<=o;){if(n=t[a=Math.floor((i+o)/2)][0],r=t[a+1][0],e===n||e>n&&e<r)return a;n<e?i=a+1:n>e&&(o=a-1)}return Math.max(a-1,0)}function ht(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in ni}function ft(t,e){var n=new $r(ni,[],function(t){var e={color:Er,string:xr,number:br,enum:xr,boolean:wr};return"array"===t.type?T(e[t.value]||Tr,t.length):e[t.type]||null}(e)),r=n.parse(t);return r?Z(new mi(r,e)):W(n.errors)}function dt(t,e){if("error"===(t=ft(t,e)).result)return t;var n=t.value.expression,r=O(n);if(!r&&!H(e))return W([new vr("","data expressions not supported")]);var i=M(n,["zoom"]);if(!i&&!X(e))return W([new vr("","zoom expressions not supported")]);var o=function t(e){var n=null;if(e instanceof Xr)n=t(e.result);else if(e instanceof Hr)for(var r=0,i=e.args;r<i.length;r+=1){var o=i[r];if(n=t(o))break}else(e instanceof Gr||e instanceof Wr)&&e.input instanceof Vr&&"zoom"===e.input.name&&(n=e);return n instanceof vr?n:(e.eachChild(function(e){var r=t(e);r instanceof vr?n=r:!n&&r?n=new vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new vr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n)}(n);return o||i?o instanceof vr?W([o]):o instanceof Wr&&!K(e)?W([new vr("",'"interpolate" expressions cannot be used with this property')]):Z(o?new vi(r?"camera":"composite",t.value,o):new yi(r?"constant":"source",t.value)):W([new vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function mt(t,e){if(it(t))return new gi(t,e);if(ht(t)){var n=dt(t,e);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return n.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=Ar.parse(t)),{kind:"constant",evaluate:function(){return r}}}function yt(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],u=rt(n);if("object"!==u)return[new yr(e,n,"object expected, "+u+" found")];for(var l in n){var c=l.split(".")[0],p=r[c]||r["*"],h=void 0;if(i[c])h=i[c];else if(r[c])h=jt;else if(i["*"])h=i["*"];else{if(!r["*"]){s.push(new yr(e,n[l],'unknown property "'+l+'"'));continue}h=jt}s=s.concat(h({key:(e?e+".":e)+l,value:n[l],valueSpec:p,style:o,styleSpec:a,object:n,objectKey:l},n))}for(var f in r)i[f]||r[f].required&&void 0===r[f].default&&void 0===n[f]&&s.push(new yr(e,n,'missing required property "'+f+'"'));return s}function vt(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||jt;if("array"!==rt(e))return[new yr(o,e,"array expected, "+rt(e)+" found")];if(n.length&&e.length!==n.length)return[new yr(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new yr(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value};i.$version<7&&(s.function=n.function),"object"===rt(n.value)&&(s=n.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(a({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:r,styleSpec:i,key:o+"["+l+"]"}));return u}function gt(t){var e=t.key,n=t.value,r=t.valueSpec,i=rt(n);return"number"!==i?[new yr(e,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new yr(e,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new yr(e,n,n+" is greater than the maximum value "+r.maximum)]:[]}function _t(t){function e(t){var e=[],r=t.value,s=t.key;if("array"!==rt(r))return[new yr(s,r,"array expected, "+rt(r)+" found")];if(2!==r.length)return[new yr(s,r,"array length 2 expected, length "+r.length+" found")];if(p){if("object"!==rt(r[0]))return[new yr(s,r,"object expected, "+rt(r[0])+" found")];if(void 0===r[0].zoom)return[new yr(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new yr(s,r,"object stop key must have value")];if(o&&o>E(r[0].zoom))return[new yr(s,r[0].zoom,"stop zoom values must appear in ascending order")];E(r[0].zoom)!==o&&(o=E(r[0].zoom),i=void 0,u={}),e=e.concat(yt({key:s+"[0]",value:r[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:gt,value:n}}))}else e=e.concat(n({key:s+"[0]",value:r[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},r));return e.concat(jt({key:s+"[1]",value:r[1],valueSpec:a,style:t.style,styleSpec:t.styleSpec}))}function n(t,e){var n=rt(t.value),o=E(t.value),l=null!==t.value?t.value:e;if(r){if(n!==r)return[new yr(t.key,l,n+" stop domain type must match previous stop domain type "+r)]}else r=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new yr(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==n&&"categorical"!==s){var c="number expected, "+n+" found";return H(a)&&void 0===s&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new yr(t.key,l,c)]}return"categorical"!==s||"number"!==n||isFinite(o)&&Math.floor(o)===o?"categorical"!==s&&"number"===n&&void 0!==i&&o<i?[new yr(t.key,l,"stop domain values must appear in ascending order")]:(i=o,"categorical"===s&&o in u?[new yr(t.key,l,"stop domain values must be unique")]:(u[o]=!0,[])):[new yr(t.key,l,"integer expected, found "+o)]}var r,i,o,a=t.valueSpec,s=E(t.value.type),u={},l="categorical"!==s&&void 0===t.value.property,c=!l,p="array"===rt(t.value.stops)&&"array"===rt(t.value.stops[0])&&"object"===rt(t.value.stops[0][0]),h=yt({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===s)return[new yr(t.key,t.value,'identity function may not have a "stops" property')];var n=[],r=t.value;return n=n.concat(vt({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:e})),"array"===rt(r)&&0===r.length&&n.push(new yr(t.key,r,"array must have at least one stop")),n},default:function(t){return jt({key:t.key,value:t.value,valueSpec:a,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===s&&l&&h.push(new yr(t.key,t.value,'missing required property "property"')),"identity"===s||t.value.stops||h.push(new yr(t.key,t.value,'missing required property "stops"')),"exponential"===s&&t.valueSpec.expression&&!K(t.valueSpec)&&h.push(new yr(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(c&&!H(t.valueSpec)?h.push(new yr(t.key,t.value,"property functions not supported")):l&&!X(t.valueSpec)&&h.push(new yr(t.key,t.value,"zoom functions not supported"))),"categorical"!==s&&!p||void 0!==t.value.property||h.push(new yr(t.key,t.value,'"property" property is required')),h}function bt(t){var e=("property"===t.expressionContext?dt:ft)(S(t.value),t.valueSpec);return"error"===e.result?e.value.map(function(e){return new yr(""+t.key+e.key,t.value,e.message)}):"property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==e.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new yr(t.key,t.value,'Invalid data expression for "text-font". Output values must be contained as literals within the expression.')]:"property"!==t.expressionContext||"layout"!==t.propertyType||I(e.value._styleExpression.expression)?[]:[new yr(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')]}function xt(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(E(n))&&i.push(new yr(e,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(E(n))&&i.push(new yr(e,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function wt(t){if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var r=n[e];if(!wt(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}function Et(t){if(!t)return function(){return!0};wt(t)||(t=Tt(t));var e=ft(t,_i);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,n){return e.value.evaluate(t,n)}}function St(t,e){return t<e?-1:t>e?1:0}function Tt(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?kt(t[1],t[2],"=="):"!="===n?At(kt(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?kt(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(Tt))):"all"===n?["all"].concat(t.slice(1).map(Tt)):"none"===n?["all"].concat(t.slice(1).map(Tt).map(At)):"in"===n?Ct(t[1],t.slice(2)):"!in"===n?At(Ct(t[1],t.slice(2))):"has"===n?Pt(t[1]):"!has"!==n||At(Pt(t[1]))}function kt(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function Ct(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(St)]]:["filter-in-small",t,["literal",e]]}}function Pt(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function At(t){return["!",t]}function Ot(t){return wt(S(t.value))?bt(w({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,r=e.key;if("array"!==rt(n))return[new yr(r,n,"array expected, "+rt(n)+" found")];var i,o=e.styleSpec,a=[];if(n.length<1)return[new yr(r,n,"filter array must have at least 1 element")];switch(a=a.concat(xt({key:r+"[0]",value:n[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),E(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===E(n[1])&&a.push(new yr(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new yr(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(i=rt(n[1]))&&a.push(new yr(r+"[1]",n[1],"string expected, "+i+" found"));for(var s=2;s<n.length;s++)i=rt(n[s]),"$type"===E(n[1])?a=a.concat(xt({key:r+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new yr(r+"["+s+"]",n[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var u=1;u<n.length;u++)a=a.concat(t({key:r+"["+u+"]",value:n[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=rt(n[1]),2!==n.length?a.push(new yr(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new yr(r+"[1]",n[1],"string expected, "+i+" found"))}return a}(t)}function It(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return jt({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var l,c=t.valueSpec||s[a];if(!c)return[new yr(n,o,'unknown property "'+a+'"')];if("string"===rt(o)&&H(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new yr(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var p=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&p.push(new yr(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&it(S(o))&&"identity"===E(o.type)&&p.push(new yr(n,o,'"text-font" does not support identity functions'))),p.concat(jt({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function Mt(t){return It(t,"paint")}function zt(t){return It(t,"layout")}function Rt(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new yr(r,n,'either "type" or "ref" is required'));var a,s=E(n.type),u=E(n.ref);if(n.id)for(var l=E(n.id),c=0;c<t.arrayIndex;c++){var p=i.layers[c];E(p.id)===l&&e.push(new yr(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+p.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new yr(r,n[t],'"'+t+'" is prohibited for ref layers'))}),i.layers.forEach(function(t){E(t.id)===u&&(a=t)}),a?a.ref?e.push(new yr(r,n.ref,"ref cannot reference another ref layer")):s=E(a.type):e.push(new yr(r,n.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(n.source){var h=i.sources&&i.sources[n.source],f=h&&E(h.type);h?"vector"===f&&"raster"===s?e.push(new yr(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new yr(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==f||n["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new yr(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===f&&h.lineMetrics||e.push(new yr(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new yr(r,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new yr(r,n.source,'source "'+n.source+'" not found'))}else e.push(new yr(r,n,'missing required property "source"'));return e=e.concat(yt({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return jt({key:r+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:Ot,layout:function(t){return yt({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return zt(w({layerType:s},t))}}})},paint:function(t){return yt({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Mt(w({layerType:s},t))}}})}}}))}function Lt(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new yr(n,e,'"type" is required')];var o=E(e.type),a=[];switch(o){case"vector":case"raster":case"raster-dem":if(a=a.concat(yt({key:n,value:e,valueSpec:r["source_"+o.replace("-","_")],style:t.style,styleSpec:r})),"url"in e)for(var s in e)["type","url","tileSize"].indexOf(s)<0&&a.push(new yr(n+"."+s,e[s],'a source with a "url" property may not include a "'+s+'" property'));return a;case"geojson":return yt({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r});case"video":return yt({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return yt({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return a.push(new yr(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")),a;default:return xt({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function Dt(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],a=rt(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new yr("light",e,"object expected, "+a+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);o=u&&r[u[1]]&&r[u[1]].transition?o.concat(jt({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n})):r[s]?o.concat(jt({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n})):o.concat([new yr(s,e[s],'unknown property "'+s+'"')])}return o}function Bt(t){var e=t.value,n=t.key,r=rt(e);return"string"!==r?[new yr(n,e,"string expected, "+r+" found")]:[]}function jt(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&it(E(e))?_t(t):n.expression&&ht(S(e))?bt(t):n.type&&bi[n.type]?bi[n.type](t):yt(w({},t,{valueSpec:n.type?r[n.type]:n}))}function Ft(t){var e=t.value,n=t.key,r=Bt(t);return r.length?r:(-1===e.indexOf("{fontstack}")&&r.push(new yr(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new yr(n,e,'"glyphs" url must include a "{range}" token')),r)}function Nt(t,e){e=e||mr;var n=[];return n=n.concat(jt({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Ft,"*":function(){return[]}}})),t.constants&&(n=n.concat(x({key:"constants",value:t.constants,style:t,styleSpec:e}))),Ut(n)}function Ut(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function Vt(t){return function(){return Ut(t.apply(this,arguments))}}function qt(t,e){var n=!1;if(e&&e.length)for(var r=0,i=e;r<i.length;r+=1){var o=i[r];t.fire(new fr(new Error(o.message))),n=!0}return n}function $t(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],e=i[1],n=i[2],this.d=e+2*n;for(var o=0;o<this.d*this.d;o++){var a=i[ki+o],s=i[ki+o+1];r.push(a===s?null:i.subarray(a,s))}var u=i[ki+r.length],l=i[ki+r.length+1];this.keys=i.subarray(u,l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var p=n/e*t;this.min=-p,this.max=t+p}function Gt(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Pi[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}function Zt(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof Ci)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],i=0,o=t;i<o.length;i+=1){var a=o[i];r.push(Zt(a,e))}return r}if("object"==typeof t){var s=t.constructor,u=s._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var l={};if(s.serialize)l._serialized=s.serialize(t,e);else{for(var c in t)if(t.hasOwnProperty(c)&&!(Pi[u].omit.indexOf(c)>=0)){var p=t[c];l[c]=Pi[u].shallow.indexOf(c)>=0?p:Zt(p,e)}t instanceof Error&&(l.message=t.message)}return{name:u,properties:l}}throw new Error("can't serialize object of type "+typeof t)}function Wt(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof Ci)return t;if(Array.isArray(t))return t.map(function(t){return Wt(t)});if("object"==typeof t){var e=t,n=e.name,r=e.properties;if(!n)throw new Error("can't deserialize object of anonymous class");var i=Pi[n].klass;if(!i)throw new Error("can't deserialize unregistered class "+n);if(i.deserialize)return i.deserialize(r._serialized);for(var o=Object.create(i.prototype),a=0,s=Object.keys(r);a<s.length;a+=1){var u=s[a];o[u]=Pi[n].shallow.indexOf(u)>=0?r[u]:Wt(r[u])}return o}throw new Error("can't deserialize object of type "+typeof t)}function Ht(t){for(var e=0,n=t;e<n.length;e+=1)if(Kt(n[e].charCodeAt(0)))return!0;return!1}function Xt(t){return!Mi.Arabic(t)&&!Mi["Arabic Supplement"](t)&&!Mi["Arabic Extended-A"](t)&&!Mi["Arabic Presentation Forms-A"](t)&&!Mi["Arabic Presentation Forms-B"](t)}function Kt(t){return 746===t||747===t||!(t<4352)&&(!!Mi["Bopomofo Extended"](t)||!!Mi.Bopomofo(t)||!(!Mi["CJK Compatibility Forms"](t)||t>=65097&&t<=65103)||!!Mi["CJK Compatibility Ideographs"](t)||!!Mi["CJK Compatibility"](t)||!!Mi["CJK Radicals Supplement"](t)||!!Mi["CJK Strokes"](t)||!(!Mi["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||!!Mi["CJK Unified Ideographs Extension A"](t)||!!Mi["CJK Unified Ideographs"](t)||!!Mi["Enclosed CJK Letters and Months"](t)||!!Mi["Hangul Compatibility Jamo"](t)||!!Mi["Hangul Jamo Extended-A"](t)||!!Mi["Hangul Jamo Extended-B"](t)||!!Mi["Hangul Jamo"](t)||!!Mi["Hangul Syllables"](t)||!!Mi.Hiragana(t)||!!Mi["Ideographic Description Characters"](t)||!!Mi.Kanbun(t)||!!Mi["Kangxi Radicals"](t)||!!Mi["Katakana Phonetic Extensions"](t)||!(!Mi.Katakana(t)||12540===t)||!(!Mi["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Mi["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||!!Mi["Unified Canadian Aboriginal Syllabics"](t)||!!Mi["Unified Canadian Aboriginal Syllabics Extended"](t)||!!Mi["Vertical Forms"](t)||!!Mi["Yijing Hexagram Symbols"](t)||!!Mi["Yi Syllables"](t)||!!Mi["Yi Radicals"](t))}function Yt(t){return!(Kt(t)||function(t){return!!(Mi["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Mi["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Mi["Letterlike Symbols"](t)||Mi["Number Forms"](t)||Mi["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Mi["Control Pictures"](t)&&9251!==t||Mi["Optical Character Recognition"](t)||Mi["Enclosed Alphanumerics"](t)||Mi["Geometric Shapes"](t)||Mi["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Mi["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Mi["CJK Symbols and Punctuation"](t)||Mi.Katakana(t)||Mi["Private Use Area"](t)||Mi["CJK Compatibility Forms"](t)||Mi["Small Form Variants"](t)||Mi["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Jt(t,e){return!(!e&&(t>=1424&&t<=2303||Mi["Arabic Presentation Forms-A"](t)||Mi["Arabic Presentation Forms-B"](t)))&&!(t>=2304&&t<=3583||t>=3840&&t<=4255||Mi.Khmer(t))}function Qt(t,e){void 0===e&&(e=1);var n=0,r=0;return{members:t.map(function(t){var i,o=(i=t.type,Qi[i].BYTES_PER_ELEMENT),a=n=te(n,Math.max(e,o)),s=t.components||1;return r=Math.max(r,o),n+=o*s,{name:t.name,type:t.type,components:s,offset:a}}),size:te(n,Math.max(r,e)),alignment:e}}function te(t,e){return Math.ceil(t/e)*e}function ee(t){return[zo(255*t.r,255*t.g),zo(255*t.b,255*t.a)]}function ne(t,e){return{"text-opacity":"opacity","icon-opacity":"opacity","text-color":"fill_color","icon-color":"fill_color","text-halo-color":"halo_color","icon-halo-color":"halo_color","text-halo-blur":"halo_blur","icon-halo-blur":"halo_blur","text-halo-width":"halo_width","icon-halo-width":"halo_width","line-gap-width":"gapwidth"}[t]||t.replace(e+"-","").replace(/-/g,"_")}function re(t){for(var e=No/t.extent,n=t.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.length;o++){var a=i[o];a.x=Math.round(a.x*e),a.y=Math.round(a.y*e),(a.x<Uo.min||a.x>Uo.max||a.y<Uo.min||a.y>Uo.max)&&m("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function ie(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}function oe(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(de(i,e))return!0;if(pe(e,i,n))return!0}return!1}function ae(t,e){if(1===t.length&&1===t[0].length)return fe(e,t[0][0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if(fe(t,r[i]))return!0;for(var o=0;o<t.length;o++){for(var a=t[o],s=0;s<a.length;s++)if(fe(e,a[s]))return!0;for(var u=0;u<e.length;u++)if(le(a,e[u]))return!0}return!1}function se(t,e,n){for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<t.length;o++){var a=t[o];if(a.length>=3)for(var s=0;s<i.length;s++)if(de(a,i[s]))return!0;if(ue(a,i,n))return!0}return!1}function ue(t,e,n){if(t.length>1){if(le(t,e))return!0;for(var r=0;r<e.length;r++)if(pe(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(pe(t[i],e,n))return!0;return!1}function le(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],o=0;o<e.length-1;o++)if(ce(r,i,e[o],e[o+1]))return!0;return!1}function ce(t,e,n,r){return y(t,n,r)!==y(e,n,r)&&y(t,e,n)!==y(t,e,r)}function pe(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(he(t,e[i-1],e[i])<r)return!0;return!1}function he(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return i<0?t.distSqr(e):i>1?t.distSqr(n):t.distSqr(n.sub(e)._mult(i)._add(e))}function fe(t,e){for(var n,r,i,o=!1,a=0;a<t.length;a++)for(var s=0,u=(n=t[a]).length-1;s<n.length;u=s++)r=n[s],i=n[u],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function de(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function me(t,e,n){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).binders[t].statistics.max}function ye(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ve(t,e,n,r,i){if(!e[0]&&!e[1])return t;var o=or.convert(e);"viewport"===n&&o._rotate(-r);for(var a=[],s=0;s<t.length;s++){for(var u=t[s],l=[],c=0;c<u.length;c++)l.push(u[c].sub(o._mult(i)));a.push(l)}return a}function ge(){var t=new $o(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function _e(){var t=new $o(3);return t[0]=0,t[1]=0,t[2]=0,t}function be(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function xe(t,e,n){var r=new $o(3);return r[0]=t,r[1]=e,r[2]=n,r}function we(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function Ee(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Se(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function Te(){var t=new $o(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function ke(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a),t}function Ce(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function Pe(){var t=new $o(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Ae(t,e,n){var r=Ce([],[t.x,t.y,0,1],e);return new or((r[0]/r[3]+1)*n.width*.5,(r[1]/r[3]+1)*n.height*.5)}function Oe(t,e,n,r){var i=e.width,o=e.height;if(r){if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function Ie(t,e,n){var r=e.width,i=e.height;if(r!==t.width||i!==t.height){var o=Oe({},{width:r,height:i},n);Me(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=o.data}}function Me(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<i.height;u++)for(var l=((n.y+u)*t.width+n.x)*o,c=((r.y+u)*e.width+r.x)*o,p=0;p<i.width*o;p++)s[c+p]=a[l+p];return e}function ze(t,e){for(var n=new Uint8Array(1024),r={},i=0,o=0;i<256;i++,o+=4){r[e]=i/255;var a=t.evaluate(r);n[o+0]=Math.floor(255*a.r/a.a),n[o+1]=Math.floor(255*a.g/a.a),n[o+2]=Math.floor(255*a.b/a.a),n[o+3]=Math.floor(255*a.a)}return new Jo({width:256,height:1},n)}function Re(t,e,n){n=n||2;var r,i,o,a,s,u,l,c=e&&e.length,p=c?e[0]*n:t.length,h=Le(t,0,p,n,!0),f=[];if(!h)return f;if(c&&(h=function(t,e,n,r){var i,o,a,s,u,l=[];for(i=0,o=e.length;i<o;i++)a=e[i]*r,s=i<o-1?e[i+1]*r:t.length,(u=Le(t,a,s,r,!1))===u.next&&(u.steiner=!0),l.push(Ge(u));for(l.sort(Ve),i=0;i<l.length;i++)qe(l[i],n),n=De(n,n.next);return n}(t,e,h,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<p;d+=n)(s=t[d])<r&&(r=s),(u=t[d+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return Be(h,f,n,r,i,l),f}function Le(t,e,n,r,i){var o,a;if(i===nn(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Qe(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Qe(o,t[o],t[o+1],a);return a&&Xe(a,a.next)&&(tn(a),a=a.next),a}function De(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Xe(r,r.next)&&0!==He(r.prev,r,r.next))r=r.next;else{if(tn(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Be(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=$e(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?Fe(t,r,i,o):je(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),tn(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?Be(t=Ne(t,e,n),e,n,r,i,o,2):2===a&&Ue(t,e,n,r,i,o):Be(De(t),e,n,r,i,o,1);break}}}function je(t){var e=t.prev,n=t,r=t.next;if(He(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Ze(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&He(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Fe(t,e,n,r){var i=t.prev,o=t,a=t.next;if(He(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,p=$e(s,u,e,n,r),h=$e(l,c,e,n,r),f=t.prevZ,d=t.nextZ;f&&f.z>=p&&d&&d.z<=h;){if(f!==t.prev&&f!==t.next&&Ze(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&He(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,d!==t.prev&&d!==t.next&&Ze(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&He(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;f&&f.z>=p;){if(f!==t.prev&&f!==t.next&&Ze(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&He(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;d&&d.z<=h;){if(d!==t.prev&&d!==t.next&&Ze(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&He(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Ne(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Xe(i,o)&&Ke(i,r,r.next,o)&&Ye(i,o)&&Ye(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),tn(r),tn(r.next),r=t=o),r=r.next}while(r!==t);return r}function Ue(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&We(a,s)){var u=Je(a,s);return a=De(a,a.next),u=De(u,u.next),Be(a,e,n,r,i,o),void Be(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function Ve(t,e){return t.x-e.x}function qe(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,p=n.y,h=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&Ze(o<p?i:a,o,c,p,o<p?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<h||u===h&&r.x>n.x)&&Ye(r,t)&&(n=r,h=u),r=r.next;return n}(t,e)){var n=Je(e,t);De(n,n.next)}}function $e(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ge(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function Ze(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function We(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Ke(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Ye(t,e)&&Ye(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function He(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Xe(t,e){return t.x===e.x&&t.y===e.y}function Ke(t,e,n,r){return!!(Xe(t,e)&&Xe(n,r)||Xe(t,r)&&Xe(n,e))||He(t,e,n)>0!=He(t,e,r)>0&&He(n,r,t)>0!=He(n,r,e)>0}function Ye(t,e){return He(t.prev,t,t.next)<0?He(t,e,t.next)>=0&&He(t,t.prev,e)>=0:He(t,e,t.prev)<0||He(t,t.next,e)<0}function Je(t,e){var n=new en(t.i,t.x,t.y),r=new en(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Qe(t,e,n,r){var i=new en(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function tn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function en(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function nn(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function rn(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*l/a+c)),Math.min(i,Math.floor(n+(a-s)*l/a+c)),o)}var p=e[n],h=r,f=i;for(on(e,r,n),o(e[i],p)>0&&on(e,r,i);h<f;){for(on(e,h,f),h++,f--;o(e[h],p)<0;)h++;for(;o(e[f],p)>0;)f--}0===o(e[r],p)?on(e,r,f):on(e,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}(t,e,n||0,r||t.length-1,i||an)}function on(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function an(t,e){return t<e?-1:t>e?1:0}function sn(t,e){var n=t.length;if(n<=1)return[t];for(var r,i,o=[],a=0;a<n;a++){var s=v(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),e>1)for(var u=0;u<o.length;u++)o[u].length<=e||(aa(o[u],e,1,o[u].length-1,un),o[u]=o[u].slice(0,e));return o}function un(t,e){return e.area-t.area}function ln(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,2*Math.floor(r*ha)+a,i*ha*2,o*ha*2,Math.round(s))}function cn(t,e){return t.x===e.x&&(t.x<0||t.x>No)||t.y===e.y&&(t.y<0||t.y>No)}function pn(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>No})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>No})}function hn(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(fn,this,e)}function fn(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function dn(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],r+=((n=t[a]).x-e.x)*(e.y+n.y);return r}function mn(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(yn,this,e),this.length=this._features.length}function yn(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}function vn(t,e,n){if(3===t){var r=new ga(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}function gn(t,e,n,r,i,o,a){t.emplaceBack(e.x,e.y,r?1:0,i?1:-1,Math.round(xa*n.x)+128,Math.round(xa*n.y)+128,1+(0===o?0:o<0?-1:1)|(a*Ea&63)<<2,a*Ea>>6)}function _n(t,e){return(t/e.tileTotal*(e.end-e.start)+e.start)*(Sa-1)}function bn(t,e){return e>0?e+2*t:t}function xn(t,e,n){var r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),Bi.applyArabicShaping&&(t=Bi.applyArabicShaping(t)),t}function wn(t,e){var n=e.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate(new ji(t+1))};if("source"===n.kind)return{functionType:"source"};for(var r=n.zoomStops,i=0;i<r.length&&r[i]<=t;)i++;for(var o=i=Math.max(0,i-1);o<r.length&&r[o]<t+1;)o++;o=Math.min(r.length-1,o);var a={min:r[i],max:r[o]};return"composite"===n.kind?{functionType:"composite",zoomRange:a,propertyValue:e.value}:{functionType:"camera",layoutSize:n.evaluate(new ji(t+1)),zoomRange:a,sizeRange:{min:n.evaluate(new ji(a.min)),max:n.evaluate(new ji(a.max))},propertyValue:e.value}}function En(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,s?s[0]:0,s?s[1]:0)}function Sn(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function Tn(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function kn(t){return t.type===Tn.Bytes?t.readVarint()+t.pos:t.pos+1}function Cn(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Pn(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function An(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function On(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function In(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function Mn(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function zn(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function Rn(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function Ln(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function Dn(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function Bn(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function jn(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Fn(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Nn(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Un(t,e,n){1===t&&n.readMessage(Vn,e)}function Vn(t,e,n){if(3===t){var r=n.readMessage(qn,{}),i=r.id,o=r.bitmap,a=r.width,s=r.height,u=r.left,l=r.top,c=r.advance;e.push({id:i,bitmap:new Yo({width:a+2*ss,height:s+2*ss},o),metrics:{width:a,height:s,left:u,top:l,advance:c}})}}function qn(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function $n(t,e,n,r){(t*=2)<0&&(t=-1*t-1);var i=1<<e;return 32*(i*i*t+i*r+n)+e}function Gn(t,e){return e-t}function Zn(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function Wn(t,e){var n=0;return 10===t&&(n-=1e4),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function Hn(t,e,n,r,i,o){for(var a=null,s=Zn(e,n,i,o),u=0,l=r;u<l.length;u+=1){var c=l[u],p=Zn(e-c.x,n,i,o)+c.badness;p<=s&&(a=c,s=p)}return{index:t,x:e,priorBreak:a,badness:s}}function Xn(t,e,n,r){if(!n)return[];if(!t)return[];for(var i,o=[],a=function(t,e,n,r){for(var i=0,o=0;o<t.length;o++){var a=r[t.charCodeAt(o)];a&&(i+=a.metrics.advance+e)}return i/Math.max(1,Math.ceil(i/n))}(t,e,n,r),s=0,u=0;u<t.length;u++){var l=t.charCodeAt(u),c=r[l];c&&!Ts[l]&&(s+=c.metrics.advance+e),u<t.length-1&&(ks[l]||!((i=l)<11904)&&(Mi["Bopomofo Extended"](i)||Mi.Bopomofo(i)||Mi["CJK Compatibility Forms"](i)||Mi["CJK Compatibility Ideographs"](i)||Mi["CJK Compatibility"](i)||Mi["CJK Radicals Supplement"](i)||Mi["CJK Strokes"](i)||Mi["CJK Symbols and Punctuation"](i)||Mi["CJK Unified Ideographs Extension A"](i)||Mi["CJK Unified Ideographs"](i)||Mi["Enclosed CJK Letters and Months"](i)||Mi["Halfwidth and Fullwidth Forms"](i)||Mi.Hiragana(i)||Mi["Ideographic Description Characters"](i)||Mi["Kangxi Radicals"](i)||Mi["Katakana Phonetic Extensions"](i)||Mi.Katakana(i)||Mi["Vertical Forms"](i)||Mi["Yi Radicals"](i)||Mi["Yi Syllables"](i)))&&o.push(Hn(u+1,s,a,o,Wn(l,t.charCodeAt(u+1)),!1))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Hn(t.length,s,a,o,0,!0))}function Kn(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Yn(t,e,n,r,i){if(i){var o=e[t[r].glyph];if(o)for(var a=o.metrics.advance,s=(t[r].x+a)*i,u=n;u<=r;u++)t[u].x-=s}}var Jn=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),Qn=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,tr=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,er={now:Jn,frame:function(t){var e=Qn(t);return{cancel:function(){return tr(e)}}},getImageData:function(t){var e=self.document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height)},resolveURL:function(t){var e=self.document.createElement("a");return e.href=t,e.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},supportsWebp:!1};if(self.document){var nr=self.document.createElement("img");nr.onload=function(){er.supportsWebp=!0},nr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="}var rr=r;r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var ir=function(t,e,n){this.column=t,this.row=e,this.zoom=n};ir.prototype.clone=function(){return new ir(this.column,this.row,this.zoom)},ir.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},ir.prototype.sub=function(t){return this.clone()._sub(t)},ir.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},ir.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this};var or=i;i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t};var ar=a(.25,.1,.25,1),sr=1,ur={},lr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(lr);var cr=function(t){function e(e,n,r){t.call(this,e),this.status=n,this.url=r,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),pr=function(t,e){var n=g(t);return n.responseType="arraybuffer",n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){var r=n.response;if(0===r.byteLength&&200===n.status)return e(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?e(null,{data:r,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):e(new cr(n.statusText,n.status,t.url))},n.send(),{cancel:function(){return n.abort()}}},hr=function(t,e){void 0===e&&(e={}),u(this,e),this.type=t},fr=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",u({error:e},n))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(hr),dr=function(){};dr.prototype.on=function(t,e){return this._listeners=this._listeners||{},_(t,e,this._listeners),this},dr.prototype.off=function(t,e){return b(t,e,this._listeners),b(t,e,this._oneTimeListeners),this},dr.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},_(t,e,this._oneTimeListeners),this},dr.prototype.fire=function(t){"string"==typeof t&&(t=new hr(t,arguments[1]||{}));var e=t.type;if(this.listens(e)){t.target=this;for(var n=0,r=this._listeners&&this._listeners[e]?this._listeners[e].slice():[];n<r.length;n+=1)r[n].call(this,t);for(var i=0,o=this._oneTimeListeners&&this._oneTimeListeners[e]?this._oneTimeListeners[e].slice():[];i<o.length;i+=1){var a=o[i];b(e,a,this._oneTimeListeners),a.call(this,t)}var s=this._eventedParent;s&&(u(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),s.fire(t))}else t instanceof fr&&console.error(t.error);return this},dr.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},dr.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var mr={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},lineMetrics:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"string",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},yr=function(t,e,n,r){this.message=(t?t+": ":"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)},vr=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),gr=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=i[0],a=i[1];this.bindings[o]=a}};gr.prototype.concat=function(t){return new gr(this,t)},gr.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},gr.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var _r={kind:"null"},br={kind:"number"},xr={kind:"string"},wr={kind:"boolean"},Er={kind:"color"},Sr={kind:"object"},Tr={kind:"value"},kr={kind:"collator"},Cr=[_r,br,xr,wr,Er,Sr,T(Tr)],Pr=n(function(t,e){function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function r(t){return t<0?0:t>1?1:t}function i(t){return n("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return r("%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function a(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{e.parseCSSColor=function(t){var e,r=t.replace(/ /g,"").toLowerCase();if(r in s)return s[r].slice();if("#"===r[0])return 4===r.length?(e=parseInt(r.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===r.length&&(e=parseInt(r.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=r.indexOf("("),l=r.indexOf(")");if(-1!==u&&l+1===r.length){var c=r.substr(0,u),p=r.substr(u+1,l-(u+1)).split(","),h=1;switch(c){case"rgba":if(4!==p.length)return null;h=o(p.pop());case"rgb":return 3!==p.length?null:[i(p[0]),i(p[1]),i(p[2]),h];case"hsla":if(4!==p.length)return null;h=o(p.pop());case"hsl":if(3!==p.length)return null;var f=(parseFloat(p[0])%360+360)%360/360,d=o(p[1]),m=o(p[2]),y=m<=.5?m*(d+1):m+d-m*d,v=2*m-y;return[n(255*a(v,y,f+1/3)),n(255*a(v,y,f)),n(255*a(v,y,f-1/3)),h];default:return null}}return null}}catch(t){}}).parseCSSColor,Ar=function(t,e,n,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=n,this.a=r};Ar.parse=function(t){if(t){if(t instanceof Ar)return t;if("string"==typeof t){var e=Pr(t);if(e)return new Ar(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Ar.prototype.toString=function(){var t=this.toArray(),e=t[0],n=t[1],r=t[2],i=t[3];return"rgba("+Math.round(e)+","+Math.round(n)+","+Math.round(r)+","+i+")"},Ar.prototype.toArray=function(){var t=this.r,e=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]},Ar.black=new Ar(0,0,0,1),Ar.white=new Ar(1,1,1,1),Ar.transparent=new Ar(0,0,0,0);var Or=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Or.prototype.compare=function(t,e){return this.collator.compare(t,e)},Or.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ir=function(t,e,n){this.type=kr,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};Ir.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,wr);if(!r)return null;var i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,wr);if(!i)return null;var o=null;return n.locale&&!(o=e.parse(n.locale,1,xr))?null:new Ir(r,i,o)},Ir.prototype.evaluate=function(t){return new Or(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},Ir.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},Ir.prototype.possibleOutputs=function(){return[void 0]},Ir.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Mr=function(t,e){this.type=t,this.value=e};Mr.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Ar)return!0;if(e instanceof Or)return!0;if(Array.isArray(e)){for(var n=0,r=e;n<r.length;n+=1)if(!t(r[n]))return!1;return!0}if("object"==typeof e){for(var i in e)if(!t(e[i]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var n=t[1],r=A(n),i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new Mr(r,n)},Mr.prototype.evaluate=function(){return this.value},Mr.prototype.eachChild=function(){},Mr.prototype.possibleOutputs=function(){return[this.value]},Mr.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ar?["rgba"].concat(this.value.toArray()):this.value};var zr=function(t){this.name="ExpressionEvaluationError",this.message=t};zr.prototype.toJSON=function(){return this.message};var Rr={string:xr,number:br,boolean:wr,object:Sr},Lr=function(t,e){this.type=t,this.args=e};Lr.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var n=t[0],r=Rr[n],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,Tr);if(!a)return null;i.push(a)}return new Lr(r,i)},Lr.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!C(this.type,A(n)))return n;if(e===this.args.length-1)throw new zr("Expected value to be of type "+k(this.type)+", but found "+k(A(n))+" instead.")}return null},Lr.prototype.eachChild=function(t){this.args.forEach(t)},Lr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},Lr.prototype.serialize=function(){return[this.type.kind].concat(this.args.map(function(t){return t.serialize()}))};var Dr={string:xr,number:br,boolean:wr},Br=function(t,e){this.type=t,this.input=e};Br.parse=function(t,e){if(t.length<2||t.length>4)return e.error("Expected 1, 2, or 3 arguments, but found "+(t.length-1)+" instead.");var n,r;if(t.length>2){var i=t[1];if("string"!=typeof i||!(i in Dr))return e.error('The item type argument of "array" must be one of string, number, boolean',1);n=Dr[i]}else n=Tr;if(t.length>3){if("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2]))return e.error('The length argument to "array" must be a positive integer literal',2);r=t[2]}var o=T(n,r),a=e.parse(t[t.length-1],t.length-1,Tr);return a?new Br(o,a):null},Br.prototype.evaluate=function(t){var e=this.input.evaluate(t);if(C(this.type,A(e)))throw new zr("Expected value to be of type "+k(this.type)+", but found "+k(A(e))+" instead.");return e},Br.prototype.eachChild=function(t){t(this.input)},Br.prototype.possibleOutputs=function(){return this.input.possibleOutputs()},Br.prototype.serialize=function(){var t=["array"],e=this.type.itemType;if("string"===e.kind||"number"===e.kind||"boolean"===e.kind){t.push(e.kind);var n=this.type.N;"number"==typeof n&&t.push(n)}return t.push(this.input.serialize()),t};var jr={"to-number":br,"to-color":Er},Fr=function(t,e){this.type=t,this.args=e};Fr.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var n=t[0],r=jr[n],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,Tr);if(!a)return null;i.push(a)}return new Fr(r,i)},Fr.prototype.evaluate=function(t){if("color"===this.type.kind){for(var e,n,r=0,i=this.args;r<i.length;r+=1)if(n=null,"string"==typeof(e=i[r].evaluate(t))){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":P(e[0],e[1],e[2],e[3])))return new Ar(e[0]/255,e[1]/255,e[2]/255,e[3]);throw new zr(n||"Could not parse color from value '"+("string"==typeof e?e:JSON.stringify(e))+"'")}for(var a=null,s=0,u=this.args;s<u.length;s+=1)if(null!==(a=u[s].evaluate(t))){var l=Number(a);if(!isNaN(l))return l}throw new zr("Could not convert "+JSON.stringify(a)+" to number.")},Fr.prototype.eachChild=function(t){this.args.forEach(t)},Fr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},Fr.prototype.serialize=function(){var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var Nr=["Unknown","Point","LineString","Polygon"],Ur=function(){this._parseColorCache={}};Ur.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Ur.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Nr[this.feature.type]:this.feature.type:null},Ur.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ur.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Ar.parse(t)),e};var Vr=function(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r};Vr.prototype.evaluate=function(t){return this._evaluate(t,this.args)},Vr.prototype.eachChild=function(t){this.args.forEach(t)},Vr.prototype.possibleOutputs=function(){return[void 0]},Vr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},Vr.parse=function(t,e){var n=t[0],r=Vr.definitions[n];if(!r)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter(function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1}),s=[],u=1;u<t.length;u++){var l=t[u],c=void 0;if(1===a.length){var p=a[0][0];c=Array.isArray(p)?p[u-1]:p.type}var h=e.parse(l,1+s.length,c);if(!h)return null;s.push(h)}for(var f=null,d=0,m=a;d<m.length;d+=1){var y=m[d],v=y[0],g=y[1];if(f=new $r(e.registry,e.path,null,e.scope),Array.isArray(v)&&v.length!==s.length)f.error("Expected "+v.length+" arguments, but found "+s.length+" instead.");else{for(var _=0;_<s.length;_++){var b=Array.isArray(v)?v[_]:v.type,x=s[_];f.concat(_+1).checkSubtype(b,x.type)}if(0===f.errors.length)return new Vr(n,i,g,s)}}if(1===a.length)e.errors.push.apply(e.errors,f.errors);else{var w=(a.length?a:o).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(k).join(", ")+")":"("+k(e.type)+"...)"}).join(" | "),E=s.map(function(t){return k(t.type)}).join(", ");e.error("Expected arguments of type "+w+", but found ("+E+") instead.")}return null},Vr.register=function(t,e){for(var n in Vr.definitions=e,e)t[n]=Vr};var qr=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};qr.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new qr(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},qr.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},qr.prototype.eachChild=function(){},qr.prototype.possibleOutputs=function(){return[void 0]},qr.prototype.serialize=function(){return["var",this.name]};var $r=function(t,e,n,r,i){void 0===e&&(e=[]),void 0===r&&(r=new gr),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=r,this.errors=i,this.expectedType=n};$r.prototype.parse=function(t,e,n,r,i){return void 0===i&&(i={}),e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)},$r.prototype._parse=function(t,e){if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var r=this.registry[n];if(r){var i=r.parse(t,this);if(!i)return null;if(this.expectedType){var o=this.expectedType,a=i.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind||"value"!==a.kind)if("array"===o.kind&&"value"===a.kind)e.omitTypeAnnotations||(i=new Br(o,i));else if("color"!==o.kind||"value"!==a.kind&&"string"!==a.kind){if(this.checkSubtype(this.expectedType,i.type))return null}else e.omitTypeAnnotations||(i=new Fr(o,[i]));else e.omitTypeAnnotations||(i=new Lr(o,[i]))}if(!(i instanceof Mr)&&function t(e){if(e instanceof qr)return t(e.boundExpression);if(e instanceof Vr&&"error"===e.name)return!1;if(e instanceof Ir)return!1;var n=e instanceof Fr||e instanceof Lr||e instanceof Br,r=!0;return e.eachChild(function(e){r=n?r&&t(e):r&&e instanceof Mr}),!!r&&(O(e)&&M(e,["zoom","heatmap-density","line-progress","is-supported-script"]))}(i)){var s=new Ur;try{i=new Mr(i.type,i.evaluate(s))}catch(t){return this.error(t.message),null}}return i}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},$r.prototype.concat=function(t,e,n){var r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new $r(this.registry,r,e||null,i,this.errors)},$r.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new vr(r,t))},$r.prototype.checkSubtype=function(t,e){var n=C(t,e);return n&&this.error(n),n};var Gr=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],a=o[0],s=o[1];this.labels.push(a),this.outputs.push(s)}};Gr.parse=function(t,e){var n=t[1],r=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,1,br)))return null;var i=[],o=null;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType),r.unshift(-1/0);for(var a=0;a<r.length;a+=2){var s=r[a],u=r[a+1],l=a+1,c=a+2;if("number"!=typeof s)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var p=e.parse(u,c,o);if(!p)return null;o=o||p.type,i.push([s,p])}return new Gr(o,n,i)},Gr.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[z(e,r)].evaluate(t)},Gr.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Gr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},Gr.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Zr=Object.freeze({number:R,color:function(t,e,n){return new Ar(R(t.r,e.r,n),R(t.g,e.g,n),R(t.b,e.b,n),R(t.a,e.a,n))},array:function(t,e,n){return t.map(function(t,r){return R(t,e[r],n)})}}),Wr=function(t,e,n,r){this.type=t,this.interpolation=e,this.input=n,this.labels=[],this.outputs=[];for(var i=0,o=r;i<o.length;i+=1){var a=o[i],s=a[0],u=a[1];this.labels.push(s),this.outputs.push(u)}};Wr.interpolationFactor=function(t,e,n,r){var i=0;if("exponential"===t.name)i=L(e,t.base,n,r);else if("linear"===t.name)i=L(e,1,n,r);else if("cubic-bezier"===t.name){var o=t.controlPoints;i=new rr(o[0],o[1],o[2],o[3]).solve(L(e,1,n,r))}return i},Wr.parse=function(t,e){var n=t[1],r=t[2],i=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var o=n[1];if("number"!=typeof o)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:o}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);var a=n.slice(1);if(4!==a.length||a.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:a}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,2,br)))return null;var s=[],u=null;e.expectedType&&"value"!==e.expectedType.kind&&(u=e.expectedType);for(var l=0;l<i.length;l+=2){var c=i[l],p=i[l+1],h=l+3,f=l+4;if("number"!=typeof c)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(s.length&&s[s.length-1][0]>=c)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',h);var d=e.parse(p,f,u);if(!d)return null;u=u||d.type,s.push([c,d])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new Wr(u,n,r,s):e.error("Type "+k(u)+" is not interpolatable.")},Wr.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);var o=z(e,r),a=e[o],s=e[o+1],u=Wr.interpolationFactor(this.interpolation,r,a,s),l=n[o].evaluate(t),c=n[o+1].evaluate(t);return Zr[this.type.kind.toLowerCase()](l,c,u)},Wr.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Wr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},Wr.prototype.serialize=function(){for(var t=["interpolate","linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints),this.input.serialize()],e=0;e<this.labels.length;e++)t.push(this.labels[e],this.outputs[e].serialize());return t};var Hr=function(t,e){this.type=t,this.args=e};Hr.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,r=e.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=a[o],u=e.parse(s,1+i.length,n,void 0,{omitTypeAnnotations:!0});if(!u)return null;n=n||u.type,i.push(u)}var l=r&&i.some(function(t){return C(r,t.type)});return new Hr(l?Tr:n,i)},Hr.prototype.evaluate=function(t){for(var e=null,n=0,r=this.args;n<r.length&&null===(e=r[n].evaluate(t));n+=1);return e},Hr.prototype.eachChild=function(t){this.args.forEach(t)},Hr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},Hr.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Xr=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};Xr.prototype.evaluate=function(t){return this.result.evaluate(t)},Xr.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},Xr.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],r=1;r<t.length-1;r+=2){var i=t[r];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}var a=e.parse(t[t.length-1],t.length-1,void 0,n);return a?new Xr(n,a):null},Xr.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},Xr.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];t.push(i,o.serialize())}return t.push(this.result.serialize()),t};var Kr=function(t,e,n){this.type=t,this.index=e,this.input=n};Kr.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,br),r=e.parse(t[2],2,T(e.expectedType||Tr));if(!n||!r)return null;var i=r.type;return new Kr(i.itemType,n,r)},Kr.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new zr("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new zr("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new zr("Array index must be an integer, but found "+e+" instead.");return n[e]},Kr.prototype.eachChild=function(t){t(this.index),t(this.input)},Kr.prototype.possibleOutputs=function(){return[void 0]},Kr.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Yr=function(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};Yr.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],u=t[a+1];Array.isArray(s)||(s=[s]);var l=e.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var h=p[c];if("number"!=typeof h&&"string"!=typeof h)return l.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return l.error("Numeric branch labels must be integer values.");if(n){if(l.checkSubtype(n,A(h)))return null}else n=A(h);if(void 0!==i[String(h)])return l.error("Branch labels must be unique.");i[String(h)]=o.length}var f=e.parse(u,a,r);if(!f)return null;r=r||f.type,o.push(f)}var d=e.parse(t[1],1,Tr);if(!d)return null;var m=e.parse(t[t.length-1],t.length-1,r);return m?"value"!==d.type.kind&&e.concat(1).checkSubtype(n,d.type)?null:new Yr(n,r,d,i,o,m):null},Yr.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(A(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Yr.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Yr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},Yr.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i],s=r[t.cases[a]];void 0===s?(r[t.cases[a]]=n.length,n.push([t.cases[a],[a]])):n[s][1].push(a)}for(var u=function(e){return"number"===t.inputType.kind?Number(e):e},l=0,c=n;l<c.length;l+=1){var p=c[l],h=p[0],f=p[1];1===f.length?e.push(u(f[0])):e.push(f.map(u)),e.push(t.outputs[h].serialize())}return e.push(this.otherwise.serialize()),e};var Jr=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};Jr.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r=[],i=1;i<t.length-1;i+=2){var o=e.parse(t[i],i,wr);if(!o)return null;var a=e.parse(t[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?new Jr(n,r,s):null},Jr.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];if(i.evaluate(t))return o.evaluate(t)}return this.otherwise.evaluate(t)},Jr.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];t(i),t(o)}t(this.otherwise)},Jr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.branches.map(function(t){return t[0],t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},Jr.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Qr=B("==",!1),ti=B("!=",!0),ei=function(t){this.type=br,this.input=t};ei.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+k(n.type)+" instead."):new ei(n):null},ei.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new zr("Expected value to be of type string or array, but found "+k(A(e))+" instead.")},ei.prototype.eachChild=function(t){t(this.input)},ei.prototype.possibleOutputs=function(){return[void 0]},ei.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var ni={"==":Qr,"!=":ti,array:Br,at:Kr,boolean:Lr,case:Jr,coalesce:Hr,collator:Ir,interpolate:Wr,length:ei,let:Xr,literal:Mr,match:Yr,number:Lr,object:Lr,step:Gr,string:Lr,"to-color":Fr,"to-number":Fr,var:qr};Vr.register(ni,{error:[{kind:"error"},[xr],function(t,e){var n=e[0];throw new zr(n.evaluate(t))}],typeof:[xr,[Tr],function(t,e){return k(A(e[0].evaluate(t)))}],"to-string":[xr,[Tr],function(t,e){var n=e[0],r=typeof(n=n.evaluate(t));return null===n?"":"string"===r||"number"===r||"boolean"===r?String(n):n instanceof Ar?n.toString():JSON.stringify(n)}],"to-boolean":[wr,[Tr],function(t,e){var n=e[0];return Boolean(n.evaluate(t))}],"to-rgba":[T(br,4),[Er],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Er,[br,br,br],j],rgba:[Er,[br,br,br,br],j],has:{type:wr,overloads:[[[xr],function(t,e){return F(e[0].evaluate(t),t.properties())}],[[xr,Sr],function(t,e){var n=e[0],r=e[1];return F(n.evaluate(t),r.evaluate(t))}]]},get:{type:Tr,overloads:[[[xr],function(t,e){return N(e[0].evaluate(t),t.properties())}],[[xr,Sr],function(t,e){var n=e[0],r=e[1];return N(n.evaluate(t),r.evaluate(t))}]]},"feature-state":[Tr,[xr],function(t,e){return N(e[0].evaluate(t),t.featureState||{})}],properties:[Sr,[],function(t){return t.properties()}],"geometry-type":[xr,[],function(t){return t.geometryType()}],id:[Tr,[],function(t){return t.id()}],zoom:[br,[],function(t){return t.globals.zoom}],"heatmap-density":[br,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[br,[],function(t){return t.globals.lineProgress||0}],"+":[br,G(br),function(t,e){for(var n=0,r=0,i=e;r<i.length;r+=1)n+=i[r].evaluate(t);return n}],"*":[br,G(br),function(t,e){for(var n=1,r=0,i=e;r<i.length;r+=1)n*=i[r].evaluate(t);return n}],"-":{type:br,overloads:[[[br,br],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)-r.evaluate(t)}],[[br],function(t,e){return-e[0].evaluate(t)}]]},"/":[br,[br,br],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)/r.evaluate(t)}],"%":[br,[br,br],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)%r.evaluate(t)}],ln2:[br,[],function(){return Math.LN2}],pi:[br,[],function(){return Math.PI}],e:[br,[],function(){return Math.E}],"^":[br,[br,br],function(t,e){var n=e[0],r=e[1];return Math.pow(n.evaluate(t),r.evaluate(t))}],sqrt:[br,[br],function(t,e){var n=e[0];return Math.sqrt(n.evaluate(t))}],log10:[br,[br],function(t,e){var n=e[0];return Math.log10(n.evaluate(t))}],ln:[br,[br],function(t,e){var n=e[0];return Math.log(n.evaluate(t))}],log2:[br,[br],function(t,e){var n=e[0];return Math.log2(n.evaluate(t))}],sin:[br,[br],function(t,e){var n=e[0];return Math.sin(n.evaluate(t))}],cos:[br,[br],function(t,e){var n=e[0];return Math.cos(n.evaluate(t))}],tan:[br,[br],function(t,e){var n=e[0];return Math.tan(n.evaluate(t))}],asin:[br,[br],function(t,e){var n=e[0];return Math.asin(n.evaluate(t))}],acos:[br,[br],function(t,e){var n=e[0];return Math.acos(n.evaluate(t))}],atan:[br,[br],function(t,e){var n=e[0];return Math.atan(n.evaluate(t))}],min:[br,G(br),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[br,G(br),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[br,[br],function(t,e){var n=e[0];return Math.abs(n.evaluate(t))}],round:[br,[br],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[br,[br],function(t,e){var n=e[0];return Math.floor(n.evaluate(t))}],ceil:[br,[br],function(t,e){var n=e[0];return Math.ceil(n.evaluate(t))}],"filter-==":[wr,[xr,Tr],function(t,e){var n=e[0],r=e[1];return t.properties()[n.value]===r.value}],"filter-id-==":[wr,[Tr],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[wr,[xr],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[wr,[xr,Tr],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[wr,[Tr],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[wr,[xr,Tr],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[wr,[Tr],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[wr,[xr,Tr],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[wr,[Tr],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[wr,[xr,Tr],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[wr,[Tr],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[wr,[Tr],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[wr,[],function(t){return null!==t.id()}],"filter-type-in":[wr,[T(xr)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[wr,[T(Tr)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[wr,[xr,T(Tr)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[wr,[xr,T(Tr)],function(t,e){var n=e[0],r=e[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[n.value],r.value,0,r.value.length-1)}],">":{type:wr,overloads:[[[br,br],V],[[xr,xr],V],[[xr,xr,kr],function(t,e){var n=e[0],r=e[1];return e[2].evaluate(t).compare(n.evaluate(t),r.evaluate(t))>0}]]},"<":{type:wr,overloads:[[[br,br],U],[[xr,xr],U],[[xr,xr,kr],function(t,e){var n=e[0],r=e[1];return e[2].evaluate(t).compare(n.evaluate(t),r.evaluate(t))<0}]]},">=":{type:wr,overloads:[[[br,br],$],[[xr,xr],$],[[xr,xr,kr],function(t,e){var n=e[0],r=e[1];return e[2].evaluate(t).compare(n.evaluate(t),r.evaluate(t))>=0}]]},"<=":{type:wr,overloads:[[[br,br],q],[[xr,xr],q],[[xr,xr,kr],function(t,e){var n=e[0],r=e[1];return e[2].evaluate(t).compare(n.evaluate(t),r.evaluate(t))<=0}]]},all:{type:wr,overloads:[[[wr,wr],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)&&r.evaluate(t)}],[G(wr),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(!r[n].evaluate(t))return!1;return!0}]]},any:{type:wr,overloads:[[[wr,wr],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)||r.evaluate(t)}],[G(wr),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(r[n].evaluate(t))return!0;return!1}]]},"!":[wr,[wr],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[wr,[xr],function(t,e){var n=e[0],r=t.globals&&t.globals.isSupportedScript;return!r||r(n.evaluate(t))}],upcase:[xr,[xr],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[xr,[xr],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[xr,G(xr),function(t,e){return e.map(function(e){return e.evaluate(t)}).join("")}],"resolved-locale":[xr,[kr],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var ri=.95047,ii=1,oi=1.08883,ai=4/29,si=6/29,ui=3*si*si,li=si*si*si,ci=Math.PI/180,pi=180/Math.PI,hi={forward:et,reverse:nt,interpolate:function(t,e,n){return{l:R(t.l,e.l,n),a:R(t.a,e.a,n),b:R(t.b,e.b,n),alpha:R(t.alpha,e.alpha,n)}}},fi={forward:function(t){var e=et(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*pi;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},reverse:function(t){var e=t.h*ci,n=t.c;return nt({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:function(t,e,n){var r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}(t.h,e.h,n),c:R(t.c,e.c,n),l:R(t.l,e.l,n),alpha:R(t.alpha,e.alpha,n)}}},di=Object.freeze({lab:hi,hcl:fi}),mi=function(t,e){var n;this.expression=t,this._warningHistory={},this._defaultValue="color"===(n=e).type&&it(n.default)?new Ar(0,0,0,0):"color"===n.type?Ar.parse(n.default)||null:void 0===n.default?null:n.default,"enum"===e.type&&(this._enumValues=e.values)};mi.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._evaluator||(this._evaluator=new Ur),this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this.expression.evaluate(this._evaluator)},mi.prototype.evaluate=function(t,e,n){this._evaluator||(this._evaluator=new Ur),this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n;try{var r=this.expression.evaluate(this._evaluator);if(null==r)return this._defaultValue;if(this._enumValues&&!(r in this._enumValues))throw new zr("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(r)+" instead.");return r}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var yi=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!I(e.expression)};yi.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},yi.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)};var vi=function(t,e,n){this.kind=t,this.zoomStops=n.labels,this._styleExpression=e,this.isStateDependent="camera"!==t&&!I(e.expression),n instanceof Wr&&(this._interpolationType=n.interpolation)};vi.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},vi.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)},vi.prototype.interpolationFactor=function(t,e,n){return this._interpolationType?Wr.interpolationFactor(this._interpolationType,t,e,n):0};var gi=function(t,e){this._parameters=t,this._specification=e,w(this,function t(e,n){var r,i,o,a="color"===n.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||void 0!==e.property,l=s||!u,c=e.type||(K(n)?"exponential":"interval");if(a&&((e=w({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],Ar.parse(t[1])]})),e.default?e.default=Ar.parse(e.default):e.default=Ar.parse(n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!di[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===c)r=lt;else if("interval"===c)r=ut;else if("categorical"===c){r=st,i=Object.create(null);for(var p=0,h=e.stops;p<h.length;p+=1){var f=h[p];i[f[0]]=f[1]}o=typeof e.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');r=ct}if(s){for(var d={},m=[],y=0;y<e.stops.length;y++){var v=e.stops[y],g=v[0].zoom;void 0===d[g]&&(d[g]={zoom:g,type:e.type,property:e.property,default:e.default,stops:[]},m.push(g)),d[g].stops.push([v[0].value,v[1]])}for(var _=[],b=0,x=m;b<x.length;b+=1){var E=x[b];_.push([d[E].zoom,t(d[E],n)])}return{kind:"composite",interpolationFactor:Wr.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:_.map(function(t){return t[0]}),evaluate:function(t,r){var i=t.zoom;return lt({stops:_,base:e.base},n,i).evaluate(i,r)}}}return l?{kind:"camera",interpolationFactor:"exponential"===c?Wr.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){var a=t.zoom;return r(e,n,a,i,o)}}:{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?at(e.default,n.default):r(e,n,s,i,o)}}}(this._parameters,this._specification))};gi.deserialize=function(t){return new gi(t._parameters,t._specification)},gi.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var _i={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},bi={"*":function(){return[]},array:vt,boolean:function(t){var e=t.value,n=t.key,r=rt(e);return"boolean"!==r?[new yr(n,e,"boolean expected, "+r+" found")]:[]},number:gt,color:function(t){var e=t.key,n=t.value,r=rt(n);return"string"!==r?[new yr(e,n,"color expected, "+r+" found")]:null===Pr(n)?[new yr(e,n,'color expected, "'+n+'" found')]:[]},constants:x,enum:xt,filter:Ot,function:_t,layer:Rt,object:yt,source:Lt,light:Dt,string:Bt};Nt.source=Vt(Lt),Nt.light=Vt(Dt),Nt.layer=Vt(Rt),Nt.filter=Vt(Ot),Nt.paintProperty=Vt(Mt),Nt.layoutProperty=Vt(zt);var xi=Nt,wi=Nt.light,Ei=Nt.paintProperty,Si=Nt.layoutProperty,Ti=$t,ki=3;$t.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},$t.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},$t.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},$t.prototype.query=function(t,e,n,r){var i=this.min,o=this.max;if(t<=i&&e<=i&&o<=n&&o<=r)return Array.prototype.slice.call(this.keys);var a=[];return this._forEachCell(t,e,n,r,this._queryCell,a,{}),a},$t.prototype._queryCell=function(t,e,n,r,i,o,a){var s=this.cells[i];if(null!==s)for(var u=this.keys,l=this.bboxes,c=0;c<s.length;c++){var p=s[c];if(void 0===a[p]){var h=4*p;t<=l[h+2]&&e<=l[h+3]&&n>=l[h+0]&&r>=l[h+1]?(a[p]=!0,o.push(u[p])):a[p]=!1}}},$t.prototype._forEachCell=function(t,e,n,r,i,o,a){for(var s=this._convertToCellCoord(t),u=this._convertToCellCoord(e),l=this._convertToCellCoord(n),c=this._convertToCellCoord(r),p=s;p<=l;p++)for(var h=u;h<=c;h++){var f=this.d*h+p;if(i.call(this,t,e,n,r,f,o,a))return}},$t.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},$t.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=ki+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[ki+a]=o,i.set(s,o),o+=s.length}return i[ki+t.length]=o,i.set(this.keys,o),o+=this.keys.length,i[ki+t.length+1]=o,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var Ci=self.ImageData,Pi={};for(var Ai in Gt("Object",Object),Ti.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),n},Ti.deserialize=function(t){return new Ti(t)},Gt("Grid",Ti),Gt("Color",Ar),Gt("Error",Error),Gt("StylePropertyFunction",gi),Gt("StyleExpression",mi,{omit:["_evaluator"]}),Gt("ZoomDependentExpression",vi),Gt("ZoomConstantExpression",yi),Gt("CompoundExpression",Vr,{omit:["_evaluate"]}),ni)ni[Ai]._classRegistryKey||Gt("Expression_"+Ai,ni[Ai]);var Oi=function(){this.first=!0};Oi.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var Ii,Mi={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}},zi=!1,Ri=null,Li=!1,Di=new dr,Bi={applyArabicShaping:null,processBidirectionalText:null,isLoaded:function(){return Li||null!=Bi.applyArabicShaping}},ji=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Oi,this.transition={})};ji.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,r=t;n<r.length;n+=1)if(!Jt(r[n].charCodeAt(0),e))return!1;return!0}(t,Bi.isLoaded())},ji.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};var Fi=function(t,e){this.property=t,this.value=e,this.expression=mt(void 0===e?t.specification.default:e,t.specification)};Fi.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Fi.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};var Ni=function(t){this.property=t,this.value=new Fi(t,void 0)};Ni.prototype.transitioned=function(t,e){return new Vi(this.property,this.value,e,u({},t.transition,this.transition),t.now)},Ni.prototype.untransitioned=function(){return new Vi(this.property,this.value,null,{},0)};var Ui=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};Ui.prototype.getValue=function(t){return d(this._values[t].value.value)},Ui.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Ni(this._values[t].property)),this._values[t].value=new Fi(this._values[t].property,null===e?void 0:d(e))},Ui.prototype.getTransition=function(t){return d(this._values[t].transition)},Ui.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Ni(this._values[t].property)),this._values[t].transition=d(e)||void 0},Ui.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i);var o=this.getTransition(r);void 0!==o&&(t[r+"-transition"]=o)}return t},Ui.prototype.transitioned=function(t,e){for(var n=new qi(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},Ui.prototype.untransitioned=function(){for(var t=new qi(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e];t._values[r]=this._values[r].untransitioned()}return t};var Vi=function(t,e,n,r,i){this.property=t,this.value=e,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};Vi.prototype.possiblyEvaluate=function(t){var e=t.now||0,n=this.value.possiblyEvaluate(t),r=this.prior;if(r){if(e>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(e<this.begin)return r.possiblyEvaluate(t);var i=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(t),n,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(i))}return n};var qi=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};qi.prototype.possiblyEvaluate=function(t){for(var e=new Zi(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];e._values[i]=this._values[i].possiblyEvaluate(t)}return e},qi.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){var n=e[t];if(this._values[n].prior)return!0}return!1};var $i=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};$i.prototype.getValue=function(t){return d(this._values[t].value)},$i.prototype.setValue=function(t,e){this._values[t]=new Fi(this._values[t].property,null===e?void 0:d(e))},$i.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i)}return t},$i.prototype.possiblyEvaluate=function(t){for(var e=new Zi(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];e._values[i]=this._values[i].possiblyEvaluate(t)}return e};var Gi=function(t,e,n){this.property=t,this.value=e,this.globals=n};Gi.prototype.isConstant=function(){return"constant"===this.value.kind},Gi.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Gi.prototype.evaluate=function(t,e){return this.property.evaluate(this.value,this.globals,t,e)};var Zi=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Zi.prototype.get=function(t){return this._values[t]};var Wi=function(t){this.specification=t};Wi.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Wi.prototype.interpolate=function(t,e,n){var r=Zr[this.specification.type];return r?r(t,e,n):t};var Hi=function(t){this.specification=t};Hi.prototype.possiblyEvaluate=function(t,e){return"constant"===t.expression.kind||"camera"===t.expression.kind?new Gi(this,{kind:"constant",value:t.expression.evaluate(e)},e):new Gi(this,t.expression,e)},Hi.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Gi(this,{kind:"constant",value:void 0},t.globals);var r=Zr[this.specification.type];return r?new Gi(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.globals):t},Hi.prototype.evaluate=function(t,e,n,r){return"constant"===t.kind?t.value:t.evaluate(e,n,r)};var Xi=function(t){this.specification=t};Xi.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"===t.expression.kind){var n=t.expression.evaluate(e);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new ji(Math.floor(e.zoom-1),e)),t.expression.evaluate(new ji(Math.floor(e.zoom),e)),t.expression.evaluate(new ji(Math.floor(e.zoom+1),e)),e)}},Xi.prototype._calculate=function(t,e,n,r){var i=r.zoom,o=i-Math.floor(i),a=r.crossFadingFactor();return i>r.zoomHistory.lastIntegerZoom?{from:t,to:e,fromScale:2,toScale:1,t:o+(1-o)*a}:{from:n,to:e,fromScale:.5,toScale:1,t:1-(1-a)*o}},Xi.prototype.interpolate=function(t){return t};var Ki=function(t){this.specification=t};Ki.prototype.possiblyEvaluate=function(t,e){return!!t.expression.evaluate(e)},Ki.prototype.interpolate=function(){return!1};var Yi=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var n=t[e],r=this.defaultPropertyValues[e]=new Fi(n,void 0),i=this.defaultTransitionablePropertyValues[e]=new Ni(n);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}};Gt("DataDrivenProperty",Hi),Gt("DataConstantProperty",Wi),Gt("CrossFadedProperty",Xi),Gt("ColorRampProperty",Ki);var Ji=function(t){function e(e,n){for(var r in t.call(this),this.id=e.id,this.metadata=e.metadata,this.type=e.type,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this.visibility="visible","background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),this._featureFilter=function(){return!0},n.layout&&(this._unevaluatedLayout=new $i(n.layout)),this._transitionablePaint=new Ui(n.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){if(null!=e){var r="layers."+this.id+".layout."+t;if(this._validate(Si,r,t,e,n))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility="none"===e?e:"visible"},e.prototype.getPaintProperty=function(t){return p(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){if(null!=e){var r="layers."+this.id+".paint."+t;if(this._validate(Ei,r,t,e,n))return!1}if(p(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var i=this._transitionablePaint._values[t].value.isDataDriven();this._transitionablePaint.setValue(t,e);var o=this._transitionablePaint._values[t].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(t),o||i},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(t.layout=t.layout||{},t.layout.visibility="none"),f(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,n,r,i){return(!i||!1!==i.validate)&&qt(this,t.call(xi,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:mr,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof Gi&&H(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(dr),Qi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},to=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},eo=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};eo.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},eo.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},eo.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},eo.prototype.clear=function(){this.length=0},eo.prototype.resize=function(t){this.reserve(t),this.length=t},eo.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},eo.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var no=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=2*n;return this.int16[r+0]=t,this.int16[r+1]=e,n},e.prototype.emplace=function(t,e,n){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t},e}(eo);no.prototype.bytesPerElement=4,Gt("StructArrayLayout2i4",no);var ro=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;this.resize(i+1);var o=4*i;return this.int16[o+0]=t,this.int16[o+1]=e,this.int16[o+2]=n,this.int16[o+3]=r,i},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t},e}(eo);ro.prototype.bytesPerElement=8,Gt("StructArrayLayout4i8",ro);var io=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=o,a},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(eo);io.prototype.bytesPerElement=12,Gt("StructArrayLayout2i4i12",io);var oo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var u=this.length;this.resize(u+1);var l=6*u,c=12*u;return this.int16[l+0]=t,this.int16[l+1]=e,this.int16[l+2]=n,this.int16[l+3]=r,this.uint8[c+8]=i,this.uint8[c+9]=o,this.uint8[c+10]=a,this.uint8[c+11]=s,u},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u){var l=6*t,c=12*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.uint8[c+8]=o,this.uint8[c+9]=a,this.uint8[c+10]=s,this.uint8[c+11]=u,t},e}(eo);oo.prototype.bytesPerElement=12,Gt("StructArrayLayout4i4ub12",oo);var ao=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var u=this.length;this.resize(u+1);var l=8*u;return this.int16[l+0]=t,this.int16[l+1]=e,this.int16[l+2]=n,this.int16[l+3]=r,this.uint16[l+4]=i,this.uint16[l+5]=o,this.uint16[l+6]=a,this.uint16[l+7]=s,u},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u){var l=8*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.uint16[l+4]=o,this.uint16[l+5]=a,this.uint16[l+6]=s,this.uint16[l+7]=u,t},e}(eo);ao.prototype.bytesPerElement=16,Gt("StructArrayLayout4i4ui16",ao);var so=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=3*r;return this.float32[i+0]=t,this.float32[i+1]=e,this.float32[i+2]=n,r},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t},e}(eo);so.prototype.bytesPerElement=12,Gt("StructArrayLayout3f12",so);var uo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var n=1*e;return this.uint32[n+0]=t,e},e.prototype.emplace=function(t,e){var n=1*t;return this.uint32[n+0]=e,t},e}(eo);uo.prototype.bytesPerElement=4,Gt("StructArrayLayout1ul4",uo);var lo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c){var p=this.length;this.resize(p+1);var h=12*p,f=6*p;return this.int16[h+0]=t,this.int16[h+1]=e,this.int16[h+2]=n,this.int16[h+3]=r,this.int16[h+4]=i,this.int16[h+5]=o,this.uint32[f+3]=a,this.uint16[h+8]=s,this.uint16[h+9]=u,this.int16[h+10]=l,this.int16[h+11]=c,p},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,p){var h=12*t,f=6*t;return this.int16[h+0]=e,this.int16[h+1]=n,this.int16[h+2]=r,this.int16[h+3]=i,this.int16[h+4]=o,this.int16[h+5]=a,this.uint32[f+3]=s,this.uint16[h+8]=u,this.uint16[h+9]=l,this.int16[h+10]=c,this.int16[h+11]=p,t},e}(eo);lo.prototype.bytesPerElement=24,Gt("StructArrayLayout6i1ul2ui2i24",lo);var co=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=o,a},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(eo);co.prototype.bytesPerElement=12,Gt("StructArrayLayout2i2i2i12",co);var po=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=4*n;return this.uint8[r+0]=t,this.uint8[r+1]=e,n},e.prototype.emplace=function(t,e,n){var r=4*t;return this.uint8[r+0]=e,this.uint8[r+1]=n,t},e}(eo);po.prototype.bytesPerElement=4,Gt("StructArrayLayout2ub4",po);var ho=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c,p,h,f){var d=this.length;this.resize(d+1);var m=20*d,y=10*d,v=40*d;return this.int16[m+0]=t,this.int16[m+1]=e,this.uint16[m+2]=n,this.uint16[m+3]=r,this.uint32[y+2]=i,this.uint32[y+3]=o,this.uint32[y+4]=a,this.uint16[m+10]=s,this.uint16[m+11]=u,this.uint16[m+12]=l,this.float32[y+7]=c,this.float32[y+8]=p,this.uint8[v+36]=h,this.uint8[v+37]=f,d},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,p,h,f,d){var m=20*t,y=10*t,v=40*t;return this.int16[m+0]=e,this.int16[m+1]=n,this.uint16[m+2]=r,this.uint16[m+3]=i,this.uint32[y+2]=o,this.uint32[y+3]=a,this.uint32[y+4]=s,this.uint16[m+10]=u,this.uint16[m+11]=l,this.uint16[m+12]=c,this.float32[y+7]=p,this.float32[y+8]=h,this.uint8[v+36]=f,this.uint8[v+37]=d,t},e}(eo);ho.prototype.bytesPerElement=40,Gt("StructArrayLayout2i2ui3ul3ui2f2ub40",ho);var fo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var n=1*e;return this.float32[n+0]=t,e},e.prototype.emplace=function(t,e){var n=1*t;return this.float32[n+0]=e,t},e}(eo);fo.prototype.bytesPerElement=4,Gt("StructArrayLayout1f4",fo);var mo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=3*r;return this.int16[i+0]=t,this.int16[i+1]=e,this.int16[i+2]=n,r},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t},e}(eo);mo.prototype.bytesPerElement=6,Gt("StructArrayLayout3i6",mo);var yo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=2*r,o=4*r;return this.uint32[i+0]=t,this.uint16[o+2]=e,this.uint16[o+3]=n,r},e.prototype.emplace=function(t,e,n,r){var i=2*t,o=4*t;return this.uint32[i+0]=e,this.uint16[o+2]=n,this.uint16[o+3]=r,t},e}(eo);yo.prototype.bytesPerElement=8,Gt("StructArrayLayout1ul2ui8",yo);var vo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=3*r;return this.uint16[i+0]=t,this.uint16[i+1]=e,this.uint16[i+2]=n,r},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t},e}(eo);vo.prototype.bytesPerElement=6,Gt("StructArrayLayout3ui6",vo);var go=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=2*n;return this.uint16[r+0]=t,this.uint16[r+1]=e,n},e.prototype.emplace=function(t,e,n){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t},e}(eo);go.prototype.bytesPerElement=4,Gt("StructArrayLayout2ui4",go);var _o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=2*n;return this.float32[r+0]=t,this.float32[r+1]=e,n},e.prototype.emplace=function(t,e,n){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t},e}(eo);_o.prototype.bytesPerElement=8,Gt("StructArrayLayout2f8",_o);var bo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;this.resize(i+1);var o=4*i;return this.float32[o+0]=t,this.float32[o+1]=e,this.float32[o+2]=n,this.float32[o+3]=r,i},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t},e}(eo);bo.prototype.bytesPerElement=16,Gt("StructArrayLayout4f16",bo);var xo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},n.anchorPoint.get=function(){return new or(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(to);xo.prototype.size=24;var wo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new xo(this,t)},e}(lo);Gt("CollisionBoxArray",wo);var Eo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},Object.defineProperties(e.prototype,n),e}(to);Eo.prototype.size=40;var So=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Eo(this,t)},e}(ho);Gt("PlacedSymbolArray",So);var To=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={offsetX:{configurable:!0}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,n),e}(to);To.prototype.size=4;var ko=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new To(this,t)},e}(fo);Gt("GlyphOffsetArray",ko);var Co=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(t){this._structArray.int16[this._pos2+0]=t},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(t){this._structArray.int16[this._pos2+1]=t},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,n),e}(to);Co.prototype.size=6;var Po=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new Co(this,t)},e}(mo);Gt("SymbolLineVertexArray",Po);var Ao=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,n),e}(to);Ao.prototype.size=8;var Oo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Ao(this,t)},e}(yo);Gt("FeatureIndexArray",Oo);var Io=Qt([{name:"a_pos",components:2,type:"Int16"}],4).members,Mo=function(t){void 0===t&&(t=[]),this.segments=t};Mo.prototype.prepareSegment=function(t,e,n){var r=this.segments[this.segments.length-1];return t>Mo.MAX_VERTEX_ARRAY_LENGTH&&m("Max vertices per segment is "+Mo.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!r||r.vertexLength+t>Mo.MAX_VERTEX_ARRAY_LENGTH)&&(r={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},this.segments.push(r)),r},Mo.prototype.get=function(){return this.segments},Mo.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var r in n.vaos)n.vaos[r].destroy()}},Mo.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Gt("SegmentVector",Mo);var zo=function(t,e){return 256*(t=s(Math.floor(t),0,255))+(e=s(Math.floor(e),0,255))},Ro=function(t,e,n){this.value=t,this.name=e,this.type=n,this.statistics={max:-1/0}};Ro.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]},Ro.prototype.populatePaintArray=function(){},Ro.prototype.updatePaintArray=function(){},Ro.prototype.upload=function(){},Ro.prototype.destroy=function(){},Ro.prototype.setUniforms=function(t,e,n,r){var i=r.constantOr(this.value),o=t.gl;"color"===this.type?o.uniform4f(e.uniforms["u_"+this.name],i.r,i.g,i.b,i.a):o.uniform1f(e.uniforms["u_"+this.name],i)};var Lo=function(t,e,n){this.expression=t,this.name=e,this.type=n,this.statistics={max:-1/0};var r="color"===n?_o:fo;this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===n?2:1,offset:0}],this.paintVertexArray=new r};Lo.prototype.defines=function(){return[]},Lo.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,r=n.length;n.reserve(t);var i=this.expression.evaluate(new ji(0),e,{});if("color"===this.type)for(var o=ee(i),a=r;a<t;a++)n.emplaceBack(o[0],o[1]);else{for(var s=r;s<t;s++)n.emplaceBack(i);this.statistics.max=Math.max(this.statistics.max,i)}},Lo.prototype.updatePaintArray=function(t,e,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:0},n,r);if("color"===this.type)for(var a=ee(o),s=t;s<e;s++)i.emplace(s,a[0],a[1]);else{for(var u=t;u<e;u++)i.emplace(u,o);this.statistics.max=Math.max(this.statistics.max,o)}},Lo.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Lo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Lo.prototype.setUniforms=function(t,e){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],0)};var Do=function(t,e,n,r,i){this.expression=t,this.name=e,this.type=n,this.useIntegerZoom=r,this.zoom=i,this.statistics={max:-1/0};var o="color"===n?bo:_o;this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===n?4:2,offset:0}],this.paintVertexArray=new o};Do.prototype.defines=function(){return[]},Do.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,r=n.length;n.reserve(t);var i=this.expression.evaluate(new ji(this.zoom),e,{}),o=this.expression.evaluate(new ji(this.zoom+1),e,{});if("color"===this.type)for(var a=ee(i),s=ee(o),u=r;u<t;u++)n.emplaceBack(a[0],a[1],s[0],s[1]);else{for(var l=r;l<t;l++)n.emplaceBack(i,o);this.statistics.max=Math.max(this.statistics.max,i,o)}},Do.prototype.updatePaintArray=function(t,e,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:this.zoom},n,r),a=this.expression.evaluate({zoom:this.zoom+1},n,r);if("color"===this.type)for(var s=ee(o),u=ee(a),l=t;l<e;l++)i.emplace(l,s[0],s[1],u[0],u[1]);else{for(var c=t;c<e;c++)i.emplace(c,o,a);this.statistics.max=Math.max(this.statistics.max,o,a)}},Do.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Do.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Do.prototype.interpolationFactor=function(t){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(t),this.zoom,this.zoom+1):this.expression.interpolationFactor(t,this.zoom,this.zoom+1)},Do.prototype.setUniforms=function(t,e,n){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],this.interpolationFactor(n.zoom))};var Bo=function(){this.binders={},this.cacheKey="",this._buffers=[],this._idMap={},this._bufferOffset=0};Bo.createDynamic=function(t,e,n){var r=new Bo,i=[];for(var o in t.paint._values)if(n(o)){var a=t.paint.get(o);if(a instanceof Gi&&H(a.property.specification)){var s=ne(o,t.type),u=a.property.specification.type,l=a.property.useIntegerZoom;"constant"===a.value.kind?(r.binders[o]=new Ro(a.value,s,u),i.push("/u_"+s)):"source"===a.value.kind?(r.binders[o]=new Lo(a.value,s,u),i.push("/a_"+s)):(r.binders[o]=new Do(a.value,s,u,l,e),i.push("/z_"+s))}}return r.cacheKey=i.sort().join(""),r},Bo.prototype.populatePaintArrays=function(t,e,n){for(var r in this.binders)this.binders[r].populatePaintArray(t,e);if(e.id){var i=String(e.id);this._idMap[i]=this._idMap[i]||[],this._idMap[i].push({index:n,start:this._bufferOffset,end:t})}this._bufferOffset=t},Bo.prototype.updatePaintArrays=function(t,e,n){var r=!1;for(var i in t){var o=this._idMap[i];if(o)for(var a=t[i],s=0,u=o;s<u.length;s+=1){var l=u[s],c=e.feature(l.index);for(var p in this.binders){var h=this.binders[p];if(!(h instanceof Ro)&&!0===h.expression.isStateDependent){var f=n.paint.get(p);h.expression=f.value,h.updatePaintArray(l.start,l.end,c,a),r=!0}}}}return r},Bo.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},Bo.prototype.setUniforms=function(t,e,n,r){for(var i in this.binders)this.binders[i].setUniforms(t,e,r,n.get(i))},Bo.prototype.getPaintVertexBuffers=function(){return this._buffers},Bo.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var n=[];for(var r in this.binders){var i=this.binders[r];(i instanceof Lo||i instanceof Do)&&i.paintVertexBuffer&&n.push(i.paintVertexBuffer)}this._buffers=n},Bo.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var jo=function(t,e,n,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var i=0,o=e;i<o.length;i+=1){var a=o[i];this.programConfigurations[a.id]=Bo.createDynamic(a,n,r),this.programConfigurations[a.id].layoutAttributes=t}this.needsUpload=!1};jo.prototype.populatePaintArrays=function(t,e,n){for(var r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(t,e,n);this.needsUpload=!0},jo.prototype.updatePaintArrays=function(t,e,n){for(var r=0,i=n;r<i.length;r+=1){var o=i[r];this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,e,o)||this.needsUpload}},jo.prototype.get=function(t){return this.programConfigurations[t]},jo.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},jo.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Gt("ConstantBinder",Ro),Gt("SourceExpressionBinder",Lo),Gt("CompositeExpressionBinder",Do),Gt("ProgramConfiguration",Bo,{omit:["_buffers"]}),Gt("ProgramConfigurationSet",jo);var Fo,No=8192,Uo=(Fo=16,{min:-1*Math.pow(2,Fo-1),max:Math.pow(2,Fo-1)-1}),Vo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new no,this.indexArray=new vo,this.segments=new Mo,this.programConfigurations=new jo(Io,t.layers,t.zoom)};Vo.prototype.populate=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new ji(this.zoom),o)){var u=re(o);this.addFeature(o,u,a),e.featureIndex.insert(o,u,a,s,this.index)}}},Vo.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers)},Vo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Vo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Vo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Io),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Vo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Vo.prototype.addFeature=function(t,e,n){for(var r=0,i=e;r<i.length;r+=1)for(var o=0,a=i[r];o<a.length;o+=1){var s=a[o],u=s.x,l=s.y;if(!(u<0||u>=No||l<0||l>=No)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=c.vertexLength;ie(this.layoutVertexArray,u,l,-1,-1),ie(this.layoutVertexArray,u,l,1,-1),ie(this.layoutVertexArray,u,l,1,1),ie(this.layoutVertexArray,u,l,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n)},Gt("CircleBucket",Vo,{omit:["layers"]});var qo={paint:new Yi({"circle-radius":new Hi(mr.paint_circle["circle-radius"]),"circle-color":new Hi(mr.paint_circle["circle-color"]),"circle-blur":new Hi(mr.paint_circle["circle-blur"]),"circle-opacity":new Hi(mr.paint_circle["circle-opacity"]),"circle-translate":new Wi(mr.paint_circle["circle-translate"]),"circle-translate-anchor":new Wi(mr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Wi(mr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Wi(mr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Hi(mr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Hi(mr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Hi(mr.paint_circle["circle-stroke-opacity"])})},$o="undefined"!=typeof Float32Array?Float32Array:Array;Math.PI;var Go,Zo=be,Wo=(Go=_e(),function(t,e,n,r,i,o){var a,s;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)Go[0]=t[a],Go[1]=t[a+1],Go[2]=t[a+2],i(Go,Go,o),t[a]=Go[0],t[a+1]=Go[1],t[a+2]=Go[2];return t}),Ho=function(){var t=Te();return function(e,n,r,i,o,a){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();_e(),xe(1,0,0),xe(0,1,0),Pe(),Pe(),ge(),function(){var t;(t=new $o(2))[0]=0,t[1]=0}();var Xo=function(t){function e(e){t.call(this,e,qo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Vo(t)},e.prototype.queryRadius=function(t){var e=t;return me("circle-radius",this,e)+me("circle-stroke-width",this,e)+ye(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a,s){for(var u=ve(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),l=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),c="map"===this.paint.get("circle-pitch-alignment"),p=c?u:function(t,e,n){return t.map(function(t){return t.map(function(t){return Ae(t,e,n)})})}(u,s,o),h=c?l*a:l,f=0,d=r;f<d.length;f+=1)for(var m=0,y=d[f];m<y.length;m+=1){var v=y[m],g=c?v:Ae(v,s,o),_=h,b=Ce([],[v.x,v.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=b[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=o.cameraToCenterDistance/b[3]),oe(p,g,_))return!0}return!1},e}(Ji),Ko=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Vo);Gt("HeatmapBucket",Ko,{omit:["layers"]});var Yo=function(t,e){Oe(this,t,1,e)};Yo.prototype.resize=function(t){Ie(this,t,1)},Yo.prototype.clone=function(){return new Yo({width:this.width,height:this.height},new Uint8Array(this.data))},Yo.copy=function(t,e,n,r,i){Me(t,e,n,r,i,1)};var Jo=function(t,e){Oe(this,t,4,e)};Jo.prototype.resize=function(t){Ie(this,t,4)},Jo.prototype.clone=function(){return new Jo({width:this.width,height:this.height},new Uint8Array(this.data))},Jo.copy=function(t,e,n,r,i){Me(t,e,n,r,i,4)},Gt("AlphaImage",Yo),Gt("RGBAImage",Jo);var Qo={paint:new Yi({"heatmap-radius":new Hi(mr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Hi(mr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Wi(mr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ki(mr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Wi(mr.paint_heatmap["heatmap-opacity"])})},ta=function(t){function e(e){t.call(this,e,Qo),this._updateColorRamp()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Ko(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){var t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=ze(t,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Ji),ea={paint:new Yi({"hillshade-illumination-direction":new Wi(mr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Wi(mr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Wi(mr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Wi(mr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Wi(mr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Wi(mr.paint_hillshade["hillshade-accent-color"])})},na=function(t){function e(e){t.call(this,e,ea)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Ji),ra=Qt([{name:"a_pos",components:2,type:"Int16"}],4).members,ia=Re,oa=Re;Re.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(nn(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(nn(t,l,c,n))}var p=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,f=r[s+1]*n,d=r[s+2]*n;p+=Math.abs((t[h]-t[d])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[d+1]-t[h+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},Re.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},ia.default=oa;var aa=rn,sa=rn;aa.default=sa;var ua=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new no,this.indexArray=new vo,this.indexArray2=new go,this.programConfigurations=new jo(ra,t.layers,t.zoom),this.segments=new Mo,this.segments2=new Mo};ua.prototype.populate=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new ji(this.zoom),o)){var u=re(o);this.addFeature(o,u,a),e.featureIndex.insert(o,u,a,s,this.index)}}},ua.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers)},ua.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ua.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ua.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ra),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},ua.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ua.prototype.addFeature=function(t,e,n){for(var r=0,i=sn(e,500);r<i.length;r+=1){for(var o=i[r],a=0,s=0,u=o;s<u.length;s+=1)a+=u[s].length;for(var l=this.segments.prepareSegment(a,this.layoutVertexArray,this.indexArray),c=l.vertexLength,p=[],h=[],f=0,d=o;f<d.length;f+=1){var m=d[f];if(0!==m.length){m!==o[0]&&h.push(p.length/2);var y=this.segments2.prepareSegment(m.length,this.layoutVertexArray,this.indexArray2),v=y.vertexLength;this.layoutVertexArray.emplaceBack(m[0].x,m[0].y),this.indexArray2.emplaceBack(v+m.length-1,v),p.push(m[0].x),p.push(m[0].y);for(var g=1;g<m.length;g++)this.layoutVertexArray.emplaceBack(m[g].x,m[g].y),this.indexArray2.emplaceBack(v+g-1,v+g),p.push(m[g].x),p.push(m[g].y);y.vertexLength+=m.length,y.primitiveLength+=m.length}}for(var _=ia(p,h),b=0;b<_.length;b+=3)this.indexArray.emplaceBack(c+_[b],c+_[b+1],c+_[b+2]);l.vertexLength+=a,l.primitiveLength+=_.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n)},Gt("FillBucket",ua,{omit:["layers"]});var la={paint:new Yi({"fill-antialias":new Wi(mr.paint_fill["fill-antialias"]),"fill-opacity":new Hi(mr.paint_fill["fill-opacity"]),"fill-color":new Hi(mr.paint_fill["fill-color"]),"fill-outline-color":new Hi(mr.paint_fill["fill-outline-color"]),"fill-translate":new Wi(mr.paint_fill["fill-translate"]),"fill-translate-anchor":new Wi(mr.paint_fill["fill-translate-anchor"]),"fill-pattern":new Xi(mr.paint_fill["fill-pattern"])})},ca=function(t){function e(e){t.call(this,e,la)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(t){this.paint=this._transitioningPaint.possiblyEvaluate(t);var e=this.paint._values["fill-outline-color"];"constant"===e.value.kind&&void 0===e.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new ua(t)},e.prototype.queryRadius=function(){return ye(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){return ae(ve(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},e}(Ji),pa=Qt([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,ha=Math.pow(2,13),fa=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new io,this.indexArray=new vo,this.programConfigurations=new jo(pa,t.layers,t.zoom),this.segments=new Mo};fa.prototype.populate=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new ji(this.zoom),o)){var u=re(o);this.addFeature(o,u,a),e.featureIndex.insert(o,u,a,s,this.index)}}},fa.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers)},fa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},fa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},fa.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,pa),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},fa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},fa.prototype.addFeature=function(t,e,n){for(var r=0,i=sn(e,500);r<i.length;r+=1){for(var o=i[r],a=0,s=0,u=o;s<u.length;s+=1)a+=u[s].length;for(var l=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),c=0,p=o;c<p.length;c+=1){var h=p[c];if(0!==h.length&&!pn(h))for(var f=0,d=0;d<h.length;d++){var m=h[d];if(d>=1){var y=h[d-1];if(!cn(m,y)){l.vertexLength+4>Mo.MAX_VERTEX_ARRAY_LENGTH&&(l=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=m.sub(y)._perp()._unit(),g=y.dist(m);f+g>32768&&(f=0),ln(this.layoutVertexArray,m.x,m.y,v.x,v.y,0,0,f),ln(this.layoutVertexArray,m.x,m.y,v.x,v.y,0,1,f),f+=g,ln(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,0,f),ln(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,1,f);var _=l.vertexLength;this.indexArray.emplaceBack(_,_+1,_+2),this.indexArray.emplaceBack(_+1,_+2,_+3),l.vertexLength+=4,l.primitiveLength+=2}}}}l.vertexLength+a>Mo.MAX_VERTEX_ARRAY_LENGTH&&(l=this.segments.prepareSegment(a,this.layoutVertexArray,this.indexArray));for(var b=[],x=[],w=l.vertexLength,E=0,S=o;E<S.length;E+=1){var T=S[E];if(0!==T.length){T!==o[0]&&x.push(b.length/2);for(var k=0;k<T.length;k++){var C=T[k];ln(this.layoutVertexArray,C.x,C.y,0,0,1,1,0),b.push(C.x),b.push(C.y)}}}for(var P=ia(b,x),A=0;A<P.length;A+=3)this.indexArray.emplaceBack(w+P[A],w+P[A+1],w+P[A+2]);l.primitiveLength+=P.length/3,l.vertexLength+=a}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n)},Gt("FillExtrusionBucket",fa,{omit:["layers"]});var da={paint:new Yi({"fill-extrusion-opacity":new Wi(mr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Hi(mr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Wi(mr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Wi(mr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Xi(mr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Hi(mr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Hi(mr["paint_fill-extrusion"]["fill-extrusion-base"])})},ma=function(t){function e(e){t.call(this,e,da)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new fa(t)},e.prototype.queryRadius=function(){return ye(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){return ae(ve(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),r)},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e}(Ji),ya=Qt([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,va=hn;hn.types=["Unknown","Point","LineString","Polygon"],hn.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];t.pos<n;){if(i<=0){var u=t.readVarint();r=7&u,i=u>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new or(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},hn.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},hn.prototype.toGeoJSON=function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e],r=180-360*(n.y+u)/a;t[e]=[360*(n.x+s)/a-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var i,o,a=this.extent*Math.pow(2,n),s=this.extent*t,u=this.extent*e,l=this.loadGeometry(),c=hn.types[this.type];switch(this.type){case 1:var p=[];for(i=0;i<l.length;i++)p[i]=l[i][0];r(l=p);break;case 2:for(i=0;i<l.length;i++)r(l[i]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=dn(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(l),i=0;i<l.length;i++)for(o=0;o<l[i].length;o++)r(l[i][o])}1===l.length?l=l[0]:c="Multi"+c;var h={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(h.id=this.id),h};var ga=mn;mn.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new va(this._pbf,e,this.extent,this._keys,this._values)};var _a={VectorTile:function(t,e){this.layers=t.readFields(vn,{},e)},VectorTileFeature:va,VectorTileLayer:ga},ba=_a.VectorTileFeature.types,xa=63,wa=Math.cos(Math.PI/180*37.5),Ea=.5,Sa=Math.pow(2,14)/Ea,Ta=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new oo,this.indexArray=new vo,this.programConfigurations=new jo(ya,t.layers,t.zoom),this.segments=new Mo};Ta.prototype.populate=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new ji(this.zoom),o)){var u=re(o);this.addFeature(o,u,a),e.featureIndex.insert(o,u,a,s,this.index)}}},Ta.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers)},Ta.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ta.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ta.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ya),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ta.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ta.prototype.addFeature=function(t,e,n){for(var r=this.layers[0].layout,i=r.get("line-join").evaluate(t,{}),o=r.get("line-cap"),a=r.get("line-miter-limit"),s=r.get("line-round-limit"),u=0,l=e;u<l.length;u+=1){var c=l[u];this.addLine(c,t,i,o,a,s,n)}},Ta.prototype.addLine=function(t,e,n,r,i,o,a){var s=null;e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")&&(s={start:e.properties.mapbox_clip_start,end:e.properties.mapbox_clip_end,tileTotal:void 0});for(var u="Polygon"===ba[e.type],l=t.length;l>=2&&t[l-1].equals(t[l-2]);)l--;for(var c=0;c<l-1&&t[c].equals(t[c+1]);)c++;if(!(l<(u?3:2))){s&&(s.tileTotal=function(t,e,n){for(var r,i,o=0,a=e;a<n-1;a++)r=t[a],i=t[a+1],o+=r.dist(i);return o}(t,c,l)),"bevel"===n&&(i=1.05);var p=No/(512*this.overscaling)*15,h=t[c],f=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);this.distance=0;var d,m,y,v=r,g=u?"butt":r,_=!0,b=void 0,x=void 0,w=void 0,E=void 0;this.e1=this.e2=this.e3=-1,u&&(d=t[l-2],E=h.sub(d)._unit()._perp());for(var S=c;S<l;S++)if(!(x=u&&S===l-1?t[c+1]:t[S+1])||!t[S].equals(x)){E&&(w=E),d&&(b=d),d=t[S],E=x?x.sub(d)._unit()._perp():w;var T=(w=w||E).add(E);0===T.x&&0===T.y||T._unit();var k=T.x*E.x+T.y*E.y,C=0!==k?1/k:1/0,P=k<wa&&b&&x;if(P&&S>c){var A=d.dist(b);if(A>2*p){var O=d.sub(d.sub(b)._mult(p/A)._round());this.distance+=O.dist(b),this.addCurrentVertex(O,this.distance,w.mult(1),0,0,!1,f,s),b=O}}var I=b&&x,M=I?n:x?v:g;if(I&&"round"===M&&(C<o?M="miter":C<=2&&(M="fakeround")),"miter"===M&&C>i&&(M="bevel"),"bevel"===M&&(C>2&&(M="flipbevel"),C<i&&(M="miter")),b&&(this.distance+=d.dist(b)),"miter"===M)T._mult(C),this.addCurrentVertex(d,this.distance,T,0,0,!1,f,s);else if("flipbevel"===M){if(C>100)T=E.clone().mult(-1);else{var z=w.x*E.y-w.y*E.x>0?-1:1,R=C*w.add(E).mag()/w.sub(E).mag();T._perp()._mult(R*z)}this.addCurrentVertex(d,this.distance,T,0,0,!1,f,s),this.addCurrentVertex(d,this.distance,T.mult(-1),0,0,!1,f,s)}else if("bevel"===M||"fakeround"===M){var L=w.x*E.y-w.y*E.x>0,D=-Math.sqrt(C*C-1);if(L?(y=0,m=D):(m=0,y=D),_||this.addCurrentVertex(d,this.distance,w,m,y,!1,f,s),"fakeround"===M){for(var B=Math.floor(8*(.5-(k-.5))),j=void 0,F=0;F<B;F++)j=E.mult((F+1)/(B+1))._add(w)._unit(),this.addPieSliceVertex(d,this.distance,j,L,f,s);this.addPieSliceVertex(d,this.distance,T,L,f,s);for(var N=B-1;N>=0;N--)j=w.mult((N+1)/(B+1))._add(E)._unit(),this.addPieSliceVertex(d,this.distance,j,L,f,s)}x&&this.addCurrentVertex(d,this.distance,E,-m,-y,!1,f,s)}else"butt"===M?(_||this.addCurrentVertex(d,this.distance,w,0,0,!1,f,s),x&&this.addCurrentVertex(d,this.distance,E,0,0,!1,f,s)):"square"===M?(_||(this.addCurrentVertex(d,this.distance,w,1,1,!1,f,s),this.e1=this.e2=-1),x&&this.addCurrentVertex(d,this.distance,E,-1,-1,!1,f,s)):"round"===M&&(_||(this.addCurrentVertex(d,this.distance,w,0,0,!1,f,s),this.addCurrentVertex(d,this.distance,w,1,1,!0,f,s),this.e1=this.e2=-1),x&&(this.addCurrentVertex(d,this.distance,E,-1,-1,!0,f,s),this.addCurrentVertex(d,this.distance,E,0,0,!1,f,s)));if(P&&S<l-1){var U=d.dist(x);if(U>2*p){var V=d.add(x.sub(d)._mult(p/U)._round());this.distance+=V.dist(d),this.addCurrentVertex(V,this.distance,E.mult(1),0,0,!1,f,s),d=V}}_=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a)}},Ta.prototype.addCurrentVertex=function(t,e,n,r,i,o,a,s){var u,l=this.layoutVertexArray,c=this.indexArray;s&&(e=_n(e,s)),u=n.clone(),r&&u._sub(n.perp()._mult(r)),gn(l,t,u,o,!1,r,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),i&&u._sub(n.perp()._mult(i)),gn(l,t,u,o,!0,-i,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>Sa/2&&!s&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,r,i,o,a))},Ta.prototype.addPieSliceVertex=function(t,e,n,r,i,o){n=n.mult(r?-1:1);var a=this.layoutVertexArray,s=this.indexArray;o&&(e=_n(e,o)),gn(a,t,n,!1,r,0,e),this.e3=i.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),r?this.e2=this.e3:this.e1=this.e3},Gt("LineBucket",Ta,{omit:["layers"]});var ka=new Yi({"line-cap":new Wi(mr.layout_line["line-cap"]),"line-join":new Hi(mr.layout_line["line-join"]),"line-miter-limit":new Wi(mr.layout_line["line-miter-limit"]),"line-round-limit":new Wi(mr.layout_line["line-round-limit"])}),Ca={paint:new Yi({"line-opacity":new Hi(mr.paint_line["line-opacity"]),"line-color":new Hi(mr.paint_line["line-color"]),"line-translate":new Wi(mr.paint_line["line-translate"]),"line-translate-anchor":new Wi(mr.paint_line["line-translate-anchor"]),"line-width":new Hi(mr.paint_line["line-width"]),"line-gap-width":new Hi(mr.paint_line["line-gap-width"]),"line-offset":new Hi(mr.paint_line["line-offset"]),"line-blur":new Hi(mr.paint_line["line-blur"]),"line-dasharray":new Xi(mr.paint_line["line-dasharray"]),"line-pattern":new Xi(mr.paint_line["line-pattern"]),"line-gradient":new Ki(mr.paint_line["line-gradient"])}),layout:ka},Pa=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new ji(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,r,i){return n=u({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,r,i)},e}(Hi))(Ca.paint.properties["line-width"].specification);Pa.useIntegerZoom=!0;var Aa=function(t){function e(e){t.call(this,e,Ca)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=ze(t,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=Pa.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new Ta(t)},e.prototype.queryRadius=function(t){var e=t,n=bn(me("line-width",this,e),me("line-gap-width",this,e)),r=me("line-offset",this,e);return n/2+Math.abs(r)+ye(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){var s=ve(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),u=a/2*bn(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),l=this.paint.get("line-offset").evaluate(e,n);return l&&(r=function(t,e){for(var n=[],r=new or(0,0),i=0;i<t.length;i++){for(var o=t[i],a=[],s=0;s<o.length;s++){var u=o[s-1],l=o[s],c=o[s+1],p=0===s?r:l.sub(u)._unit()._perp(),h=s===o.length-1?r:c.sub(l)._unit()._perp(),f=p._add(h)._unit(),d=f.x*h.x+f.y*h.y;f._mult(1/d),a.push(f._mult(e)._add(l))}n.push(a)}return n}(r,l*a)),se(s,r,u)},e}(Ji),Oa=Qt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),Ia=Qt([{name:"a_projected_pos",components:3,type:"Float32"}],4),Ma=(Qt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Qt([{name:"a_placed",components:2,type:"Uint8"}],4)),za=(Qt([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),Qt([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ra=Qt([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);Qt([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),Qt([{type:"Float32",name:"offsetX"}]),Qt([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var La={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Da=function(t){function e(e,n,r,i){t.call(this,e,n),this.angle=r,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(or);Gt("Anchor",Da);var Ba=_a.VectorTileFeature.types,ja=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],Fa=function(t){this.layoutVertexArray=new ao,this.indexArray=new vo,this.programConfigurations=t,this.segments=new Mo,this.dynamicLayoutVertexArray=new so,this.opacityVertexArray=new uo,this.placedSymbolArray=new So};Fa.prototype.upload=function(t,e,n,r){n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Oa.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Ia.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,ja,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t)},Fa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Gt("SymbolBuffers",Fa);var Na=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new Mo,this.collisionVertexArray=new po};Na.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Ma.members,!0)},Na.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Gt("CollisionBuffers",Na);var Ua=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=wn(this.zoom,e["text-size"]),this.iconSizeData=wn(this.zoom,e["icon-size"]);var n=this.layers[0].layout;this.sortFeaturesByY=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sourceID=t.sourceID};Ua.prototype.createArrays=function(){this.text=new Fa(new jo(Oa.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new Fa(new jo(Oa.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new Na(co,za.members,go),this.collisionCircle=new Na(co,Ra.members,vo),this.glyphOffsetArray=new ko,this.lineVertexArray=new Po},Ua.prototype.populate=function(t,e){var n=this.layers[0],r=n.layout,i=r.get("text-font"),o=r.get("text-field"),a=r.get("icon-image"),s=("constant"!==o.value.kind||o.value.value.length>0)&&("constant"!==i.value.kind||i.value.value.length>0),u="constant"!==a.value.kind||a.value.value&&a.value.value.length>0;if(this.features=[],s||u){for(var l=e.iconDependencies,c=e.glyphDependencies,p=new ji(this.zoom),h=0,f=t;h<f.length;h+=1){var d=f[h],m=d.feature,y=d.index,v=d.sourceLayerIndex;if(n._featureFilter(p,m)){var g=void 0;s&&(g=xn(g=n.getValueAndResolveTokens("text-field",m),n,m));var _=void 0;if(u&&(_=n.getValueAndResolveTokens("icon-image",m)),g||_){var b={text:g,icon:_,index:y,sourceLayerIndex:v,geometry:re(m),properties:m.properties,type:Ba[m.type]};if(void 0!==m.id&&(b.id=m.id),this.features.push(b),_&&(l[_]=!0),g)for(var x=i.evaluate(m,{}).join(","),w=c[x]=c[x]||{},E="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement"),S=Ht(g),T=0;T<g.length;T++)if(w[g.charCodeAt(T)]=!0,E&&S){var k=La[g.charAt(T)];k&&(w[k.charCodeAt(0)]=!0)}}}}"line"===r.get("symbol-placement")&&(this.features=function(t){function e(e){s.push(t[e]),u++}function n(t,e,n){var r=a[t];return delete a[t],a[e]=r,s[r].geometry[0].pop(),s[r].geometry[0]=s[r].geometry[0].concat(n[0]),r}function r(t,e,n){var r=o[e];return delete o[e],o[t]=r,s[r].geometry[0].shift(),s[r].geometry[0]=n[0].concat(s[r].geometry[0]),r}function i(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var o={},a={},s=[],u=0,l=0;l<t.length;l++){var c=t[l],p=c.geometry,h=c.text;if(h){var f=i(h,p),d=i(h,p,!0);if(f in a&&d in o&&a[f]!==o[d]){var m=r(f,d,p),y=n(f,d,s[m].geometry);delete o[f],delete a[d],a[i(h,s[y].geometry,!0)]=y,s[m].geometry=null}else f in a?n(f,d,p):d in o?r(f,d,p):(e(l),o[f]=u-1,a[d]=u-1)}else e(l)}return s.filter(function(t){return t.geometry})}(this.features))}},Ua.prototype.update=function(t,e){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers))},Ua.prototype.isEmpty=function(){return 0===this.symbolInstances.length},Ua.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ua.prototype.upload=function(t){this.uploaded||(this.collisionBox.upload(t),this.collisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ua.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},Ua.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},Ua.prototype.addSymbols=function(t,e,n,r,i,o,a,s,u,l){for(var c=t.indexArray,p=t.layoutVertexArray,h=t.dynamicLayoutVertexArray,f=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray),d=this.glyphOffsetArray.length,m=f.vertexLength,y=0,v=e;y<v.length;y+=1){var g=v[y],_=g.tl,b=g.tr,x=g.bl,w=g.br,E=g.tex,S=f.vertexLength,T=g.glyphOffset[1];En(p,s.x,s.y,_.x,T+_.y,E.x,E.y,n),En(p,s.x,s.y,b.x,T+b.y,E.x+E.w,E.y,n),En(p,s.x,s.y,x.x,T+x.y,E.x,E.y+E.h,n),En(p,s.x,s.y,w.x,T+w.y,E.x+E.w,E.y+E.h,n),Sn(h,s,0),c.emplaceBack(S,S+1,S+2),c.emplaceBack(S+1,S+2,S+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(g.glyphOffset[0])}t.placedSymbolArray.emplaceBack(s.x,s.y,d,this.glyphOffsetArray.length-d,m,u,l,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,!1),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,o,o.index)},Ua.prototype._addCollisionDebugVertex=function(t,e,n,r,i){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r.x,r.y,Math.round(i.x),Math.round(i.y))},Ua.prototype.addCollisionDebugVertices=function(t,e,n,r,i,o,a,s){var u=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),l=u.vertexLength,c=i.layoutVertexArray,p=i.collisionVertexArray;if(this._addCollisionDebugVertex(c,p,o,a.anchor,new or(t,e)),this._addCollisionDebugVertex(c,p,o,a.anchor,new or(n,e)),this._addCollisionDebugVertex(c,p,o,a.anchor,new or(n,r)),this._addCollisionDebugVertex(c,p,o,a.anchor,new or(t,r)),u.vertexLength+=4,s){var h=i.indexArray;h.emplaceBack(l,l+1,l+2),h.emplaceBack(l,l+2,l+3),u.primitiveLength+=2}else{var f=i.indexArray;f.emplaceBack(l,l+1),f.emplaceBack(l+1,l+2),f.emplaceBack(l+2,l+3),f.emplaceBack(l+3,l),u.primitiveLength+=4}},Ua.prototype.generateCollisionDebugBuffers=function(){for(var t=0,e=this.symbolInstances;t<e.length;t+=1){var n=e[t];n.textCollisionFeature={boxStartIndex:n.textBoxStartIndex,boxEndIndex:n.textBoxEndIndex},n.iconCollisionFeature={boxStartIndex:n.iconBoxStartIndex,boxEndIndex:n.iconBoxEndIndex};for(var r=0;r<2;r++){var i=n[0===r?"textCollisionFeature":"iconCollisionFeature"];if(i)for(var o=i.boxStartIndex;o<i.boxEndIndex;o++){var a=this.collisionBoxArray.get(o),s=a.x1,u=a.y1,l=a.x2,c=a.y2,p=a.radius>0;this.addCollisionDebugVertices(s,u,l,c,p?this.collisionCircle:this.collisionBox,a.anchorPoint,n,p)}}}},Ua.prototype.deserializeCollisionBoxes=function(t,e,n,r,i){for(var o={},a=e;a<n;a++){var s=t.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},o.textFeatureIndex=s.featureIndex;break}o.textCircles||(o.textCircles=[],o.textFeatureIndex=s.featureIndex),o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var u=r;u<i;u++){var l=t.get(u);if(0===l.radius){o.iconBox={x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,anchorPointX:l.anchorPointX,anchorPointY:l.anchorPointY},o.iconFeatureIndex=l.featureIndex;break}}return o},Ua.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ua.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ua.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},Ua.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},Ua.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var n=[],r=0;r<this.symbolInstances.length;r++)n.push(r);var i=Math.sin(t),o=Math.cos(t);n.sort(function(t,n){var r=e.symbolInstances[t],a=e.symbolInstances[n];return(0|Math.round(i*r.anchor.x+o*r.anchor.y))-(0|Math.round(i*a.anchor.x+o*a.anchor.y))||a.featureIndex-r.featureIndex}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var a=0,s=n;a<s.length;a+=1){var u=s[a],l=e.symbolInstances[u];e.featureSortOrder.push(l.featureIndex);for(var c=0,p=l.placedTextSymbolIndices;c<p.length;c+=1)for(var h=p[c],f=e.text.placedSymbolArray.get(h),d=f.vertexStartIndex+4*f.numGlyphs,m=f.vertexStartIndex;m<d;m+=4)e.text.indexArray.emplaceBack(m,m+1,m+2),e.text.indexArray.emplaceBack(m+1,m+2,m+3);var y=e.icon.placedSymbolArray.get(u);if(y.numGlyphs){var v=y.vertexStartIndex;e.icon.indexArray.emplaceBack(v,v+1,v+2),e.icon.indexArray.emplaceBack(v+1,v+2,v+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Gt("SymbolBucket",Ua,{omit:["layers","collisionBoxArray","features","compareText"],shallow:["symbolInstances"]}),Ua.MAX_GLYPHS=65535,Ua.addDynamicAttributes=Sn;var Va=new Yi({"symbol-placement":new Wi(mr.layout_symbol["symbol-placement"]),"symbol-spacing":new Wi(mr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Wi(mr.layout_symbol["symbol-avoid-edges"]),"icon-allow-overlap":new Wi(mr.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Wi(mr.layout_symbol["icon-ignore-placement"]),"icon-optional":new Wi(mr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Wi(mr.layout_symbol["icon-rotation-alignment"]),"icon-size":new Hi(mr.layout_symbol["icon-size"]),"icon-text-fit":new Wi(mr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Wi(mr.layout_symbol["icon-text-fit-padding"]),"icon-image":new Hi(mr.layout_symbol["icon-image"]),"icon-rotate":new Hi(mr.layout_symbol["icon-rotate"]),"icon-padding":new Wi(mr.layout_symbol["icon-padding"]),"icon-keep-upright":new Wi(mr.layout_symbol["icon-keep-upright"]),"icon-offset":new Hi(mr.layout_symbol["icon-offset"]),"icon-anchor":new Hi(mr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Wi(mr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Wi(mr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Wi(mr.layout_symbol["text-rotation-alignment"]),"text-field":new Hi(mr.layout_symbol["text-field"]),"text-font":new Hi(mr.layout_symbol["text-font"]),"text-size":new Hi(mr.layout_symbol["text-size"]),"text-max-width":new Hi(mr.layout_symbol["text-max-width"]),"text-line-height":new Wi(mr.layout_symbol["text-line-height"]),"text-letter-spacing":new Hi(mr.layout_symbol["text-letter-spacing"]),"text-justify":new Hi(mr.layout_symbol["text-justify"]),"text-anchor":new Hi(mr.layout_symbol["text-anchor"]),"text-max-angle":new Wi(mr.layout_symbol["text-max-angle"]),"text-rotate":new Hi(mr.layout_symbol["text-rotate"]),"text-padding":new Wi(mr.layout_symbol["text-padding"]),"text-keep-upright":new Wi(mr.layout_symbol["text-keep-upright"]),"text-transform":new Hi(mr.layout_symbol["text-transform"]),"text-offset":new Hi(mr.layout_symbol["text-offset"]),"text-allow-overlap":new Wi(mr.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Wi(mr.layout_symbol["text-ignore-placement"]),"text-optional":new Wi(mr.layout_symbol["text-optional"])}),qa={paint:new Yi({"icon-opacity":new Hi(mr.paint_symbol["icon-opacity"]),"icon-color":new Hi(mr.paint_symbol["icon-color"]),"icon-halo-color":new Hi(mr.paint_symbol["icon-halo-color"]),"icon-halo-width":new Hi(mr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Hi(mr.paint_symbol["icon-halo-blur"]),"icon-translate":new Wi(mr.paint_symbol["icon-translate"]),"icon-translate-anchor":new Wi(mr.paint_symbol["icon-translate-anchor"]),"text-opacity":new Hi(mr.paint_symbol["text-opacity"]),"text-color":new Hi(mr.paint_symbol["text-color"]),"text-halo-color":new Hi(mr.paint_symbol["text-halo-color"]),"text-halo-width":new Hi(mr.paint_symbol["text-halo-width"]),"text-halo-blur":new Hi(mr.paint_symbol["text-halo-blur"]),"text-translate":new Wi(mr.paint_symbol["text-translate"]),"text-translate-anchor":new Wi(mr.paint_symbol["text-translate-anchor"])}),layout:Va},$a=function(t){function e(e){t.call(this,e,qa)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function(t,e){var n,r=this.layout.get(t).evaluate(e,{}),i=this._unevaluatedLayout._values[t];return i.isDataDriven()||ht(i.value)?r:(n=e.properties,r.replace(/{([^{}]+)}/g,function(t,e){return e in n?String(n[e]):""}))},e.prototype.createBucket=function(t){return new Ua(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(Ji),Ga={paint:new Yi({"background-color":new Wi(mr.paint_background["background-color"]),"background-pattern":new Xi(mr.paint_background["background-pattern"]),"background-opacity":new Wi(mr.paint_background["background-opacity"])})},Za=function(t){function e(e){t.call(this,e,Ga)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ji),Wa={paint:new Yi({"raster-opacity":new Wi(mr.paint_raster["raster-opacity"]),"raster-hue-rotate":new Wi(mr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Wi(mr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Wi(mr.paint_raster["raster-brightness-max"]),"raster-saturation":new Wi(mr.paint_raster["raster-saturation"]),"raster-contrast":new Wi(mr.paint_raster["raster-contrast"]),"raster-resampling":new Wi(mr.paint_raster["raster-resampling"]),"raster-fade-duration":new Wi(mr.paint_raster["raster-fade-duration"])})},Ha={circle:Xo,heatmap:ta,hillshade:na,fill:ca,"fill-extrusion":ma,line:Aa,symbol:$a,background:Za,raster:function(t){function e(e){t.call(this,e,Wa)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ji)},Xa=n(function(t,e){t.exports=function(){function t(t,e,n){n=n||{},this.w=t||64,this.h=e||64,this.autoResize=!!n.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function e(t,e,n){this.x=0,this.y=t,this.w=this.free=e,this.h=n}return t.prototype.pack=function(t,e){t=[].concat(t),e=e||{};for(var n,r,i,o,a=[],s=0;s<t.length;s++)if(n=t[s].w||t[s].width,r=t[s].h||t[s].height,i=t[s].id,n&&r){if(!(o=this.packOne(n,r,i)))continue;e.inPlace&&(t[s].x=o.x,t[s].y=o.y,t[s].id=o.id),a.push(o)}return this.shrink(),a},t.prototype.packOne=function(t,n,r){var i,o,a,s,u,l,c,p,h={freebin:-1,shelf:-1,waste:1/0},f=0;if("string"==typeof r||"number"==typeof r){if(i=this.getBin(r))return this.ref(i),i;"number"==typeof r&&(this.maxId=Math.max(r,this.maxId))}else r=++this.maxId;for(s=0;s<this.freebins.length;s++){if(n===(i=this.freebins[s]).maxh&&t===i.maxw)return this.allocFreebin(s,t,n,r);n>i.maxh||t>i.maxw||n<=i.maxh&&t<=i.maxw&&(a=i.maxw*i.maxh-t*n)<h.waste&&(h.waste=a,h.freebin=s)}for(s=0;s<this.shelves.length;s++)if(f+=(o=this.shelves[s]).h,!(t>o.free)){if(n===o.h)return this.allocShelf(s,t,n,r);n>o.h||n<o.h&&(a=(o.h-n)*t)<h.waste&&(h.freebin=-1,h.waste=a,h.shelf=s)}return-1!==h.freebin?this.allocFreebin(h.freebin,t,n,r):-1!==h.shelf?this.allocShelf(h.shelf,t,n,r):n<=this.h-f&&t<=this.w?(o=new e(f,this.w,n),this.allocShelf(this.shelves.push(o)-1,t,n,r)):this.autoResize?(u=l=this.h,((c=p=this.w)<=u||t>c)&&(p=2*Math.max(t,c)),(u<c||n>u)&&(l=2*Math.max(n,u)),this.resize(p,l),this.packOne(t,n,r)):null},t.prototype.allocFreebin=function(t,e,n,r){var i=this.freebins.splice(t,1)[0];return i.id=r,i.w=e,i.h=n,i.refcount=0,this.bins[r]=i,this.ref(i),i},t.prototype.allocShelf=function(t,e,n,r){var i=this.shelves[t].alloc(e,n,r);return this.bins[r]=i,this.ref(i),i},t.prototype.shrink=function(){if(this.shelves.length>0){for(var t=0,e=0,n=0;n<this.shelves.length;n++){var r=this.shelves[n];e+=r.h,t=Math.max(r.w-r.free,t)}this.resize(t,e)}},t.prototype.getBin=function(t){return this.bins[t]},t.prototype.ref=function(t){if(1==++t.refcount){var e=t.h;this.stats[e]=1+(0|this.stats[e])}return t.refcount},t.prototype.unref=function(t){return 0===t.refcount?0:(0==--t.refcount&&(this.stats[t.h]--,delete this.bins[t.id],this.freebins.push(t)),t.refcount)},t.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},t.prototype.resize=function(t,e){this.w=t,this.h=e;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(t);return!0},e.prototype.alloc=function(t,e,n){if(t>this.free||e>this.h)return null;var r=this.x;return this.x+=t,this.free-=t,new function(t,e,n,r,i,o,a){this.id=t,this.x=e,this.y=n,this.w=r,this.h=i,this.maxw=o||r,this.maxh=a||i,this.refcount=0}(n,r,this.y,t,e,t,this.h)},e.prototype.resize=function(t){return this.free+=t-this.w,this.w=t,!0},t}()}),Ka=function(t,e){var n=e.pixelRatio;this.paddedRect=t,this.pixelRatio=n},Ya={tl:{configurable:!0},br:{configurable:!0},displaySize:{configurable:!0}};Ya.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Ya.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Ya.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ka.prototype,Ya);var Ja=function(t){var e=new Jo({width:0,height:0}),n={},r=new Xa(0,0,{autoResize:!0});for(var i in t){var o=t[i],a=r.packOne(o.data.width+2,o.data.height+2);e.resize({width:r.w,height:r.h}),Jo.copy(o.data,e,{x:0,y:0},{x:a.x+1,y:a.y+1},o.data),n[i]=new Ka(a,o)}r.shrink(),e.resize({width:r.w,height:r.h}),this.image=e,this.positions=n};Gt("ImagePosition",Ka),Gt("ImageAtlas",Ja);var Qa=self.HTMLImageElement,ts=self.HTMLCanvasElement,es=self.HTMLVideoElement,ns=self.ImageData,rs=function(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)};rs.prototype.update=function(t,e){var n=t.width,r=t.height,i=!this.size||this.size[0]!==n||this.size[1]!==r,o=this.context,a=o.gl;this.useMipmap=Boolean(e&&e.useMipmap),a.bindTexture(a.TEXTURE_2D,this.texture),i?(this.size=[n,r],o.pixelStoreUnpack.set(1),this.format!==a.RGBA||e&&!1===e.premultiply||o.pixelStoreUnpackPremultiplyAlpha.set(!0),t instanceof Qa||t instanceof ts||t instanceof es||t instanceof ns?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,t):a.texImage2D(a.TEXTURE_2D,0,this.format,n,r,0,this.format,a.UNSIGNED_BYTE,t.data)):t instanceof Qa||t instanceof ts||t instanceof es||t instanceof ns?a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,t):a.texSubImage2D(a.TEXTURE_2D,0,0,0,n,r,a.RGBA,a.UNSIGNED_BYTE,t.data),this.useMipmap&&this.isSizePowerOfTwo()&&a.generateMipmap(a.TEXTURE_2D)},rs.prototype.bind=function(t,e,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},rs.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},rs.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var is=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,p=n?i-1:0,h=n?-1:1,f=t[e+p];for(p+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+p],p+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=l}return(f?-1:1)*a*Math.pow(2,o-r)},os=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,p=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+p>=1?h/u:h*Math.pow(2,1-p))*u>=2&&(a++,u/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(e*u-1)*Math.pow(2,i),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;t[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+f]=255&a,f+=d,a/=256,l-=8);t[n+f-d]|=128*m},as=Tn;Tn.Varint=0,Tn.Fixed64=1,Tn.Bytes=2,Tn.Fixed32=5,Tn.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=jn(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Nn(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=jn(this.buf,this.pos)+4294967296*jn(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=jn(this.buf,this.pos)+4294967296*Nn(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=is(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=is(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return Cn(t,r,e);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return Cn(t,r,e);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return Cn(t,r,e);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return Cn(t,r,e);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return Cn(t,r,e);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return Cn(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,u=t[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=kn(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=kn(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=kn(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=kn(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=kn(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=kn(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=kn(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=kn(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=kn(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Tn.Varint)for(;this.buf[this.pos++]>127;);else if(e===Tn.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Tn.Fixed32)this.pos+=4;else{if(e!==Tn.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Fn(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Fn(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Fn(this.buf,-1&t,this.pos),Fn(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Fn(this.buf,-1&t,this.pos),Fn(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Pn(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),os(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),os(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&Pn(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,Tn.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,An,e)},writePackedSVarint:function(t,e){this.writeMessage(t,On,e)},writePackedBoolean:function(t,e){this.writeMessage(t,zn,e)},writePackedFloat:function(t,e){this.writeMessage(t,In,e)},writePackedDouble:function(t,e){this.writeMessage(t,Mn,e)},writePackedFixed32:function(t,e){this.writeMessage(t,Rn,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,Ln,e)},writePackedFixed64:function(t,e){this.writeMessage(t,Dn,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,Bn,e)},writeBytesField:function(t,e){this.writeTag(t,Tn.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Tn.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Tn.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Tn.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Tn.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Tn.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Tn.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Tn.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Tn.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Tn.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var ss=3,us=ss,ls=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,c(["receive"],this),this.target.addEventListener("message",this.receive,!1)};ls.prototype.send=function(t,e,n,r){var i=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[i]=n);var o=[];this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:t,id:String(i),data:Zt(e,o)},o)},ls.prototype.receive=function(t){var e,n=this,r=t.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var o=function(t,e){var r=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:t?Zt(t):null,data:Zt(e,r)},r)};if("<response>"===r.type)e=this.callbacks[r.id],delete this.callbacks[r.id],e&&r.error?e(Wt(r.error)):e&&e(null,Wt(r.data));else if(void 0!==r.id&&this.parent[r.type])this.parent[r.type](r.sourceMapId,Wt(r.data),o);else if(void 0!==r.id&&this.parent.getWorkerSource){var a=r.type.split("."),s=Wt(r.data);this.parent.getWorkerSource(r.sourceMapId,a[0],s.source)[a[1]](s,o)}else this.parent[r.type](Wt(r.data))}},ls.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var cs=n(function(t,e){!function(t){function e(t,e,r){e=Math.pow(2,r)-e-1;var i=n(256*t,256*e,r),o=n(256*(t+1),256*(e+1),r);return i[0]+","+i[1]+","+o[0]+","+o[1]}function n(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}t.getURL=function(t,n,r,i,o,a){return a=a||{},t+"?"+["bbox="+e(r,i,o),"format="+(a.format||"image/png"),"service="+(a.service||"WMS"),"version="+(a.version||"1.1.1"),"request="+(a.request||"GetMap"),"srs="+(a.srs||"EPSG:3857"),"width="+(a.width||256),"height="+(a.height||256),"layers="+n].join("&")},t.getTileBBox=e,t.getMercCoords=n,Object.defineProperty(t,"__esModule",{value:!0})}(e)});e(cs);var ps=cs.getTileBBox,hs=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=$n(0,t,e,n)};hs.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},hs.prototype.url=function(t,e){var n=ps(this.x,this.y,this.z),r=function(t,e,n){for(var r,i="",o=t;o>0;o--)i+=(e&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)};var fs=function(t,e){this.wrap=t,this.canonical=e,this.key=$n(t,e.z,e.x,e.y)},ds=function(t,e,n,r,i){this.overscaledZ=t,this.wrap=e,this.canonical=new hs(n,+r,+i),this.key=$n(e,t,r,i)};ds.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},ds.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new ds(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ds(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},ds.prototype.isChildOf=function(t){var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},ds.prototype.children=function(t){if(this.overscaledZ>=t)return[new ds(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new ds(e,this.wrap,e,n,r),new ds(e,this.wrap,e,n+1,r),new ds(e,this.wrap,e,n,r+1),new ds(e,this.wrap,e,n+1,r+1)]},ds.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},ds.prototype.wrapped=function(){return new ds(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ds.prototype.unwrapTo=function(t){return new ds(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},ds.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ds.prototype.toUnwrapped=function(){return new fs(this.wrap,this.canonical)},ds.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ds.prototype.toCoordinate=function(){return new ir(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)},Gt("CanonicalTileID",hs),Gt("OverscaledTileID",ds,{omit:["posMatrix"]});var ms=function(t,e,n){if(t<=0)throw new RangeError("Level must have positive dimension");this.dim=t,this.border=e,this.stride=this.dim+2*this.border,this.data=n||new Int32Array((this.dim+2*this.border)*(this.dim+2*this.border))};ms.prototype.set=function(t,e,n){this.data[this._idx(t,e)]=n+65536},ms.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},ms.prototype._idx=function(t,e){if(t<-this.border||t>=this.dim+this.border||e<-this.border||e>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(e+this.border)*this.stride+(t+this.border)},Gt("Level",ms);var ys=function(t,e,n){this.uid=t,this.scale=e||1,this.level=n||new ms(256,512),this.loaded=!!n};ys.prototype.loadFromImage=function(t,e){if(t.height!==t.width)throw new RangeError("DEM tiles must be square");if(e&&"mapbox"!==e&&"terrarium"!==e)return m('"'+e+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var n=this.level=new ms(t.width,t.width/2),r=t.data;this._unpackData(n,r,e||"mapbox");for(var i=0;i<n.dim;i++)n.set(-1,i,n.get(0,i)),n.set(n.dim,i,n.get(n.dim-1,i)),n.set(i,-1,n.get(i,0)),n.set(i,n.dim,n.get(i,n.dim-1));n.set(-1,-1,n.get(0,0)),n.set(n.dim,-1,n.get(n.dim-1,0)),n.set(-1,n.dim,n.get(0,n.dim-1)),n.set(n.dim,n.dim,n.get(n.dim-1,n.dim-1)),this.loaded=!0},ys.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},ys.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},ys.prototype._unpackData=function(t,e,n){for(var r={mapbox:this._unpackMapbox,terrarium:this._unpackTerrarium}[n],i=0;i<t.dim;i++)for(var o=0;o<t.dim;o++){var a=4*(i*t.dim+o);t.set(o,i,this.scale*r(e[a],e[a+1],e[a+2]))}},ys.prototype.getPixels=function(){return new Jo({width:this.level.dim+2*this.level.border,height:this.level.dim+2*this.level.border},new Uint8Array(this.level.data.buffer))},ys.prototype.backfillBorder=function(t,e,n){var r=this.level,i=t.level;if(r.dim!==i.dim)throw new Error("level mismatch (dem dimension)");var o=e*r.dim,a=e*r.dim+r.dim,u=n*r.dim,l=n*r.dim+r.dim;switch(e){case-1:o=a-1;break;case 1:a=o+1}switch(n){case-1:u=l-1;break;case 1:l=u+1}for(var c=s(o,-r.border,r.dim+r.border),p=s(a,-r.border,r.dim+r.border),h=s(u,-r.border,r.dim+r.border),f=s(l,-r.border,r.dim+r.border),d=-e*r.dim,m=-n*r.dim,y=h;y<f;y++)for(var v=c;v<p;v++)r.set(v,y,i.get(v+d,y+m))},Gt("DEMData",ys);var vs=Qt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),gs=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};gs.prototype.encode=function(t){return this._stringToNumber[t]},gs.prototype.decode=function(t){return this._numberToString[t]};var _s=function(t,e,n,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,null!=t.id&&(this.id=t.id)},bs={geometry:{configurable:!0}};bs.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},bs.geometry.set=function(t){this._geometry=t},_s.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(_s.prototype,bs);var xs=function(){this.state={},this.stateChanges={}};xs.prototype.updateState=function(t,e,n){e=String(e),this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][e]=this.stateChanges[t][e]||{},u(this.stateChanges[t][e],n)},xs.prototype.getState=function(t,e){return e=String(e),u({},(this.state[t]||{})[e],(this.stateChanges[t]||{})[e])},xs.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},xs.prototype.coalesceChanges=function(t,e){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),u(this.state[r][o],this.stateChanges[r][o]),i[o]=this.state[r][o];n[r]=i}if(this.stateChanges={},0!==Object.keys(n).length)for(var a in t)t[a].setFeatureState(n,e)};var ws=function(t,e,n){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new Ti(No,16,0),this.featureIndexArray=n||new Oo};ws.prototype.insert=function(t,e,n,r,i){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var a=0;a<e.length;a++){for(var s=e[a],u=[1/0,1/0,-1/0,-1/0],l=0;l<s.length;l++){var c=s[l];u[0]=Math.min(u[0],c.x),u[1]=Math.min(u[1],c.y),u[2]=Math.max(u[2],c.x),u[3]=Math.max(u[3],c.y)}u[0]<No&&u[1]<No&&u[2]>=0&&u[3]>=0&&this.grid.insert(o,u[0],u[1],u[2],u[3])}},ws.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new _a.VectorTile(new as(this.rawTileData)).layers,this.sourceLayerCoder=new gs(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ws.prototype.query=function(t,e,n){var r=this;this.loadVTLayers();for(var i=t.params||{},o=No/t.tileSize/t.scale,a=Et(i.filter),s=t.queryGeometry,u=t.queryPadding*o,l=1/0,c=1/0,p=-1/0,h=-1/0,f=0;f<s.length;f++)for(var d=s[f],m=0;m<d.length;m++){var y=d[m];l=Math.min(l,y.x),c=Math.min(c,y.y),p=Math.max(p,y.x),h=Math.max(h,y.y)}var v=this.grid.query(l-u,c-u,p+u,h+u);v.sort(Gn);for(var g,_={},b=0;b<v.length;b++)!function(u){var l=v[u];if(l!==g){g=l;var c=r.featureIndexArray.get(l),p=null;r.loadMatchingFeature(_,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,a,i.layers,e,function(e,i){p||(p=re(e));var a={};return e.id&&(a=n.getState(i.sourceLayer||"_geojsonTileLayer",String(e.id))),i.queryIntersectsFeature(s,e,a,p,r.z,t.transform,o,t.posMatrix)})}}(b);return _},ws.prototype.loadMatchingFeature=function(t,e,n,r,i,o,a,s){var u=this.bucketLayerIDs[e];if(!o||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,u)){var l=this.sourceLayerCoder.decode(n),c=this.vtLayers[l].feature(r);if(i(new ji(this.tileID.overscaledZ),c))for(var p=0;p<u.length;p++){var h=u[p];if(!(o&&o.indexOf(h)<0)){var f=a[h];if(f&&(!s||s(c,f))){var d=new _s(c,this.z,this.x,this.y);d.layer=f.serialize();var m=t[h];void 0===m&&(m=t[h]=[]),m.push({featureIndex:r,feature:d})}}}}},ws.prototype.lookupSymbolFeatures=function(t,e,n,r,i,o){var a={};this.loadVTLayers();for(var s=Et(r),u=0,l=t;u<l.length;u+=1){var c=l[u];this.loadMatchingFeature(a,e,n,c,s,i,o)}return a},ws.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var r=0,i=n[e];r<i.length;r+=1)if(t===i[r])return!0;return!1},Gt("FeatureIndex",ws,{omit:["rawTileData","sourceLayerCoder"]});var Es=function(t,e){this.tileID=t,this.uid=l(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.expiredRequestCount=0,this.state="loading"};Es.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<er.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Es.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Es.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){if(t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==a.length){o.layers=a,o.stateDependentLayers=a.filter(function(t){return t.isStateDependent()});for(var s=0,u=a;s<u.length;s+=1)n[u[s].id]=o}}return n}(t.buckets,e.style),n)for(var r in this.buckets){var i=this.buckets[r];i instanceof Ua&&(i.justReloaded=!0)}for(var o in this.queryPadding=0,this.buckets){var a=this.buckets[o];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(a.layerIds[0]).queryRadius(a))}t.iconAtlasImage&&(this.iconAtlasImage=t.iconAtlasImage),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new wo},Es.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Es.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},Es.prototype.getBucket=function(t){return this.buckets[t.id]},Es.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var r=t.gl;this.iconAtlasImage&&(this.iconAtlasTexture=new rs(t,this.iconAtlasImage,r.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new rs(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},Es.prototype.queryRenderedFeatures=function(t,e,n,r,i,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,scale:r,tileSize:this.tileSize,posMatrix:s,transform:o,params:i,queryPadding:this.queryPadding*a},t,e):{}},Es.prototype.querySourceFeatures=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var n=this.latestFeatureIndex.loadVTLayers(),r=e?e.sourceLayer:"",i=n._geojsonTileLayer||n[r];if(i)for(var o=Et(e&&e.filter),a={z:this.tileID.overscaledZ,x:this.tileID.canonical.x,y:this.tileID.canonical.y},s=0;s<i.length;s++){var u=i.feature(s);if(o(new ji(this.tileID.overscaledZ),u)){var l=new _s(u,a.z,a.x,a.y);l.tile=a,t.push(l)}}}},Es.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},Es.prototype.setMask=function(t,e){if(!o(this.mask,t)&&(this.mask=t,this.clearMask(),!o(t,{0:!0}))){var n=new ro,r=new vo;this.segments=new Mo,this.segments.prepareSegment(0,n,r);for(var i=Object.keys(t),a=0;a<i.length;a++){var s=t[i[a]],u=No>>s.z,l=new or(s.x*u,s.y*u),c=new or(l.x+u,l.y+u),p=this.segments.prepareSegment(4,n,r);n.emplaceBack(l.x,l.y,l.x,l.y),n.emplaceBack(c.x,l.y,c.x,l.y),n.emplaceBack(l.x,c.y,l.x,c.y),n.emplaceBack(c.x,c.y,c.x,c.y);var h=p.vertexLength;r.emplaceBack(h,h+1,h+2),r.emplaceBack(h+1,h+2,h+3),p.vertexLength+=4,p.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(n,vs.members),this.maskedIndexBuffer=e.createIndexBuffer(r)}},Es.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Es.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=function(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,n,r,i){var o=r||i;return e[n]=!o||o.toLowerCase(),""}),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var o=this.expirationTime-e;o?this.expirationTime=r+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Es.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Es.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets){var i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];a&&s&&0!==Object.keys(s).length&&(i.update(s,a),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(i.layerIds[0]).queryRadius(i))))}}};var Ss={horizontal:1,vertical:2,horizontalOnly:3},Ts={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ks={};ks[10]=!0,ks[32]=!0,ks[38]=!0,ks[40]=!0,ks[41]=!0,ks[43]=!0,ks[45]=!0,ks[47]=!0,ks[173]=!0,ks[183]=!0,ks[8203]=!0,ks[8208]=!0,ks[8211]=!0,ks[8231]=!0,t.unwrapExports=e,t.createCommonjsModule=n,t.default=or,t.default$1=self,t.default$2=er,t.getJSON=function(t,e){var n=g(t);return n.setRequestHeader("Accept","application/json"),n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var r;try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r)}else e(401===n.status&&t.url.match(/mapbox.com/)?new cr(n.statusText+": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens",n.status,t.url):new cr(n.statusText,n.status,t.url))},n.send(),{cancel:function(){return n.abort()}}},t.getImage=function(t,e){return pr(t,function(t,n){if(t)e(t);else if(n){var r=new self.Image,i=self.URL||self.webkitURL;r.onload=function(){e(null,r),i.revokeObjectURL(r.src)};var o=new self.Blob([new Uint8Array(n.data)],{type:"image/png"});r.cacheControl=n.cacheControl,r.expires=n.expires,r.src=n.data.byteLength?i.createObjectURL(o):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})},t.ResourceType=lr,t.RGBAImage=Jo,t.default$3=Xa,t.ImagePosition=Ka,t.default$4=rs,t.getArrayBuffer=pr,t.default$5=function(t){return new as(t).readFields(Un,[])},t.default$6=Mi,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),i[a]=e,0==--r&&n(o,i)})})},t.AlphaImage=Yo,t.default$7=mr,t.endsWith=p,t.extend=u,t.sphericalToCartesian=function(t){var e=t[0],n=t[1],r=t[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(r),y:e*Math.sin(n)*Math.sin(r),z:e*Math.cos(r)}},t.Evented=dr,t.validateStyle=xi,t.validateLight=wi,t.emitValidationErrors=qt,t.default$8=Ar,t.number=R,t.Properties=Yi,t.Transitionable=Ui,t.Transitioning=qi,t.PossiblyEvaluated=Zi,t.DataConstantProperty=Wi,t.warnOnce=m,t.uniqueId=l,t.default$9=ls,t.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n},t.wrap=function(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i},t.clamp=s,t.Event=hr,t.ErrorEvent=fr,t.OverscaledTileID=ds,t.default$10=No,t.getCoordinatesCenter=function(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,o=0;o<t.length;o++)e=Math.min(e,t[o].column),n=Math.min(n,t[o].row),r=Math.max(r,t[o].column),i=Math.max(i,t[o].row);var a=r-e,s=i-n,u=Math.max(a,s),l=Math.max(0,Math.floor(-Math.log(u)/Math.LN2));return new ir((e+r)/2,(n+i)/2,0).zoomTo(l)},t.CanonicalTileID=hs,t.RasterBoundsArray=ro,t.default$11=vs,t.getVideo=function(t,e){var n,r,i=self.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(var o=0;o<t.length;o++){var a=self.document.createElement("source");n=t[o],r=void 0,(r=self.document.createElement("a")).href=n,(r.protocol!==self.document.location.protocol||r.host!==self.document.location.host)&&(i.crossOrigin="Anonymous"),a.src=t[o],i.appendChild(a)}return{cancel:function(){}}},t.default$12=yr,t.bindAll=c,t.default$13=o,t.default$14=Es,t.default$15=ir,t.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},t.default$16=xs,t.default$17=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.create=function(){var t=new $o(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],p=e[9],h=e[10],f=e[11],d=e[12],m=e[13],y=e[14],v=e[15],g=n*s-r*a,_=n*u-i*a,b=n*l-o*a,x=r*u-i*s,w=r*l-o*s,E=i*l-o*u,S=c*m-p*d,T=c*y-h*d,k=c*v-f*d,C=p*y-h*m,P=p*v-f*m,A=h*v-f*y,O=g*A-_*P+b*C+x*k-w*T+E*S;return O?(O=1/O,t[0]=(s*A-u*P+l*C)*O,t[1]=(i*P-r*A-o*C)*O,t[2]=(m*E-y*w+v*x)*O,t[3]=(h*w-p*E-f*x)*O,t[4]=(u*k-a*A-l*T)*O,t[5]=(n*A-i*k+o*T)*O,t[6]=(y*b-d*E-v*_)*O,t[7]=(c*E-h*b+f*_)*O,t[8]=(a*P-s*k+l*S)*O,t[9]=(r*k-n*P-o*S)*O,t[10]=(d*w-m*b+v*g)*O,t[11]=(p*b-c*w-f*g)*O,t[12]=(s*T-a*C-u*S)*O,t[13]=(n*C-r*T+i*S)*O,t[14]=(m*_-d*x-y*g)*O,t[15]=(c*x-p*_+h*g)*O,t):null},t.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],m=e[12],y=e[13],v=e[14],g=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*r+b*s+x*p+w*m,t[1]=_*i+b*u+x*h+w*y,t[2]=_*o+b*l+x*f+w*v,t[3]=_*a+b*c+x*d+w*g,_=n[4],b=n[5],x=n[6],w=n[7],t[4]=_*r+b*s+x*p+w*m,t[5]=_*i+b*u+x*h+w*y,t[6]=_*o+b*l+x*f+w*v,t[7]=_*a+b*c+x*d+w*g,_=n[8],b=n[9],x=n[10],w=n[11],t[8]=_*r+b*s+x*p+w*m,t[9]=_*i+b*u+x*h+w*y,t[10]=_*o+b*l+x*f+w*v,t[11]=_*a+b*c+x*d+w*g,_=n[12],b=n[13],x=n[14],w=n[15],t[12]=_*r+b*s+x*p+w*m,t[13]=_*i+b*u+x*h+w*y,t[14]=_*o+b*l+x*f+w*v,t[15]=_*a+b*c+x*d+w*g,t},t.translate=function(t,e,n){var r,i,o,a,s,u,l,c,p,h,f,d,m=n[0],y=n[1],v=n[2];return e===t?(t[12]=e[0]*m+e[4]*y+e[8]*v+e[12],t[13]=e[1]*m+e[5]*y+e[9]*v+e[13],t[14]=e[2]*m+e[6]*y+e[10]*v+e[14],t[15]=e[3]*m+e[7]*y+e[11]*v+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=p,t[9]=h,t[10]=f,t[11]=d,t[12]=r*m+s*y+p*v+e[12],t[13]=i*m+u*y+h*v+e[13],t[14]=o*m+l*y+f*v+e[14],t[15]=a*m+c*y+d*v+e[15]),t},t.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],p=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+p*r,t[7]=u*i+h*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=p*i-s*r,t[11]=h*i-u*r,t},t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],p=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+p*r,t[3]=u*i+h*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=p*i-s*r,t[7]=h*i-u*r,t},t.perspective=function(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t},t.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1,t},t.create$1=Te,t.normalize=ke,t.transformMat4=Ce,t.forEach=Ho,t.getSizeData=wn,t.evaluateSizeForFeature=function(t,e,n){var r=e;return"source"===t.functionType?n.lowerSize/10:"composite"===t.functionType?R(n.lowerSize/10,n.upperSize/10,r.uSizeT):r.uSize},t.evaluateSizeForZoom=function(t,e,n){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var r=t.propertyValue,i=t.zoomRange,o=t.sizeRange,a=s(mt(r,n.specification).interpolationFactor(e,i.min,i.max),0,1);return{uSizeT:0,uSize:o.min+a*(o.max-o.min)}}var u=t.propertyValue,l=t.zoomRange;return{uSizeT:s(mt(u,n.specification).interpolationFactor(e,l.min,l.max),0,1),uSize:0}},t.addDynamicAttributes=Sn,t.default$18=qa,t.WritingMode=Ss,t.multiPolygonIntersectsBufferedPoint=oe,t.multiPolygonIntersectsMultiPolygon=ae,t.multiPolygonIntersectsBufferedMultiLine=se,t.polygonIntersectsPolygon=function(t,e){for(var n=0;n<t.length;n++)if(de(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(de(t,e[r]))return!0;return!!le(t,e)},t.distToSegmentSquared=he,t.default$19=Ji,t.default$20=function(t){return new Ha[t.type](t)},t.clone=d,t.filterObject=f,t.mapObject=h,t.registerForPluginAvailability=function(t){return Ri?t({pluginURL:Ri,completionCallback:Ii}):Di.once("pluginAvailable",t),t},t.evented=Di,t.default$21=Oi,t.createLayout=Qt,t.default$22=Bo,t.create$2=ge,t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.create$3=_e,t.length=be,t.fromValues=xe,t.normalize$1=we,t.dot=Ee,t.cross=Se,t.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},t.len=Zo,t.forEach$1=Wo,t.PosArray=no,t.UnwrappedTileID=fs,t.create$4=function(){var t=new $o(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},t.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},t.ease=ar,t.bezier=a,t.default$23=ji,t.setRTLTextPlugin=function(t,e){if(zi)throw new Error("setRTLTextPlugin cannot be called multiple times.");zi=!0,Ri=er.resolveURL(t),Ii=function(t){t?(zi=!1,Ri=null,e&&e(t)):Li=!0},Di.fire(new hr("pluginAvailable",{pluginURL:Ri,completionCallback:Ii}))},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.default$24=Et,t.default$25=Da,t.register=Gt,t.GLYPH_PBF_BORDER=us,t.shapeText=function(t,e,n,r,i,o,a,s,u,l){var c=t.trim();l===Ss.vertical&&(c=function(t){for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;r&&Yt(r)&&!La[t[n+1]]||i&&Yt(i)&&!La[t[n-1]]||!La[t[n]]?e+=t[n]:e+=La[t[n]]}return e}(c));var p=[],h={positionedGlyphs:p,text:c,top:s[1],bottom:s[1],left:s[0],right:s[0],writingMode:l},f=Bi.processBidirectionalText;return function(t,e,n,r,i,o,a,s,u){for(var l=0,c=-17,p=0,h=t.positionedGlyphs,f="right"===o?1:"left"===o?0:.5,d=0,m=n;d<m.length;d+=1){var y=m[d];if((y=y.trim()).length){for(var v=h.length,g=0;g<y.length;g++){var _=y.charCodeAt(g),b=e[_];b&&(Kt(_)&&a!==Ss.horizontal?(h.push({glyph:_,x:l,y:0,vertical:!0}),l+=u+s):(h.push({glyph:_,x:l,y:c,vertical:!1}),l+=b.metrics.advance+s))}if(h.length!==v){var x=l-s;p=Math.max(x,p),Yn(h,e,v,h.length-1,f)}l=0,c+=r}else c+=r}var w=Kn(i),E=w.horizontalAlign,S=w.verticalAlign;!function(t,e,n,r,i,o,a){for(var s=(e-n)*i,u=(-r*a+.5)*o,l=0;l<t.length;l++)t[l].x+=s,t[l].y+=u}(h,f,E,S,p,r,n.length);var T=n.length*r;t.top+=-S*T,t.bottom=t.top+T,t.left+=-E*p,t.right=t.left+p}(h,e,f?f(c,Xn(c,a,n,e)):function(t,e){for(var n=[],r=0,i=0,o=e;i<o.length;i+=1){var a=o[i];n.push(t.substring(r,a)),r=a}return r<t.length&&n.push(t.substring(r,t.length)),n}(c,Xn(c,a,n,e)),r,i,o,l,a,u),!!p.length&&h},t.shapeIcon=function(t,e,n){var r=Kn(n),i=r.horizontalAlign,o=r.verticalAlign,a=e[0],s=e[1],u=a-t.displaySize[0]*i,l=u+t.displaySize[0],c=s-t.displaySize[1]*o;return{image:t,top:c,bottom:c+t.displaySize[1],left:u,right:l}},t.allowsVerticalWritingMode=Ht,t.allowsLetterSpacing=function(t){for(var e=0,n=t;e<n.length;e+=1)if(!Xt(n[e].charCodeAt(0)))return!1;return!0},t.default$26=sn,t.default$27=Ua,t.default$28=ws,t.CollisionBoxArray=wo,t.default$29=gs,t.default$30=Ja,t.default$31=_a,t.default$32=as,t.default$33=ys,t.__moduleExports=_a,t.default$34=or,t.__moduleExports$1=as,t.plugin=Bi}),t(["./chunk1.js"],function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var r="[",i=0,o=t;i<o.length;i+=1)r+=e(o[i])+",";return r+"]"}for(var a=Object.keys(t).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+e(t[a[u]])+",";return s+"}"}function n(n){for(var r="",i=0,o=t.default$17;i<o.length;i+=1)r+="/"+e(n[o[i]]);return r}function r(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=t[a-1],p=t[a],h=t[a+1];if(!h)return!1;var f=c.angleTo(p)-p.angleTo(h);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),l+=f;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;a++,s+=p.dist(h)}return!0}function i(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function o(t,e,n){return t?.6*e*n:0}function a(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function s(e,n,s,u,l,c){for(var p=o(s,l,c),h=a(s,u),f=0,d=i(e)/2,m=0;m<e.length-1;m++){var y=e[m],v=e[m+1],g=y.dist(v);if(f+g>d){var _=(d-f)/g,b=t.number(y.x,v.x,_),x=t.number(y.y,v.y,_),w=new t.default$25(b,x,v.angleTo(y),m);if(w._round(),p&&!r(e,w,h,p,n))return;return w}f+=g}}function u(e,n,s,u,l,c,p,h,f){var d=o(u,c,p),m=a(u,l),y=0===e[0].x||e[0].x===f||0===e[0].y||e[0].y===f;return n-m*p<n/4&&(n=m*p+n/4),function e(n,o,a,s,u,l,c,p,h){for(var f=l/2,d=i(n),m=0,y=o-a,v=[],g=0;g<n.length-1;g++){for(var _=n[g],b=n[g+1],x=_.dist(b),w=b.angleTo(_);y+a<m+x;){var E=((y+=a)-m)/x,S=t.number(_.x,b.x,E),T=t.number(_.y,b.y,E);if(S>=0&&S<h&&T>=0&&T<h&&y-f>=0&&y+f<=d){var k=new t.default$25(S,T,w,g);k._round(),s&&!r(n,k,l,s,u)||v.push(k)}}m+=x}return p||v.length||c||(v=e(n,m/2,a,s,u,l,c,!0,h)),v}(e,y?n/2*h%n:(m/2+2*c)*p*h%n,n,d,s,m*p,y,!1,f)}function l(t,e){if(!(this instanceof l))return new l(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||c,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function c(t,e){return t<e?-1:t>e?1:0}function p(e,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);for(var i=1/0,o=1/0,a=-1/0,s=-1/0,u=e[0],l=0;l<u.length;l++){var c=u[l];(!l||c.x<i)&&(i=c.x),(!l||c.y<o)&&(o=c.y),(!l||c.x>a)&&(a=c.x),(!l||c.y>s)&&(s=c.y)}var p=a-i,d=s-o,m=Math.min(p,d),y=m/2,v=new At(null,h);if(0===m)return new t.default(i,o);for(var g=i;g<a;g+=m)for(var _=o;_<s;_+=m)v.push(new f(g+y,_+y,y,e));for(var b=function(t){for(var e=0,n=0,r=0,i=t[0],o=0,a=i.length,s=a-1;o<a;s=o++){var u=i[o],l=i[s],c=u.x*l.y-l.x*u.y;n+=(u.x+l.x)*c,r+=(u.y+l.y)*c,e+=3*c}return new f(n/e,r/e,0,t)}(e),x=v.length;v.length;){var w=v.pop();(w.d>b.d||!b.d)&&(b=w,r&&console.log("found best %d after %d probes",Math.round(1e4*w.d)/1e4,x)),w.max-b.d<=n||(y=w.h/2,v.push(new f(w.p.x-y,w.p.y-y,y,e)),v.push(new f(w.p.x+y,w.p.y-y,y,e)),v.push(new f(w.p.x-y,w.p.y+y,y,e)),v.push(new f(w.p.x+y,w.p.y+y,y,e)),x+=4)}return r&&(console.log("num probes: "+x),console.log("best distance: "+b.d)),b.p}function h(t,e){return e.max-t.max}function f(e,n,r,i){this.p=new t.default(e,n),this.h=r,this.d=function(e,n){for(var r=!1,i=1/0,o=0;o<n.length;o++)for(var a=n[o],s=0,u=a.length,l=u-1;s<u;l=s++){var c=a[s],p=a[l];c.y>e.y!=p.y>e.y&&e.x<(p.x-c.x)*(e.y-c.y)/(p.y-c.y)+c.x&&(r=!r),i=Math.min(i,t.distToSegmentSquared(e,c,p))}return(r?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}function d(e,n,r,i,o,a){e.createArrays(),e.symbolInstances=[];var s=512*e.overscaling;e.tilePixelRatio=t.default$10/s,e.compareText={},e.iconsNeedLinear=!1;var u=e.layers[0].layout,l=e.layers[0]._unevaluatedLayout._values,c={};if("composite"===e.textSizeData.functionType){var p=e.textSizeData.zoomRange,h=p.min,f=p.max;c.compositeTextSizes=[l["text-size"].possiblyEvaluate(new t.default$23(h)),l["text-size"].possiblyEvaluate(new t.default$23(f))]}if("composite"===e.iconSizeData.functionType){var d=e.iconSizeData.zoomRange,y=d.min,v=d.max;c.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new t.default$23(y)),l["icon-size"].possiblyEvaluate(new t.default$23(v))]}c.layoutTextSize=l["text-size"].possiblyEvaluate(new t.default$23(e.zoom+1)),c.layoutIconSize=l["icon-size"].possiblyEvaluate(new t.default$23(e.zoom+1)),c.textMaxSize=l["text-size"].possiblyEvaluate(new t.default$23(18));for(var g=24*u.get("text-line-height"),_="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),b=u.get("text-keep-upright"),x=0,w=e.features;x<w.length;x+=1){var E=w[x],S=u.get("text-font").evaluate(E,{}).join(","),T=n[S]||{},k=r[S]||{},C={},P=E.text;if(P){var A=u.get("text-offset").evaluate(E,{}).map(function(t){return 24*t}),O=24*u.get("text-letter-spacing").evaluate(E,{}),I=t.allowsLetterSpacing(P)?O:0,M=u.get("text-anchor").evaluate(E,{}),z=u.get("text-justify").evaluate(E,{}),R="point"===u.get("symbol-placement")?24*u.get("text-max-width").evaluate(E,{}):0;C.horizontal=t.shapeText(P,T,R,g,M,z,I,A,24,t.WritingMode.horizontal),t.allowsVerticalWritingMode(P)&&_&&b&&(C.vertical=t.shapeText(P,T,R,g,M,z,I,A,24,t.WritingMode.vertical))}var L=void 0;if(E.icon){var D=i[E.icon];D&&(L=t.shapeIcon(o[E.icon],u.get("icon-offset").evaluate(E,{}),u.get("icon-anchor").evaluate(E,{})),void 0===e.sdfIcons?e.sdfIcons=D.sdf:e.sdfIcons!==D.sdf&&t.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),D.pixelRatio!==e.pixelRatio?e.iconsNeedLinear=!0:0!==u.get("icon-rotate").constantOr(1)&&(e.iconsNeedLinear=!0))}(C.horizontal||L)&&m(e,E,C,L,k,c)}a&&e.generateCollisionDebugBuffers()}function m(e,n,r,i,o,a){var l=a.layoutTextSize.evaluate(n,{}),c=a.layoutIconSize.evaluate(n,{}),h=a.textMaxSize.evaluate(n,{});void 0===h&&(h=l);var f=e.layers[0].layout,d=f.get("text-offset").evaluate(n,{}),m=f.get("icon-offset").evaluate(n,{}),g=l/24,_=e.tilePixelRatio*g,b=e.tilePixelRatio*h/24,x=e.tilePixelRatio*c,w=e.tilePixelRatio*f.get("symbol-spacing"),E=f.get("text-padding")*e.tilePixelRatio,S=f.get("icon-padding")*e.tilePixelRatio,T=f.get("text-max-angle")/180*Math.PI,k="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),C="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),P=f.get("symbol-placement"),A=w/2,O=function(s,u){u.x<0||u.x>=t.default$10||u.y<0||u.y>=t.default$10||e.symbolInstances.push(function(e,n,r,i,o,a,s,u,l,c,p,h,f,d,m,v,g,_,b,x,w){var E,S,T=e.addToLineVertexArray(n,r),k=0,C=0,P=0,A=i.horizontal?i.horizontal.text:"",O=[];if(i.horizontal){var I=a.layout.get("text-rotate").evaluate(b,{});E=new Pt(s,r,n,u,l,c,i.horizontal,p,h,f,e.overscaling,I),C+=y(e,n,i.horizontal,a,f,b,d,T,i.vertical?t.WritingMode.horizontal:t.WritingMode.horizontalOnly,O,x,w),i.vertical&&(P+=y(e,n,i.vertical,a,f,b,d,T,t.WritingMode.vertical,O,x,w))}var M=E?E.boxStartIndex:e.collisionBoxArray.length,z=E?E.boxEndIndex:e.collisionBoxArray.length;if(o){var R=function(e,n,r,i,o,a){var s,u,l,c,p=n.image,h=r.layout,f=n.top-1/p.pixelRatio,d=n.left-1/p.pixelRatio,m=n.bottom+1/p.pixelRatio,y=n.right+1/p.pixelRatio;if("none"!==h.get("icon-text-fit")&&o){var v=y-d,g=m-f,_=h.get("text-size").evaluate(a,{})/24,b=o.left*_,x=o.right*_,w=o.top*_,E=x-b,S=o.bottom*_-w,T=h.get("icon-text-fit-padding")[0],k=h.get("icon-text-fit-padding")[1],C=h.get("icon-text-fit-padding")[2],P=h.get("icon-text-fit-padding")[3],A="width"===h.get("icon-text-fit")?.5*(S-g):0,O="height"===h.get("icon-text-fit")?.5*(E-v):0,I="width"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?E:v,M="height"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?S:g;s=new t.default(b+O-P,w+A-T),u=new t.default(b+O+k+I,w+A-T),l=new t.default(b+O+k+I,w+A+C+M),c=new t.default(b+O-P,w+A+C+M)}else s=new t.default(d,f),u=new t.default(y,f),l=new t.default(y,m),c=new t.default(d,m);var z=r.layout.get("icon-rotate").evaluate(a,{})*Math.PI/180;if(z){var R=Math.sin(z),L=Math.cos(z),D=[L,-R,R,L];s._matMult(D),u._matMult(D),c._matMult(D),l._matMult(D)}return[{tl:s,tr:u,bl:c,br:l,tex:p.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,o,a,0,i.horizontal,b),L=a.layout.get("icon-rotate").evaluate(b,{});S=new Pt(s,r,n,u,l,c,o,m,v,!1,e.overscaling,L),k=4*R.length;var D=e.iconSizeData,B=null;"source"===D.functionType?B=[10*a.layout.get("icon-size").evaluate(b,{})]:"composite"===D.functionType&&(B=[10*w.compositeIconSizes[0].evaluate(b,{}),10*w.compositeIconSizes[1].evaluate(b,{})]),e.addSymbols(e.icon,R,B,_,g,b,!1,n,T.lineStartIndex,T.lineLength)}var j=S?S.boxStartIndex:e.collisionBoxArray.length,F=S?S.boxEndIndex:e.collisionBoxArray.length;return e.glyphOffsetArray.length>=t.default$27.MAX_GLYPHS&&t.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),{key:A,textBoxStartIndex:M,textBoxEndIndex:z,iconBoxStartIndex:j,iconBoxEndIndex:F,textOffset:d,iconOffset:_,anchor:n,line:r,featureIndex:u,feature:b,numGlyphVertices:C,numVerticalGlyphVertices:P,numIconVertices:k,textOpacityState:new Ct,iconOpacityState:new Ct,isDuplicate:!1,placedTextSymbolIndices:O,crossTileID:0}}(e,u,s,r,i,e.layers[0],e.collisionBoxArray,n.index,n.sourceLayerIndex,e.index,_,E,k,d,x,S,C,m,n,o,a))};if("line"===P)for(var I=0,M=function(e,n,r,i,o){for(var a=[],s=0;s<e.length;s++)for(var u=e[s],l=void 0,c=0;c<u.length-1;c++){var p=u[c],h=u[c+1];p.x<0&&h.x<0||(p.x<0?p=new t.default(0,p.y+(h.y-p.y)*((0-p.x)/(h.x-p.x)))._round():h.x<0&&(h=new t.default(0,p.y+(h.y-p.y)*((0-p.x)/(h.x-p.x)))._round()),p.y<0&&h.y<0||(p.y<0?p=new t.default(p.x+(h.x-p.x)*((0-p.y)/(h.y-p.y)),0)._round():h.y<0&&(h=new t.default(p.x+(h.x-p.x)*((0-p.y)/(h.y-p.y)),0)._round()),p.x>=i&&h.x>=i||(p.x>=i?p=new t.default(i,p.y+(h.y-p.y)*((i-p.x)/(h.x-p.x)))._round():h.x>=i&&(h=new t.default(i,p.y+(h.y-p.y)*((i-p.x)/(h.x-p.x)))._round()),p.y>=o&&h.y>=o||(p.y>=o?p=new t.default(p.x+(h.x-p.x)*((o-p.y)/(h.y-p.y)),o)._round():h.y>=o&&(h=new t.default(p.x+(h.x-p.x)*((o-p.y)/(h.y-p.y)),o)._round()),l&&p.equals(l[l.length-1])||(l=[p],a.push(l)),l.push(h)))))}return a}(n.geometry,0,0,t.default$10,t.default$10);I<M.length;I+=1)for(var z=M[I],R=0,L=u(z,w,T,r.vertical||r.horizontal,i,24,b,e.overscaling,t.default$10);R<L.length;R+=1){var D=L[R],B=r.horizontal;B&&v(e,B.text,A,D)||O(z,D)}else if("line-center"===P)for(var j=0,F=n.geometry;j<F.length;j+=1){var N=F[j];if(N.length>1){var U=s(N,T,r.vertical||r.horizontal,i,24,b);U&&O(N,U)}}else if("Polygon"===n.type)for(var V=0,q=t.default$26(n.geometry,0);V<q.length;V+=1){var $=q[V],G=p($,16);O($[0],new t.default$25(G.x,G.y,0))}else if("LineString"===n.type)for(var Z=0,W=n.geometry;Z<W.length;Z+=1){var H=W[Z];O(H,new t.default$25(H[0].x,H[0].y,0))}else if("Point"===n.type)for(var X=0,K=n.geometry;X<K.length;X+=1)for(var Y=0,J=K[X];Y<J.length;Y+=1){var Q=J[Y];O([Q],new t.default$25(Q.x,Q.y,0))}}function y(e,n,r,i,o,a,s,u,l,c,p,h){var f=function(e,n,r,i,o,a){for(var s=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=r.layout.get("text-offset").evaluate(o,{}).map(function(t){return 24*t}),l=n.positionedGlyphs,c=[],p=0;p<l.length;p++){var h=l[p],f=a[h.glyph];if(f){var d=f.rect;if(d){var m=t.GLYPH_PBF_BORDER+1,y=f.metrics.advance/2,v=i?[h.x+y,h.y]:[0,0],g=i?[0,0]:[h.x+y+u[0],h.y+u[1]],_=f.metrics.left-m-y+g[0],b=-f.metrics.top-m+g[1],x=_+d.w,w=b+d.h,E=new t.default(_,b),S=new t.default(x,b),T=new t.default(_,w),k=new t.default(x,w);if(i&&h.vertical){var C=new t.default(-y,y),P=-Math.PI/2,A=new t.default(5,0);E._rotateAround(P,C)._add(A),S._rotateAround(P,C)._add(A),T._rotateAround(P,C)._add(A),k._rotateAround(P,C)._add(A)}if(s){var O=Math.sin(s),I=Math.cos(s),M=[I,-O,O,I];E._matMult(M),S._matMult(M),T._matMult(M),k._matMult(M)}c.push({tl:E,tr:S,bl:T,br:k,tex:d,writingMode:n.writingMode,glyphOffset:v})}}}return c}(0,r,i,o,a,p),d=e.textSizeData,m=null;return"source"===d.functionType?m=[10*i.layout.get("text-size").evaluate(a,{})]:"composite"===d.functionType&&(m=[10*h.compositeTextSizes[0].evaluate(a,{}),10*h.compositeTextSizes[1].evaluate(a,{})]),e.addSymbols(e.text,f,m,s,o,a,l,n,u.lineStartIndex,u.lineLength),c.push(e.text.placedSymbolArray.length-1),4*f.length}function v(t,e,n,r){var i=t.compareText;if(e in i){for(var o=i[e],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[e]=[];return i[e].push(r),!1}function g(e,n){for(var r=new t.default$23(n),i=0,o=e;i<o.length;i+=1)o[i].recalculate(r)}function _(e,n){var r=t.getArrayBuffer(e.request,function(e,r){e?n(e):r&&n(null,{vectorTile:new t.default$31.VectorTile(new t.default$32(r.data)),rawData:r.data,cacheControl:r.cacheControl,expires:r.expires})});return function(){r.cancel(),n()}}function b(t){var e=0;if(t&&t.length>0){e+=Math.abs(x(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(x(t[n]))}return e}function x(t){var e,n,r,i,o,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(w(t[o][0])-w(e[0]))*Math.sin(w(n[1]));s=s*jt.RADIUS*jt.RADIUS/2}return s}function w(t){return t*Math.PI/180}function E(t,e){return function(n){return t(n,e)}}function S(t,e){e=!!e,t[0]=T(t[0],e);for(var n=1;n<t.length;n++)t[n]=T(t[n],!e);return t}function T(t,e){return function(t){return Ft.ring(t)>=0}(t)===e?t:t.reverse()}function k(t,e){this.options=e||{},this.features=t,this.length=t.length}function C(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}function P(e){var n=new t.__moduleExports$1;return function(t,e){for(var n in t.layers)e.writeMessage(3,A,t.layers[n])}(e,n),n.finish()}function A(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,O,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,L,o[n])}function O(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,I,t),e.writeVarintField(3,n.type),e.writeMessage(4,R,n)}function I(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),u=r.length-1,o[s]=u),e.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var p=c+":"+l,h=a[p];void 0===h&&(i.push(l),h=i.length-1,a[p]=h),e.writeVarint(h)}}function M(t,e){return(e<<3)+(7&t)}function z(t){return t<<1^t>>31}function R(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],l=1;1===r&&(l=u.length),e.writeVarint(M(1,l));for(var c=3===r?u.length-1:u.length,p=0;p<c;p++){1===p&&1!==r&&e.writeVarint(M(2,c-1));var h=u[p].x-i,f=u[p].y-o;e.writeVarint(z(h)),e.writeVarint(z(f)),i+=h,o+=f}3===r&&e.writeVarint(M(7,0))}}function L(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function D(t,e,n,r,i,o){if(!(i-r<=n)){var a=Math.floor((r+i)/2);!function t(e,n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),p=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);t(e,n,r,Math.max(i,Math.floor(r-u*c/s+p)),Math.min(o,Math.floor(r+(s-u)*c/s+p)),a)}var h=n[2*r+a],f=i,d=o;for(B(e,n,i,r),n[2*o+a]>h&&B(e,n,i,o);f<d;){for(B(e,n,f,d),f++,d--;n[2*f+a]<h;)f++;for(;n[2*d+a]>h;)d--}n[2*i+a]===h?B(e,n,i,d):B(e,n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,e,a,r,i,o%2),D(t,e,n,r,a-1,o+1),D(t,e,n,a+1,i,o+1)}}function B(t,e,n,r){j(t,n,r),j(e,2*n,2*r),j(e,2*n+1,2*r+1)}function j(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function F(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}function N(t,e,n,r,i){return new U(t,e,n,r,i)}function U(t,e,n,r,i){e=e||V,n=n||q,i=i||Array,this.nodeSize=r||64,this.points=t,this.ids=new i(t.length),this.coords=new i(2*t.length);for(var o=0;o<t.length;o++)this.ids[o]=o,this.coords[2*o]=e(t[o]),this.coords[2*o+1]=n(t[o]);D(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function V(t){return t[0]}function q(t){return t[1]}function $(t){this.options=K(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function G(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function Z(t){return{type:"Feature",properties:W(t),geometry:{type:"Point",coordinates:[360*(t.x-.5),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n}function W(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return K(K({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function H(t){return t/360+.5}function X(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function K(t,e){for(var n in e)t[n]=e[n];return t}function Y(t){return t.x}function J(t){return t.y}function Q(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((t-n)*a+(e-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return(a=t-n)*a+(s=e-r)*s}function tt(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)et(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)et(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)et(t,e[r][i])}(i),i}function et(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function nt(t,e,n){if(e.geometry){var r=e.geometry.coordinates,i=e.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),a=[];if("Point"===i)rt(r,a);else if("MultiPoint"===i)for(var s=0;s<r.length;s++)rt(r[s],a);else if("LineString"===i)it(r,a,o,!1);else if("MultiLineString"===i){if(n.lineMetrics){for(s=0;s<r.length;s++)a=[],it(r[s],a,o,!1),t.push(tt(e.id,"LineString",a,e.properties));return}ot(r,a,o,!1)}else if("Polygon"===i)ot(r,a,o,!0);else{if("MultiPolygon"!==i){if("GeometryCollection"===i){for(s=0;s<e.geometry.geometries.length;s++)nt(t,{id:e.id,geometry:e.geometry.geometries[s],properties:e.properties},n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(s=0;s<r.length;s++){var u=[];ot(r[s],u,o,!0),a.push(u)}}t.push(tt(e.id,i,a,e.properties))}}function rt(t,e){e.push(at(t[0])),e.push(st(t[1])),e.push(0)}function it(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var u=at(t[s][0]),l=st(t[s][1]);e.push(u),e.push(l),e.push(0),s>0&&(a+=r?(i*l-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(l-o,2))),i=u,o=l}var c=e.length-3;e[2]=1,function t(e,n,r,i){for(var o,a=i,s=r-n>>1,u=r-n,l=e[n],c=e[n+1],p=e[r],h=e[r+1],f=n+3;f<r;f+=3){var d=Q(e[f],e[f+1],l,c,p,h);if(d>a)o=f,a=d;else if(d===a){var m=Math.abs(f-s);m<u&&(o=f,u=m)}}a>i&&(o-n>3&&t(e,n,o,i),e[o+2]=a,r-o>3&&t(e,o,r,i))}(e,0,c,n),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function ot(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];it(t[i],o,n,r),e.push(o)}}function at(t){return t/360+.5}function st(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function ut(t,e,n,r,i,o,a,s){if(r/=e,o>=(n/=e)&&a<r)return t;if(a<n||o>=r)return null;for(var u=[],l=0;l<t.length;l++){var c=t[l],p=c.geometry,h=c.type,f=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(f>=n&&d<r)u.push(c);else if(!(d<n||f>=r)){var m=[];if("Point"===h||"MultiPoint"===h)lt(p,m,n,r,i);else if("LineString"===h)ct(p,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===h)ht(p,m,n,r,i,!1);else if("Polygon"===h)ht(p,m,n,r,i,!0);else if("MultiPolygon"===h)for(var y=0;y<p.length;y++){var v=[];ht(p[y],v,n,r,i,!0),v.length&&m.push(v)}if(m.length){if(s.lineMetrics&&"LineString"===h){for(y=0;y<m.length;y++)u.push(tt(c.id,h,m[y],c.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===m.length?(h="LineString",m=m[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===m.length?"Point":"MultiPoint"),u.push(tt(c.id,h,m,c.tags))}}}return u.length?u:null}function lt(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function ct(t,e,n,r,i,o,a){for(var s,u,l=pt(t),c=0===i?dt:mt,p=t.start,h=0;h<t.length-3;h+=3){var f=t[h],d=t[h+1],m=t[h+2],y=t[h+3],v=t[h+4],g=0===i?f:d,_=0===i?y:v,b=!1;a&&(s=Math.sqrt(Math.pow(f-y,2)+Math.pow(d-v,2))),g<n?_>=n&&(u=c(l,f,d,y,v,n),a&&(l.start=p+s*u)):g>=r?_<r&&(u=c(l,f,d,y,v,r),a&&(l.start=p+s*u)):ft(l,f,d,m),_<n&&g>=n&&(u=c(l,f,d,y,v,n),b=!0),_>r&&g<=r&&(u=c(l,f,d,y,v,r),b=!0),!o&&b&&(a&&(l.end=p+s*u),e.push(l),l=pt(t)),a&&(p+=s)}var x=t.length-3;f=t[x],d=t[x+1],m=t[x+2],(g=0===i?f:d)>=n&&g<=r&&ft(l,f,d,m),x=l.length-3,o&&x>=3&&(l[x]!==l[0]||l[x+1]!==l[1])&&ft(l,l[0],l[1],l[2]),l.length&&e.push(l)}function pt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function ht(t,e,n,r,i,o){for(var a=0;a<t.length;a++)ct(t[a],e,n,r,i,o,!1)}function ft(t,e,n,r){t.push(e),t.push(n),t.push(r)}function dt(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function mt(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function yt(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=vt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(vt(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],l=0;l<o.geometry[s].length;l++)u.push(vt(o.geometry[s][l],e));i.push(u)}n.push(tt(o.id,a,i,o.tags))}return n}function vt(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function gt(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var u=t.features[n],l=u.geometry,c=u.type;if(u.geometry=[],1===c)for(r=0;r<l.length;r+=2)u.geometry.push(_t(l[r],l[r+1],e,o,a,s));else for(r=0;r<l.length;r++){var p=[];for(i=0;i<l[r].length;i+=2)p.push(_t(l[r][i],l[r][i+1],e,o,a,s));u.geometry.push(p)}}return t.transformed=!0,t}function _t(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function bt(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,xt(a,t[s],o,i);var u=t[s].minX,l=t[s].minY,c=t[s].maxX,p=t[s].maxY;u<a.minX&&(a.minX=u),l<a.minY&&(a.minY=l),c>a.maxX&&(a.maxX=c),p>a.maxY&&(a.maxY=p)}return a}function xt(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)wt(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)wt(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var l=i[u];for(s=0;s<l.length;s++)wt(a,l[s],t,n,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var p in c={},e.tags)c[p]=e.tags[p];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var h={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(h.id=e.id),t.features.push(h)}}function wt(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===r||e[u+2]>a)&&(n.numSimplified++,s.push(e[u]),s.push(e[u+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}}function Et(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)nt(n,t.features[r],e);else"Feature"===t.type?nt(n,t,e):nt(n,{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(t,e){var n=e.buffer/e.extent,r=t,i=ut(t,1,-1-n,n,0,-1,2,e),o=ut(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=ut(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=yt(i,1).concat(r)),o&&(r=r.concat(yt(o,-1)))),r}(r,e)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function St(t,e,n){return 32*((1<<t)*n+e)+t}function Tt(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);var i=new qt(r.features),o=Zt(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}var kt=function(t){t&&this.replace(t)};kt.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},kt.prototype.update=function(e,r){for(var i=this,o=0,a=e;o<a.length;o+=1){var s=a[o];i._layerConfigs[s.id]=s;var u=i._layers[s.id]=t.default$20(s);u._featureFilter=t.default$24(u.filter)}for(var l=0,c=r;l<c.length;l+=1){var p=c[l];delete i._layerConfigs[p],delete i._layers[p]}this.familiesBySource={};for(var h=0,f=function(t){for(var e={},r=0;r<t.length;r++){var i=n(t[r]),o=e[i];o||(o=e[i]=[]),o.push(t[r])}var a=[];for(var s in e)a.push(e[s]);return a}(t.values(this._layerConfigs));h<f.length;h+=1){var d=f[h].map(function(t){return i._layers[t.id]}),m=d[0];if("none"!==m.visibility){var y=m.source||"",v=i.familiesBySource[y];v||(v=i.familiesBySource[y]={});var g=m.sourceLayer||"_geojsonTileLayer",_=v[g];_||(_=v[g]=[]),_.push(d)}}};var Ct=function(){this.opacity=0,this.targetOpacity=0,this.time=0};Ct.prototype.clone=function(){var t=new Ct;return t.opacity=this.opacity,t.targetOpacity=this.targetOpacity,t.time=this.time,t},t.register("OpacityState",Ct);var Pt=function(e,n,r,i,o,a,s,u,l,c,p,h){var f=s.top*u-l,d=s.bottom*u+l,m=s.left*u-l,y=s.right*u+l;if(this.boxStartIndex=e.length,c){var v=d-f,g=y-m;v>0&&(v=Math.max(10*u,v),this._addLineCollisionCircles(e,n,r,r.segment,g,v,i,o,a,p))}else{if(h){var _=new t.default(m,f),b=new t.default(y,f),x=new t.default(m,d),w=new t.default(y,d),E=h*Math.PI/180;_._rotate(E),b._rotate(E),x._rotate(E),w._rotate(E),m=Math.min(_.x,b.x,x.x,w.x),y=Math.max(_.x,b.x,x.x,w.x),f=Math.min(_.y,b.y,x.y,w.y),d=Math.max(_.y,b.y,x.y,w.y)}e.emplaceBack(r.x,r.y,m,f,y,d,i,o,a,0,0)}this.boxEndIndex=e.length};Pt.prototype._addLineCollisionCircles=function(t,e,n,r,i,o,a,s,u,l){var c=o/2,p=Math.floor(i/c),h=1+.4*Math.log(l)/Math.LN2,f=Math.floor(p*h/2),d=-o/2,m=n,y=r+1,v=d,g=-i/2,_=g-i/4;do{if(--y<0){if(v>g)return;y=0;break}v-=e[y].dist(m),m=e[y]}while(v>_);for(var b=e[y].dist(e[y+1]),x=-f;x<p+f;x++){var w=x*c,E=g+w;if(w<0&&(E+=w),w>i&&(E+=w-i),!(E<v)){for(;v+b<E;){if(v+=b,++y+1>=e.length)return;b=e[y].dist(e[y+1])}var S=E-v,T=e[y],k=e[y+1].sub(T)._unit()._mult(S)._add(T)._round(),C=Math.abs(E-d)<c?0:.8*(E-d);t.emplaceBack(k.x,k.y,-o/2,-o/2,o/2,o/2,a,s,u,o/2,C)}}};var At=l,Ot=l;l.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}},At.default=Ot;var It=function(e){var n=new t.AlphaImage({width:0,height:0}),r={},i=new t.default$3(0,0,{autoResize:!0});for(var o in e){var a=e[o],s=r[o]={};for(var u in a){var l=a[+u];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var c=i.packOne(l.bitmap.width+2,l.bitmap.height+2);n.resize({width:i.w,height:i.h}),t.AlphaImage.copy(l.bitmap,n,{x:0,y:0},{x:c.x+1,y:c.y+1},l.bitmap),s[u]={rect:c,metrics:l.metrics}}}}i.shrink(),n.resize({width:i.w,height:i.h}),this.image=n,this.positions=r};t.register("GlyphAtlas",It);var Mt=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming};Mt.prototype.parse=function(e,n,r,i){function o(){if(l)return i(l);if(c&&p){var e=new It(c),n=new t.default$30(p);for(var r in h){var o=h[r];o instanceof t.default$27&&(g(o.layers,this.zoom),d(o,c,e.positions,p,n.positions,this.showCollisionBoxes))}this.status="done",i(null,{buckets:t.values(h).filter(function(t){return!t.isEmpty()}),featureIndex:u,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,iconAtlasImage:n.image})}}var a=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var s=new t.default$29(Object.keys(e.layers).sort()),u=new t.default$28(this.tileID);u.bucketLayerIDs=[];var l,c,p,h={},f={featureIndex:u,iconDependencies:{},glyphDependencies:{}},m=n.familiesBySource[this.source];for(var y in m){var v=e.layers[y];if(v){1===v.version&&t.warnOnce('Vector tile source "'+a.source+'" layer "'+y+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var _=s.encode(y),b=[],x=0;x<v.length;x++){var w=v.feature(x);b.push({feature:w,index:x,sourceLayerIndex:_})}for(var E=0,S=m[y];E<S.length;E+=1){var T=S[E],k=T[0];k.minzoom&&a.zoom<Math.floor(k.minzoom)||k.maxzoom&&a.zoom>=k.maxzoom||"none"!==k.visibility&&(g(T,a.zoom),(h[k.id]=k.createBucket({index:u.bucketLayerIDs.length,layers:T,zoom:a.zoom,pixelRatio:a.pixelRatio,overscaling:a.overscaling,collisionBoxArray:a.collisionBoxArray,sourceLayerIndex:_,sourceID:a.source})).populate(b,f),u.bucketLayerIDs.push(T.map(function(t){return t.id})))}}}var C=t.mapObject(f.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(C).length?r.send("getGlyphs",{uid:this.uid,stacks:C},function(t,e){l||(l=t,c=e,o.call(a))}):c={};var P=Object.keys(f.iconDependencies);P.length?r.send("getImages",{icons:P},function(t,e){l||(l=t,p=e,o.call(a))}):p={},o.call(this)};var zt="undefined"!=typeof performance,Rt={getEntriesByName:function(t){return!!(zt&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(t)},mark:function(t){return!!(zt&&performance&&performance.mark)&&performance.mark(t)},measure:function(t,e,n){return!!(zt&&performance&&performance.measure)&&performance.measure(t,e,n)},clearMarks:function(t){return!!(zt&&performance&&performance.clearMarks)&&performance.clearMarks(t)},clearMeasures:function(t){return!!(zt&&performance&&performance.clearMeasures)&&performance.clearMeasures(t)}},Lt=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},Rt.mark(this._marks.start)};Lt.prototype.finish=function(){Rt.mark(this._marks.end);var t=Rt.getEntriesByName(this._marks.measure);return 0===t.length&&(Rt.measure(this._marks.measure,this._marks.start,this._marks.end),t=Rt.getEntriesByName(this._marks.measure),Rt.clearMarks(this._marks.start),Rt.clearMarks(this._marks.end),Rt.clearMeasures(this._marks.measure)),t},Rt.Performance=Lt;var Dt=function(t,e,n){this.actor=t,this.layerIndex=e,this.loadVectorData=n||_,this.loading={},this.loaded={}};Dt.prototype.loadTile=function(e,n){var r=this,i=e.uid;this.loading||(this.loading={});var o=!!(e&&e.request&&e.request.collectResourceTiming)&&new Rt.Performance(e.request),a=this.loading[i]=new Mt(e);a.abort=this.loadVectorData(e,function(e,s){if(delete r.loading[i],e||!s)return n(e);var u=s.rawData,l={};s.expires&&(l.expires=s.expires),s.cacheControl&&(l.cacheControl=s.cacheControl);var c={};if(o){var p=o.finish();p&&(c.resourceTiming=JSON.parse(JSON.stringify(p)))}a.vectorTile=s.vectorTile,a.parse(s.vectorTile,r.layerIndex,r.actor,function(e,r){if(e||!r)return n(e);n(null,t.extend({rawTileData:u.slice(0)},r,l,c))}),r.loaded=r.loaded||{},r.loaded[i]=a})},Dt.prototype.reloadTile=function(t,e){var n=this.loaded,r=t.uid,i=this;if(n&&n[r]){var o=n[r];o.showCollisionBoxes=t.showCollisionBoxes;var a=function(t,n){var r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,i.actor,r)),e(t,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&o.parse(o.vectorTile,this.layerIndex,this.actor,a)}},Dt.prototype.abortTile=function(t,e){var n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()},Dt.prototype.removeTile=function(t,e){var n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()};var Bt=function(){this.loading={},this.loaded={}};Bt.prototype.loadTile=function(e,n){var r=e.uid,i=e.encoding,o=new t.default$33(r);this.loading[r]=o,o.loadFromImage(e.rawImageData,i),delete this.loading[r],this.loaded=this.loaded||{},this.loaded[r]=o,n(null,o)},Bt.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var jt={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142},Ft={geometry:function t(e){var n,r=0;switch(e.type){case"Polygon":return b(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=b(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}},ring:x},Nt=function t(e,n){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(E(t,n)),e;case"Feature":return e.geometry=t(e.geometry,n),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=S(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(E(S,e))),t}(e,n);default:return e}},Ut=t.default$31.VectorTileFeature.prototype.toGeoJSON,Vt=function(e){this._feature=e,this.extent=t.default$10,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};Vt.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var i=r[n];e.push([new t.default(i[0],i[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=[],l=0,c=s[a];l<c.length;l+=1){var p=c[l];u.push(new t.default(p[0],p[1]))}o.push(u)}return o},Vt.prototype.toGeoJSON=function(t,e,n){return Ut.call(this,t,e,n)};var qt=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.default$10,this.length=e.length,this._features=e};qt.prototype.feature=function(t){return new Vt(this._features[t])};var $t=t.__moduleExports.VectorTileFeature,Gt=k;k.prototype.feature=function(t){return new C(this.features[t],this.options.extent)},C.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var r=e[n],i=[],o=0;o<r.length;o++)i.push(new t.default$34(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},C.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[e,r,n,i]},C.prototype.toGeoJSON=$t.prototype.toGeoJSON;var Zt=P,Wt=P,Ht=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new Gt(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return P({layers:n})},Xt=Gt;Zt.fromVectorTileJs=Wt,Zt.fromGeojsonVt=Ht,Zt.GeoJSONWrapper=Xt,U.prototype={range:function(t,e,n,r){return function(t,e,n,r,i,o,a){for(var s,u,l=[0,t.length-1,0],c=[];l.length;){var p=l.pop(),h=l.pop(),f=l.pop();if(h-f<=a)for(var d=f;d<=h;d++)s=e[2*d],u=e[2*d+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(t[d]);else{var m=Math.floor((f+h)/2);s=e[2*m],u=e[2*m+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(t[m]);var y=(p+1)%2;(0===p?n<=s:r<=u)&&(l.push(f),l.push(m-1),l.push(y)),(0===p?i>=s:o>=u)&&(l.push(m+1),l.push(h),l.push(y))}}return c}(this.ids,this.coords,t,e,n,r,this.nodeSize)},within:function(t,e,n){return function(t,e,n,r,i,o){for(var a=[0,t.length-1,0],s=[],u=i*i;a.length;){var l=a.pop(),c=a.pop(),p=a.pop();if(c-p<=o)for(var h=p;h<=c;h++)F(e[2*h],e[2*h+1],n,r)<=u&&s.push(t[h]);else{var f=Math.floor((p+c)/2),d=e[2*f],m=e[2*f+1];F(d,m,n,r)<=u&&s.push(t[f]);var y=(l+1)%2;(0===l?n-i<=d:r-i<=m)&&(a.push(p),a.push(f-1),a.push(y)),(0===l?n+i>=d:r+i>=m)&&(a.push(f+1),a.push(c),a.push(y))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)}},$.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time("total time");var n="prepare "+t.length+" points";e&&console.time(n),this.points=t;for(var r,i,o,a=[],s=0;s<t.length;s++)t[s].geometry&&a.push((r=t[s],i=s,{x:H((o=r.geometry.coordinates)[0]),y:X(o[1]),zoom:1/0,id:i,parentId:-1}));this.trees[this.options.maxZoom+1]=N(a,Y,J,this.options.nodeSize,Float32Array),e&&console.timeEnd(n);for(var u=this.options.maxZoom;u>=this.options.minZoom;u--){var l=+Date.now();a=this._cluster(a,u),this.trees[u]=N(a,Y,J,this.options.nodeSize,Float32Array),e&&console.log("z%d: %d clusters in %dms",u,a.length,+Date.now()-l)}return e&&console.timeEnd("total time"),this},getClusters:function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],l=u.range(H(n),X(o),H(i),X(r)),c=[],p=0;p<l.length;p++){var h=u.points[l[p]];c.push(h.numPoints?Z(h):this.points[h.id])}return c},getChildren:function(t){var e=t>>5,n=t%32,r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),u=[],l=0;l<s.length;l++){var c=i.points[s[l]];c.parentId===t&&u.push(c.numPoints?Z(c):this.points[c.id])}if(0===u.length)throw new Error(r);return u},getLeaves:function(t,e,n){e=e||10,n=n||0;var r=[];return this._appendLeaves(r,t,e,n,0),r},getTile:function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options.extent,a=this.options.radius/o,s=(n-a)/i,u=(n+1+a)/i,l={features:[]};return this._addTileFeatures(r.range((e-a)/i,s,(e+1+a)/i,u),r.points,e,n,i,l),0===e&&this._addTileFeatures(r.range(1-a/i,s,1,u),r.points,i,n,i,l),e===i-1&&this._addTileFeatures(r.range(0,s,a/i,u),r.points,-1,n,i,l),l.features.length?l:null},getClusterExpansionZoom:function(t){for(var e=t%32-1;e<this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},_appendLeaves:function(t,e,n,r,i){for(var o=this.getChildren(e),a=0;a<o.length;a++){var s=o[a].properties;if(s&&s.cluster?i+s.point_count<=r?i+=s.point_count:i=this._appendLeaves(t,s.cluster_id,n,r,i):i<r?i++:t.push(o[a]),t.length===n)break}return i},_addTileFeatures:function(t,e,n,r,i,o){for(var a=0;a<t.length;a++){var s=e[t[a]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*i-n)),Math.round(this.options.extent*(s.y*i-r))]],tags:s.numPoints?W(s):this.points[s.id].properties})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var n=[],r=this.options.radius/(this.options.extent*Math.pow(2,e)),i=0;i<t.length;i++){var o=t[i];if(!(o.zoom<=e)){o.zoom=e;var a=this.trees[e+1],s=a.within(o.x,o.y,r),u=o.numPoints||1,l=o.x*u,c=o.y*u,p=null;this.options.reduce&&(p=this.options.initial(),this._accumulate(p,o));for(var h=(i<<5)+(e+1),f=0;f<s.length;f++){var d=a.points[s[f]];if(!(d.zoom<=e)){d.zoom=e;var m=d.numPoints||1;l+=d.x*m,c+=d.y*m,u+=m,d.parentId=h,this.options.reduce&&this._accumulate(p,d)}}1===u?n.push(o):(o.parentId=h,n.push(G(l/u,c/u,h,u,p)))}}return n},_accumulate:function(t,e){var n=e.numPoints?e.properties:this.options.map(this.points[e.id].properties);this.options.reduce(t,n)}},Et.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,debug:0},Et.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],u=this.options,l=u.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,p=St(e,n,r),h=this.tiles[p];if(!h&&(l>1&&console.time("creation"),h=this.tiles[p]=bt(t,e,n,r,u),this.tileCoords.push({z:e,x:n,y:r}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var f="z"+e;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(h.source=t,i){if(e===u.maxZoom||e===i)continue;var d=1<<i-e;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(e===u.indexMaxZoom||h.numPoints<=u.indexMaxPoints)continue;if(h.source=null,0!==t.length){l>1&&console.time("clipping");var m,y,v,g,_,b,x=.5*u.buffer/u.extent,w=.5-x,E=.5+x,S=1+x;m=y=v=g=null,_=ut(t,c,n-x,n+E,0,h.minX,h.maxX,u),b=ut(t,c,n+w,n+S,0,h.minX,h.maxX,u),t=null,_&&(m=ut(_,c,r-x,r+E,1,h.minY,h.maxY,u),y=ut(_,c,r+w,r+S,1,h.minY,h.maxY,u),_=null),b&&(v=ut(b,c,r-x,r+E,1,h.minY,h.maxY,u),g=ut(b,c,r+w,r+S,1,h.minY,h.maxY,u),b=null),l>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*n,2*r),s.push(y||[],e+1,2*n,2*r+1),s.push(v||[],e+1,2*n+1,2*r),s.push(g||[],e+1,2*n+1,2*r+1)}}},Et.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=St(t,e=(e%a+a)%a,n);if(this.tiles[s])return gt(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var u,l=t,c=e,p=n;!u&&l>0;)l--,c=Math.floor(c/2),p=Math.floor(p/2),u=this.tiles[St(l,c,p)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",l,c,p),o>1&&console.time("drilling down"),this.splitTile(u.source,l,c,p,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?gt(this.tiles[s],i):null):null};var Kt=function(e){function n(t,n,r){e.call(this,t,n,Tt),r&&(this.loadGeoJSON=r)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var t=this;if(this._pendingCallback&&this._pendingLoadDataParams){var e=this._pendingCallback,n=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var r=!!(n&&n.request&&n.request.collectResourceTiming)&&new Rt.Performance(n.request);this.loadGeoJSON(n,function(i,o){if(i||!o)return e(i);if("object"!=typeof o)return e(new Error("Input data is not a valid GeoJSON object."));Nt(o,!0);try{t._geoJSONIndex=n.cluster?(a=n.superclusterOptions,new $(a)).load(o.features):function(t,e){return new Et(t,e)}(o,n.geojsonVtOptions)}catch(i){return e(i)}t.loaded={};var a,s={};if(r){var u=r.finish();u&&(s.resourceTiming={},s.resourceTiming[n.source]=JSON.parse(JSON.stringify(u)))}e(null,s)})}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(t,n){var r=this.loaded,i=t.uid;return r&&r[i]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},n.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},n.prototype.getClusterExpansionZoom=function(t,e){e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))},n.prototype.getClusterChildren=function(t,e){e(null,this._geoJSONIndex.getChildren(t.clusterId))},n.prototype.getClusterLeaves=function(t,e){e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))},n}(Dt),Yt=function(e){var n=this;this.self=e,this.actor=new t.default$9(e,this),this.layerIndexes={},this.workerSourceTypes={vector:Dt,geojson:Kt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isLoaded())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText}};return Yt.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},Yt.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},Yt.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},Yt.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},Yt.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},Yt.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},Yt.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},Yt.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},Yt.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}},Yt.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},Yt.prototype.loadRTLTextPlugin=function(e,n,r){try{t.plugin.isLoaded()||(this.self.importScripts(n),r(t.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+n)))}catch(t){r(t.toString())}},Yt.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new kt),e},Yt.prototype.getWorkerSource=function(t,e,n){var r=this;if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){var i={send:function(e,n,i){r.actor.send(e,n,i,t)}};this.workerSources[t][e][n]=new this.workerSourceTypes[e](i,this.getLayerIndex(t))}return this.workerSources[t][e][n]},Yt.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new Bt),this.demWorkerSources[t][e]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&new Yt(self),Yt}),t(["./chunk1.js"],function(t){function e(t){if(!mt)return null;for(var e=0;e<t.length;e++)if(t[e]in mt)return t[e];return t[0]}function n(t,e){var n=i(xt.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"/"!==n.path&&(t.path=""+n.path+t.path),!xt.REQUIRE_ACCESS_TOKEN)return o(t);if(!(e=e||xt.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+wt);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+wt);return t.params.push("access_token="+e),o(t)}function r(t){return 0===t.indexOf("mapbox:")}function i(t){var e=t.match(Pt);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function o(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function a(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function s(t,e,n,r,i,o,a){for(var s=0;s<e;s++){for(var l=0;l<n;l++)r[l]=t[l*e+s];for(u(r,i,o,a,n),l=0;l<n;l++)t[l*e+s]=i[l]}for(l=0;l<n;l++){for(s=0;s<e;s++)r[s]=t[l*e+s];for(u(r,i,o,a,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(i[s])}}function u(t,e,n,r,i){n[0]=0,r[0]=-It,r[1]=+It;for(var o=1,a=0;o<i;o++){for(var s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)a--,s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=+It}for(o=0,a=0;o<i;o++){for(;r[a+1]<o;)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}}function l(e,n,r){var i=function(e,n){if(e)return r(e);if(n){var i=t.pick(n,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);n.vector_layers&&(i.vectorLayers=n.vector_layers,i.vectorLayerIds=i.vectorLayers.map(function(t){return t.id})),r(null,i)}};return e.url?t.getJSON(n(St(e.url),t.ResourceType.Source),i):t.default$2.frame(function(){return i(null,e)})}function c(t,e,n,r,i){var o=i.maxPitchScaleFactor(),a=t.tilesIn(n,o);a.sort(p);for(var s=[],u=0,l=a;u<l.length;u+=1){var c=l[u];s.push({wrappedTileID:c.tileID.wrapped().key,queryResults:c.tile.queryRenderedFeatures(e,t._state,c.queryGeometry,c.scale,r,i,o,t.transform.calculatePosMatrix(c.tileID.toUnwrapped()))})}var h=function(t){for(var e={},n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var l in a)for(var c=a[l],p=u[l]=u[l]||{},h=e[l]=e[l]||[],f=0,d=c;f<d.length;f+=1){var m=d[f];p[m.featureIndex]||(p[m.featureIndex]=!0,h.push(m.feature))}}return e}(s);for(var f in h)h[f].forEach(function(e){var n=t.getFeatureState(e.layer["source-layer"],e.id);e.source=e.layer.source,e.layer["source-layer"]&&(e.sourceLayer=e.layer["source-layer"]),e.state=n});return h}function p(t,e){var n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function h(e,n){var r=n.zoomTo(e.canonical.z);return new t.default((r.column-(e.canonical.x+e.wrap*Math.pow(2,e.canonical.z)))*t.default$10,(r.row-e.canonical.y)*t.default$10)}function f(t){return"raster"===t||"image"===t||"video"===t}function d(){return new t.default$1.Worker(pr.workerUrl)}function m(e,n){var r={};for(var i in e)"ref"!==i&&(r[i]=e[i]);return t.default$17.forEach(function(t){t in n&&(r[t]=n[t])}),r}function y(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=m(t[r],e[t[r].ref]));return t}function v(t,e,n){n.push({command:je.addSource,args:[t,e[t]]})}function g(t,e,n){e.push({command:je.removeSource,args:[t]}),n[t]=!0}function _(t,e,n,r){g(t,n,r),v(t,e,n)}function b(e,n,r){var i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t.default$13(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t.default$13(e[r][i],n[r][i]))return!1;return!0}function x(e,n,r,i,o,a){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t.default$13(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.default$13(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function w(t){return t.id}function E(t,e){return t[e.id]=e,t}function S(e,n){if(!e)return[{command:je.setStyle,args:[n]}];var r=[];try{if(!t.default$13(e.version,n.version))return[{command:je.setStyle,args:[n]}];t.default$13(e.center,n.center)||r.push({command:je.setCenter,args:[n.center]}),t.default$13(e.zoom,n.zoom)||r.push({command:je.setZoom,args:[n.zoom]}),t.default$13(e.bearing,n.bearing)||r.push({command:je.setBearing,args:[n.bearing]}),t.default$13(e.pitch,n.pitch)||r.push({command:je.setPitch,args:[n.pitch]}),t.default$13(e.sprite,n.sprite)||r.push({command:je.setSprite,args:[n.sprite]}),t.default$13(e.glyphs,n.glyphs)||r.push({command:je.setGlyphs,args:[n.glyphs]}),t.default$13(e.transition,n.transition)||r.push({command:je.setTransition,args:[n.transition]}),t.default$13(e.light,n.light)||r.push({command:je.setLight,args:[n.light]});var i={},o=[];!function(e,n,r,i){var o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||g(o,r,i));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.default$13(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&b(e,n,o)?r.push({command:je.setGeoJSONSourceData,args:[o,n[o].data]}):_(o,n,r,i)):v(o,n,r))}(e.sources,n.sources,o,i);var a=[];e.layers&&e.layers.forEach(function(t){i[t.source]?r.push({command:je.removeLayer,args:[t.id]}):a.push(t)}),r=r.concat(o),function(e,n,r){n=n||[];var i,o,a,s,u,l,c,p=(e=e||[]).map(w),h=n.map(w),f=e.reduce(E,{}),d=n.reduce(E,{}),m=p.slice(),y=Object.create(null);for(i=0,o=0;i<p.length;i++)a=p[i],d.hasOwnProperty(a)?o++:(r.push({command:je.removeLayer,args:[a]}),m.splice(m.indexOf(a,o),1));for(i=0,o=0;i<h.length;i++)a=h[h.length-1-i],m[m.length-1-i]!==a&&(f.hasOwnProperty(a)?(r.push({command:je.removeLayer,args:[a]}),m.splice(m.lastIndexOf(a,m.length-o),1)):o++,l=m[m.length-i],r.push({command:je.addLayer,args:[d[a],l]}),m.splice(m.length-i,0,a),y[a]=!0);for(i=0;i<h.length;i++)if(s=f[a=h[i]],u=d[a],!y[a]&&!t.default$13(s,u))if(t.default$13(s.source,u.source)&&t.default$13(s["source-layer"],u["source-layer"])&&t.default$13(s.type,u.type)){for(c in x(s.layout,u.layout,r,a,null,je.setLayoutProperty),x(s.paint,u.paint,r,a,null,je.setPaintProperty),t.default$13(s.filter,u.filter)||r.push({command:je.setFilter,args:[a,u.filter]}),t.default$13(s.minzoom,u.minzoom)&&t.default$13(s.maxzoom,u.maxzoom)||r.push({command:je.setLayerZoomRange,args:[a,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?x(s[c],u[c],r,a,c.slice(6),je.setPaintProperty):t.default$13(s[c],u[c])||r.push({command:je.setLayerProperty,args:[a,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?x(s[c],u[c],r,a,c.slice(6),je.setPaintProperty):t.default$13(s[c],u[c])||r.push({command:je.setLayerProperty,args:[a,c,u[c]]}))}else r.push({command:je.removeLayer,args:[a]}),l=m[m.lastIndexOf(a)+1],r.push({command:je.addLayer,args:[u,l]})}(a,n.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:je.setStyle,args:[n]}]}return r}function T(e,n,r,i,o){var a=t.identity(new Float32Array(16));return n?(t.identity(a),t.scale(a,a,[1/o,1/o,1]),r||t.rotateZ(a,a,i.angle)):(t.scale(a,a,[i.width/2,-i.height/2,1]),t.translate(a,a,[1,-1,0]),t.multiply(a,a,e)),a}function k(e,n,r,i,o){var a=t.identity(new Float32Array(16));return n?(t.multiply(a,a,e),t.scale(a,a,[o,o,1]),r||t.rotateZ(a,a,-i.angle)):(t.scale(a,a,[1,-1,1]),t.translate(a,a,[-1,-1,0]),t.scale(a,a,[2/i.width,2/i.height,1])),a}function C(e,n){var r=[e.x,e.y,0,1];D(r,r,n);var i=r[3];return{point:new t.default(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function P(t,e){var n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function A(e,n,r,i,o,a,s,u){var l=i?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(l,r.transform.zoom,Ne.properties[i?"text-size":"icon-size"]),p=[256/r.width*2+1,256/r.height*2+1],h=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;h.clear();for(var f=e.lineVertexArray,d=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,m=r.transform.width/r.transform.height,y=!1,v=0;v<d.length;v++){var g=d.get(v);if(g.hidden||g.writingMode===t.WritingMode.vertical&&!y)L(g.numGlyphs,h);else{y=!1;var _=[g.anchorX,g.anchorY,0,1];if(t.transformMat4(_,_,n),P(_,p)){var b=.5+_[3]/r.transform.cameraToCenterDistance*.5,x=t.evaluateSizeForFeature(l,c,g),w=s?x*b:x/b,E=new t.default(g.anchorX,g.anchorY),S=C(E,o).point,T={},k=M(g,w,!1,u,n,o,a,e.glyphOffsetArray,f,h,S,E,T,m);y=k.useVertical,(k.notEnoughRoom||y||k.needsFlipping&&M(g,w,!0,u,n,o,a,e.glyphOffsetArray,f,h,S,E,T,m).notEnoughRoom)&&L(g.numGlyphs,h)}else L(g.numGlyphs,h)}}i?e.text.dynamicLayoutVertexBuffer.updateData(h):e.icon.dynamicLayoutVertexBuffer.updateData(h)}function O(t,e,n,r,i,o,a,s,u,l,c,p){var h=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,m=e.getoffsetX(s.glyphStartIndex),y=e.getoffsetX(h-1),v=R(t*m,n,r,i,o,a,s.segment,f,d,u,l,c,p);if(!v)return null;var g=R(t*y,n,r,i,o,a,s.segment,f,d,u,l,c,p);return g?{first:v,last:g}:null}function I(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function M(e,n,r,i,o,a,s,u,l,c,p,h,f,d){var m,y=n/24,v=e.lineOffsetX*n,g=e.lineOffsetY*n;if(e.numGlyphs>1){var _=e.glyphStartIndex+e.numGlyphs,b=e.lineStartIndex,x=e.lineStartIndex+e.lineLength,w=O(y,u,v,g,r,p,h,e,l,a,f,!1);if(!w)return{notEnoughRoom:!0};var E=C(w.first.point,s).point,S=C(w.last.point,s).point;if(i&&!r){var T=I(e.writingMode,E,S,d);if(T)return T}m=[w.first];for(var k=e.glyphStartIndex+1;k<_-1;k++)m.push(R(y*u.getoffsetX(k),v,g,r,p,h,e.segment,b,x,l,a,f,!1));m.push(w.last)}else{if(i&&!r){var P=C(h,o).point,A=e.lineStartIndex+e.segment+1,M=new t.default(l.getx(A),l.gety(A)),L=C(M,o),D=L.signedDistanceFromCamera>0?L.point:z(h,M,P,1,o),B=I(e.writingMode,P,D,d);if(B)return B}var j=R(y*u.getoffsetX(e.glyphStartIndex),v,g,r,p,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,l,a,f,!1);if(!j)return{notEnoughRoom:!0};m=[j]}for(var F=0,N=m;F<N.length;F+=1){var U=N[F];t.addDynamicAttributes(c,U.point,U.angle)}return{}}function z(t,e,n,r,i){var o=C(t.add(t.sub(e)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))}function R(e,n,r,i,o,a,s,u,l,c,p,h,f){var d=i?e-n:e+n,m=d>0?1:-1,y=0;i&&(m*=-1,y=Math.PI),m<0&&(y+=Math.PI);for(var v=m>0?u+s:u+s+1,g=v,_=o,b=o,x=0,w=0,E=Math.abs(d);x+w<=E;){if((v+=m)<u||v>=l)return null;if(b=_,void 0===(_=h[v])){var S=new t.default(c.getx(v),c.gety(v)),T=C(S,p);if(T.signedDistanceFromCamera>0)_=h[v]=T.point;else{var k=v-m;_=z(0===x?a:new t.default(c.getx(k),c.gety(k)),S,b,E-x+1,p)}}x+=w,w=b.dist(_)}var P=(E-x)/w,A=_.sub(b),O=A.mult(P)._add(b);return O._add(A._unit()._perp()._mult(r*m)),{point:O,angle:y+Math.atan2(_.y-b.y,_.x-b.x),tileDistance:f?{prevTileDistance:v-m===g?0:c.gettileUnitDistanceFromAnchor(v-m),lastSegmentViewportDistance:E-x}:null}}function L(t,e){for(var n=0;n<t;n++){var r=e.length;e.resize(r+4),e.float32.set(Ue,3*r)}}function D(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}function B(t,e,n){t[e+4]=n?1:0}function j(e,n,r){return n*(t.default$10/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}function F(t,e,n){t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0)}function N(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*Xe+e*Ke+n*Ye+e*Je+n*Qe+e*tn+n*en+e}function U(e,n,r,i,o){for(var a=0;a<r.length;a++){var s=r[a];if(i.isLessThan(s.tileID))break;if(n.key===s.tileID.key)return;if(s.tileID.isChildOf(n)){for(var u=n.children(1/0),l=0;l<u.length;l++)U(e,u[l],r.slice(a),i,o);return}}var c=n.overscaledZ-e.overscaledZ,p=new t.CanonicalTileID(c,n.canonical.x-(e.canonical.x<<c),n.canonical.y-(e.canonical.y<<c));o[p.key]=o[p.key]||p}function V(t,e,n,r,i){var o=t.context,a=o.gl,s=i?t.useProgram("collisionCircle"):t.useProgram("collisionBox");o.setDepthMode(Ie.disabled),o.setStencilMode(Me.disabled),o.setColorMode(t.colorModeForRenderPass());for(var u=0;u<r.length;u++){var l=r[u],c=e.getTile(l),p=c.getBucket(n);if(p){var h=i?p.collisionCircle:p.collisionBox;if(h){a.uniformMatrix4fv(s.uniforms.u_matrix,!1,l.posMatrix),a.uniform1f(s.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance);var f=j(c,1,t.transform.zoom),d=Math.pow(2,t.transform.zoom-c.tileID.overscaledZ);a.uniform1f(s.uniforms.u_pixels_to_tile_units,f),a.uniform2f(s.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits[0]/(f*d),t.transform.pixelsToGLUnits[1]/(f*d)),a.uniform1f(s.uniforms.u_overscale_factor,c.tileID.overscaleFactor()),s.draw(o,i?a.TRIANGLES:a.LINES,n.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,null,h.collisionVertexBuffer,null)}}}}function q(t,e,n,r,i,o,a,s,u,l){var c,p=t.context,h=p.gl,f=t.transform,d="map"===s,m="map"===u,y=d&&"point"!==n.layout.get("symbol-placement"),v=d&&!m&&!y,g=m;p.setDepthMode(g?t.depthModeForSublayer(0,Ie.ReadOnly):Ie.disabled);for(var _=0,b=r;_<b.length;_+=1){var x=b[_],w=e.getTile(x),E=w.getBucket(n);if(E){var S=i?E.text:E.icon;if(S&&S.segments.get().length){var C=S.programConfigurations.get(n.id),P=i||E.sdfIcons,O=i?E.textSizeData:E.iconSizeData;if(c||(c=t.useProgram(P?"symbolSDF":"symbolIcon",C),C.setUniforms(t.context,c,n.paint,{zoom:t.transform.zoom}),$(c,t,n,i,v,m,O)),p.activeTexture.set(h.TEXTURE0),h.uniform1i(c.uniforms.u_texture,0),i)w.glyphAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.uniform2fv(c.uniforms.u_texsize,w.glyphAtlasTexture.size);else{var I=1!==n.layout.get("icon-size").constantOr(0)||E.iconsNeedLinear,M=m||0!==f.pitch;w.iconAtlasTexture.bind(P||t.options.rotating||t.options.zooming||I||M?h.LINEAR:h.NEAREST,h.CLAMP_TO_EDGE),h.uniform2fv(c.uniforms.u_texsize,w.iconAtlasTexture.size)}h.uniformMatrix4fv(c.uniforms.u_matrix,!1,t.translatePosMatrix(x.posMatrix,w,o,a));var z=j(w,1,t.transform.zoom),R=T(x.posMatrix,m,d,t.transform,z),L=k(x.posMatrix,m,d,t.transform,z);h.uniformMatrix4fv(c.uniforms.u_gl_coord_matrix,!1,t.translatePosMatrix(L,w,o,a,!0)),y?(h.uniformMatrix4fv(c.uniforms.u_label_plane_matrix,!1,bn),A(E,x.posMatrix,t,i,R,L,m,l)):h.uniformMatrix4fv(c.uniforms.u_label_plane_matrix,!1,R),h.uniform1f(c.uniforms.u_fade_change,t.options.fadeDuration?t.symbolFadeChange:1),G(c,C,t,n,w,S,i,P,m)}}}}function $(e,n,r,i,o,a,s){var u=n.context.gl,l=n.transform;u.uniform1i(e.uniforms.u_pitch_with_map,a?1:0),u.uniform1f(e.uniforms.u_is_text,i?1:0),u.uniform1f(e.uniforms.u_pitch,l.pitch/360*2*Math.PI);var c="constant"===s.functionType||"source"===s.functionType,p="constant"===s.functionType||"camera"===s.functionType;u.uniform1i(e.uniforms.u_is_size_zoom_constant,c?1:0),u.uniform1i(e.uniforms.u_is_size_feature_constant,p?1:0),u.uniform1f(e.uniforms.u_camera_to_center_distance,l.cameraToCenterDistance);var h=t.evaluateSizeForZoom(s,l.zoom,xn.properties[i?"text-size":"icon-size"]);void 0!==h.uSizeT&&u.uniform1f(e.uniforms.u_size_t,h.uSizeT),void 0!==h.uSize&&u.uniform1f(e.uniforms.u_size,h.uSize),u.uniform1f(e.uniforms.u_aspect_ratio,l.width/l.height),u.uniform1i(e.uniforms.u_rotate_symbol,o?1:0)}function G(t,e,n,r,i,o,a,s,u){var l=n.context,c=l.gl,p=n.transform;if(s){var h=0!==r.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),f=u?Math.cos(p._pitch)*p.cameraToCenterDistance:1;c.uniform1f(t.uniforms.u_gamma_scale,f),h&&(c.uniform1f(t.uniforms.u_is_halo,1),Z(o,r,l,t)),c.uniform1f(t.uniforms.u_is_halo,0)}Z(o,r,l,t)}function Z(t,e,n,r){r.draw(n,n.gl.TRIANGLES,e.id,t.layoutVertexBuffer,t.indexBuffer,t.segments,t.programConfigurations.get(e.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function W(e,n,r,i,o,a,s,u,l){var c,p,h,f,d=n.context,m=d.gl,y=o.paint.get("line-dasharray"),v=o.paint.get("line-pattern");if(u||l){var g=1/j(r,1,n.transform.tileZoom);if(y){c=n.lineAtlas.getDash(y.from,"round"===o.layout.get("line-cap")),p=n.lineAtlas.getDash(y.to,"round"===o.layout.get("line-cap"));var _=c.width*y.fromScale,b=p.width*y.toScale;m.uniform2f(e.uniforms.u_patternscale_a,g/_,-c.height/2),m.uniform2f(e.uniforms.u_patternscale_b,g/b,-p.height/2),m.uniform1f(e.uniforms.u_sdfgamma,n.lineAtlas.width/(256*Math.min(_,b)*t.default$2.devicePixelRatio)/2)}else if(v){if(h=n.imageManager.getPattern(v.from),f=n.imageManager.getPattern(v.to),!h||!f)return;m.uniform2f(e.uniforms.u_pattern_size_a,h.displaySize[0]*v.fromScale/g,h.displaySize[1]),m.uniform2f(e.uniforms.u_pattern_size_b,f.displaySize[0]*v.toScale/g,f.displaySize[1]);var x=n.imageManager.getPixelSize(),w=x.width,E=x.height;m.uniform2fv(e.uniforms.u_texsize,[w,E])}m.uniform2f(e.uniforms.u_gl_units_to_pixels,1/n.transform.pixelsToGLUnits[0],1/n.transform.pixelsToGLUnits[1])}u&&(y?(m.uniform1i(e.uniforms.u_image,0),d.activeTexture.set(m.TEXTURE0),n.lineAtlas.bind(d),m.uniform1f(e.uniforms.u_tex_y_a,c.y),m.uniform1f(e.uniforms.u_tex_y_b,p.y),m.uniform1f(e.uniforms.u_mix,y.t)):v&&(m.uniform1i(e.uniforms.u_image,0),d.activeTexture.set(m.TEXTURE0),n.imageManager.bind(d),m.uniform2fv(e.uniforms.u_pattern_tl_a,h.tl),m.uniform2fv(e.uniforms.u_pattern_br_a,h.br),m.uniform2fv(e.uniforms.u_pattern_tl_b,f.tl),m.uniform2fv(e.uniforms.u_pattern_br_b,f.br),m.uniform1f(e.uniforms.u_fade,v.t))),d.setStencilMode(n.stencilModeForClipping(a));var S=n.translatePosMatrix(a.posMatrix,r,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"));if(m.uniformMatrix4fv(e.uniforms.u_matrix,!1,S),m.uniform1f(e.uniforms.u_ratio,1/j(r,1,n.transform.zoom)),o.paint.get("line-gradient")){d.activeTexture.set(m.TEXTURE0);var T=o.gradientTexture;if(!o.gradient)return;T||(T=o.gradientTexture=new t.default$4(d,o.gradient,m.RGBA)),T.bind(m.LINEAR,m.CLAMP_TO_EDGE),m.uniform1i(e.uniforms.u_image,0)}e.draw(d,m.TRIANGLES,o.id,i.layoutVertexBuffer,i.indexBuffer,i.segments,s)}function H(t,e,n,r,i){if(!wn(n.paint.get("fill-pattern"),t))for(var o=!0,a=0,s=r;a<s.length;a+=1){var u=s[a],l=e.getTile(u),c=l.getBucket(n);c&&(t.context.setStencilMode(t.stencilModeForClipping(u)),i(t,e,n,l,u,c,o),o=!1)}}function X(t,e,n,r,i,o,a){var s=t.context.gl,u=o.programConfigurations.get(n.id);Y("fill",n.paint.get("fill-pattern"),t,u,n,r,i,a).draw(t.context,s.TRIANGLES,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,u)}function K(t,e,n,r,i,o,a){var s=t.context.gl,u=o.programConfigurations.get(n.id),l=Y("fillOutline",n.getPaintProperty("fill-outline-color")?null:n.paint.get("fill-pattern"),t,u,n,r,i,a);s.uniform2f(l.uniforms.u_world,s.drawingBufferWidth,s.drawingBufferHeight),l.draw(t.context,s.LINES,n.id,o.layoutVertexBuffer,o.indexBuffer2,o.segments2,u)}function Y(t,e,n,r,i,o,a,s){var u,l=n.context.program.get();return e?(u=n.useProgram(t+"Pattern",r),(s||u.program!==l)&&(r.setUniforms(n.context,u,i.paint,{zoom:n.transform.zoom}),En(e,n,u)),Sn(o,n,u)):(u=n.useProgram(t,r),(s||u.program!==l)&&r.setUniforms(n.context,u,i.paint,{zoom:n.transform.zoom})),n.context.gl.uniformMatrix4fv(u.uniforms.u_matrix,!1,n.translatePosMatrix(a.posMatrix,o,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"))),u}function J(e,n,r,i,o,a,s){var u=e.context,l=u.gl,c=r.paint.get("fill-extrusion-pattern"),p=e.context.program.get(),h=a.programConfigurations.get(r.id),f=e.useProgram(c?"fillExtrusionPattern":"fillExtrusion",h);if((s||f.program!==p)&&h.setUniforms(u,f,r.paint,{zoom:e.transform.zoom}),c){if(wn(c,e))return;En(c,e,f),Sn(i,e,f),l.uniform1f(f.uniforms.u_height_factor,-Math.pow(2,o.overscaledZ)/i.tileSize/8)}e.context.gl.uniformMatrix4fv(f.uniforms.u_matrix,!1,e.translatePosMatrix(o.posMatrix,i,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor"))),function(e,n){var r=n.context.gl,i=n.style.light,o=i.properties.get("position"),a=[o.x,o.y,o.z],s=t.create$2();"viewport"===i.properties.get("anchor")&&t.fromRotation(s,-n.transform.angle),t.transformMat3(a,a,s);var u=i.properties.get("color");r.uniform3fv(e.uniforms.u_lightpos,a),r.uniform1f(e.uniforms.u_lightintensity,i.properties.get("intensity")),r.uniform3f(e.uniforms.u_lightcolor,u.r,u.g,u.b)}(f,e),f.draw(u,l.TRIANGLES,r.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,h)}function Q(e,n,r){var i=e.context,o=i.gl,a=n.fbo;if(a){var s=e.useProgram("hillshade"),u=e.transform.calculatePosMatrix(n.tileID.toUnwrapped(),!0);!function(t,e,n){var r=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(r-=e.transform.angle),e.context.gl.uniform2f(t.uniforms.u_light,n.paint.get("hillshade-exaggeration"),r)}(s,e,r);var l=function(e,n){var r=n.toCoordinate(),i=new t.default$15(r.column,r.row+1,r.zoom);return[e.transform.coordinateLocation(r).lat,e.transform.coordinateLocation(i).lat]}(e,n.tileID);i.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,a.colorAttachment.get()),o.uniformMatrix4fv(s.uniforms.u_matrix,!1,u),o.uniform2fv(s.uniforms.u_latrange,l),o.uniform1i(s.uniforms.u_image,0);var c=r.paint.get("hillshade-shadow-color");o.uniform4f(s.uniforms.u_shadow,c.r,c.g,c.b,c.a);var p=r.paint.get("hillshade-highlight-color");o.uniform4f(s.uniforms.u_highlight,p.r,p.g,p.b,p.a);var h=r.paint.get("hillshade-accent-color");if(o.uniform4f(s.uniforms.u_accent,h.r,h.g,h.b,h.a),n.maskedBoundsBuffer&&n.maskedIndexBuffer&&n.segments)s.draw(i,o.TRIANGLES,r.id,n.maskedBoundsBuffer,n.maskedIndexBuffer,n.segments);else{var f=e.rasterBoundsBuffer;e.rasterBoundsVAO.bind(i,s,f,[]),o.drawArrays(o.TRIANGLE_STRIP,0,f.length)}}}function tt(e,n,r){var i=e.context,o=i.gl;if(n.dem&&n.dem.level){var a=n.dem.level.dim,s=n.dem.getPixels();if(i.activeTexture.set(o.TEXTURE1),i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(n.tileSize),n.demTexture){var u=n.demTexture;u.update(s,{premultiply:!1}),u.bind(o.NEAREST,o.CLAMP_TO_EDGE)}else n.demTexture=new t.default$4(i,s,o.RGBA,{premultiply:!1}),n.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE);i.activeTexture.set(o.TEXTURE0);var l=n.fbo;if(!l){var c=new t.default$4(i,{width:a,height:a,data:null},o.RGBA);c.bind(o.LINEAR,o.CLAMP_TO_EDGE),(l=n.fbo=i.createFramebuffer(a,a)).colorAttachment.set(c.texture)}i.bindFramebuffer.set(l.framebuffer),i.viewport.set([0,0,a,a]);var p=t.create();t.ortho(p,0,t.default$10,-t.default$10,0,0,1),t.translate(p,p,[0,-t.default$10,0]);var h=e.useProgram("hillshadePrepare");o.uniformMatrix4fv(h.uniforms.u_matrix,!1,p),o.uniform1f(h.uniforms.u_zoom,n.tileID.overscaledZ),o.uniform2fv(h.uniforms.u_dimension,[2*a,2*a]),o.uniform1i(h.uniforms.u_image,1),o.uniform1f(h.uniforms.u_maxzoom,r);var f=e.rasterBoundsBuffer;e.rasterBoundsVAO.bind(i,h,f,[]),o.drawArrays(o.TRIANGLE_STRIP,0,f.length),n.needsHillshadePrepare=!1}}function et(e,n,r,i,o){var a=i.paint.get("raster-fade-duration");if(a>0){var s=t.default$2.now(),u=(s-e.timeAdded)/a,l=n?(s-n.timeAdded)/a:-1,c=r.getSource(),p=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-p)>Math.abs(e.tileID.overscaledZ-p),f=h&&e.refreshedUponExpiration?1:t.clamp(h?u:1-l,0,1);return e.refreshedUponExpiration&&u>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}function nt(e,n,r){var i=e.context,o=i.gl,a=r.posMatrix,s=e.useProgram("debug");i.setDepthMode(Ie.disabled),i.setStencilMode(Me.disabled),i.setColorMode(e.colorModeForRenderPass()),o.uniformMatrix4fv(s.uniforms.u_matrix,!1,a),o.uniform4f(s.uniforms.u_color,1,0,0,1),e.debugVAO.bind(i,s,e.debugBuffer,[]),o.drawArrays(o.LINE_STRIP,0,e.debugBuffer.length);for(var u=function(t,e,n,r){r=r||1;var i,o,a,s,u,l,c,p,h=[];for(i=0,o=t.length;i<o;i++)if(u=Tn[t[i]]){for(p=null,a=0,s=u[1].length;a<s;a+=2)-1===u[1][a]&&-1===u[1][a+1]?p=null:(l=e+u[1][a]*r,c=200-u[1][a+1]*r,p&&h.push(p.x,p.y,l,c),p={x:l,y:c});e+=u[0]*r}return h}(r.toString(),50,0,5),l=new t.PosArray,c=0;c<u.length;c+=2)l.emplaceBack(u[c],u[c+1]);var p=i.createVertexBuffer(l,dn.members);(new Gt).bind(i,s,p,[]),o.uniform4f(s.uniforms.u_color,1,1,1,1);for(var h=n.getTile(r).tileSize,f=t.default$10/(Math.pow(2,e.transform.zoom-r.overscaledZ)*h),d=[[-1,-1],[-1,1],[1,-1],[1,1]],m=0;m<d.length;m++){var y=d[m];o.uniformMatrix4fv(s.uniforms.u_matrix,!1,t.translate([],a,[f*y[0],f*y[1],0])),o.drawArrays(o.LINES,0,p.length)}o.uniform4f(s.uniforms.u_color,0,0,0,1),o.uniformMatrix4fv(s.uniforms.u_matrix,!1,a),o.drawArrays(o.LINES,0,p.length)}function rt(t,e){if(t.row>e.row){var n=t;t=e,e=n}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function it(t,e,n,r,i){var o=Math.max(n,Math.floor(e.y0)),a=Math.min(r,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var u=t.dx/t.dy,l=e.dx/e.dy,c=t.dx>0,p=e.dx<0,h=o;h<a;h++){var f=u*Math.max(0,Math.min(t.dy,h+c-t.y0))+t.x0,d=l*Math.max(0,Math.min(e.dy,h+p-e.y0))+e.x0;i(Math.floor(d),Math.ceil(f),h)}}function ot(t,e,n,r,i,o){var a,s=rt(t,e),u=rt(e,n),l=rt(n,t);s.dy>u.dy&&(a=s,s=u,u=a),s.dy>l.dy&&(a=s,s=l,l=a),u.dy>l.dy&&(a=u,u=l,l=a),s.dy&&it(l,s,r,i,o),u.dy&&it(l,u,r,i,o)}function at(t){return t*(2-t)}function st(t){t.parentNode&&t.parentNode.removeChild(t)}function ut(t,e,n){if(t=new jt(t.lng,t.lat),e){var r=new jt(t.lng-360,t.lat),i=new jt(t.lng+360,t.lat),o=n.locationPoint(t).distSqr(e);n.locationPoint(r).distSqr(e)<o?t=r:n.locationPoint(i).distSqr(e)<o&&(t=i)}for(;Math.abs(t.lng-n.center.lng)>180;){var a=n.locationPoint(t);if(a.x>=0&&a.y>=0&&a.x<=n.width&&a.y<=n.height)break;t.lng>n.center.lng?t.lng-=360:t.lng+=360}return t}function lt(t,e,n){var r=t.classList;for(var i in nr)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+e)}function ct(t,e,n){var r,i,o,a,s,u,l=n&&n.maxWidth||100,c=t._container.clientHeight/2,p=(r=t.unproject([0,c]),i=t.unproject([l,c]),o=Math.PI/180,a=r.lat*o,s=i.lat*o,u=Math.sin(a)*Math.sin(s)+Math.cos(a)*Math.cos(s)*Math.cos((i.lng-r.lng)*o),6371e3*Math.acos(Math.min(u,1)));if(n&&"imperial"===n.unit){var h=3.2808*p;h>5280?pt(e,l,h/5280,"mi"):pt(e,l,h,"ft")}else n&&"nautical"===n.unit?pt(e,l,p/1852,"nm"):pt(e,l,p,"m")}function pt(t,e,n,r){var i,o,a,s=(i=n,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(a=(a=i/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:1)),u=s/n;"m"===r&&s>=1e3&&(s/=1e3,r="km"),t.style.width=e*u+"px",t.innerHTML=s+r}var ht,ft=t.createCommonjsModule(function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(t){return void 0===n[t]&&(n[t]=function(t){var n=document.createElement("canvas"),r=Object.create(e.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(t)),n[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var n={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),dt={create:function(e,n,r){var i=t.default$1.document.createElement(e);return n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(e,n){return t.default$1.document.createElementNS(e,n)}},mt=t.default$1.document?t.default$1.document.documentElement.style:null,yt=e(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);dt.disableDrag=function(){mt&&yt&&(ht=mt[yt],mt[yt]="none")},dt.enableDrag=function(){mt&&yt&&(mt[yt]=ht)};var vt=e(["transform","WebkitTransform"]);dt.setTransform=function(t,e){t.style[vt]=e};var gt=!1;try{var _t=Object.defineProperty({},"passive",{get:function(){gt=!0}});t.default$1.addEventListener("test",_t,_t),t.default$1.removeEventListener("test",_t,_t)}catch(t){gt=!1}dt.addEventListener=function(t,e,n,r){void 0===r&&(r={}),"passive"in r&&gt?t.addEventListener(e,n,r):t.addEventListener(e,n,r.capture)},dt.removeEventListener=function(t,e,n,r){void 0===r&&(r={}),"passive"in r&&gt?t.removeEventListener(e,n,r):t.removeEventListener(e,n,r.capture)};var bt=function(e){e.preventDefault(),e.stopPropagation(),t.default$1.removeEventListener("click",bt,!0)};dt.suppressClick=function(){t.default$1.addEventListener("click",bt,!0),t.default$1.setTimeout(function(){t.default$1.removeEventListener("click",bt,!0)},0)},dt.mousePos=function(e,n){var r=e.getBoundingClientRect();return n=n.touches?n.touches[0]:n,new t.default(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop)},dt.touchPos=function(e,n){for(var r=e.getBoundingClientRect(),i=[],o="touchend"===n.type?n.changedTouches:n.touches,a=0;a<o.length;a++)i.push(new t.default(o[a].clientX-r.left-e.clientLeft,o[a].clientY-r.top-e.clientTop));return i},dt.mouseButton=function(e){return void 0!==t.default$1.InstallTrigger&&2===e.button&&e.ctrlKey&&t.default$1.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},dt.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var xt={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null},wt="See https://www.mapbox.com/api-documentation/#access-tokens",Et=function(t,e){if(!r(t))return t;var o=i(t);return o.path="/fonts/v1"+o.path,n(o,e)},St=function(t,e){if(!r(t))return t;var o=i(t);return o.path="/v4/"+o.authority+".json",o.params.push("secure"),n(o,e)},Tt=function(t,e,a,s){var u=i(t);return r(t)?(u.path="/styles/v1"+u.path+"/sprite"+e+a,n(u,s)):(u.path+=""+e+a,o(u))},kt=/(\.(png|jpg)\d*)(?=$)/,Ct=function(e,n,a){if(!n||!r(n))return e;var s=i(e),u=t.default$2.devicePixelRatio>=2||512===a?"@2x":"",l=t.default$2.supportsWebp?".webp":"$1";return s.path=s.path.replace(kt,""+u+l),function(t){for(var e=0;e<t.length;e++)0===t[e].indexOf("access_token=tk.")&&(t[e]="access_token="+(xt.ACCESS_TOKEN||""))}(s.params),o(s)},Pt=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/,At=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new t.default$3(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=new t.RGBAImage({width:64,height:64}),this.dirty=!0};At.prototype.isLoaded=function(){return this.loaded},At.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var r=n[e],i=r.ids,o=r.callback;this._notify(i,o)}this.requestors=[]}},At.prototype.getImage=function(t){return this.images[t]},At.prototype.addImage=function(t,e){this.images[t]=e},At.prototype.removeImage=function(t){delete this.images[t];var e=this.patterns[t];e&&(this.shelfPack.unref(e.bin),delete this.patterns[t])},At.prototype.listImages=function(){return Object.keys(this.images)},At.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var r=0,i=t;r<i.length;r+=1){var o=i[r];this.images[o]||(n=!1)}this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},At.prototype._notify=function(t,e){for(var n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=this.images[o];a&&(n[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf})}e(null,n)},At.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},At.prototype.getPattern=function(e){var n=this.patterns[e];if(n)return n.position;var r=this.getImage(e);if(!r)return null;var i=r.data.width+2,o=r.data.height+2,a=this.shelfPack.packOne(i,o);if(!a)return null;this.atlasImage.resize(this.getPixelSize());var s=r.data,u=this.atlasImage,l=a.x+1,c=a.y+1,p=s.width,h=s.height;t.RGBAImage.copy(s,u,{x:0,y:0},{x:l,y:c},{width:p,height:h}),t.RGBAImage.copy(s,u,{x:0,y:h-1},{x:l,y:c-1},{width:p,height:1}),t.RGBAImage.copy(s,u,{x:0,y:0},{x:l,y:c+h},{width:p,height:1}),t.RGBAImage.copy(s,u,{x:p-1,y:0},{x:l-1,y:c},{width:1,height:h}),t.RGBAImage.copy(s,u,{x:0,y:0},{x:l+p,y:c},{width:1,height:h}),this.dirty=!0;var f=new t.ImagePosition(a,r);return this.patterns[e]={bin:a,position:f},f},At.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.default$4(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)};var Ot=a,It=1e20;a.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=e.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?It:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?It:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(s(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),s(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var o=this.gridOuter[r]-this.gridInner[r];n[r]=Math.max(0,Math.min(255,Math.round(255-255*(o/this.radius+this.cutoff))))}return n};var Mt=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}};Mt.prototype.setURL=function(t){this.url=t},Mt.prototype.getGlyphs=function(e,n){var r=this,i=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1){var u=s[a];i.push({stack:o,id:u})}t.asyncAll(i,function(t,e){var n=t.stack,i=t.id,o=r.entries[n];o||(o=r.entries[n]={glyphs:{},requests:{}});var a=o.glyphs[i];if(void 0===a)if(a=r._tinySDF(o,n,i))e(null,{stack:n,id:i,glyph:a});else{var s=Math.floor(i/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else{var u=o.requests[s];u||(u=o.requests[s]=[],Mt.loadGlyphRange(n,s,r.url,r.requestTransform,function(t,e){if(e)for(var n in e)o.glyphs[+n]=e[+n];for(var r=0,i=u;r<i.length;r+=1)(0,i[r])(t,e);delete o.requests[s]})),u.push(function(t,r){t?e(t):r&&e(null,{stack:n,id:i,glyph:r[i]||null})})}}else e(null,{stack:n,id:i,glyph:a})},function(t,e){if(t)n(t);else if(e){for(var r={},i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.stack,u=a.id,l=a.glyph;(r[s]||(r[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}n(null,r)}})},Mt.prototype._tinySDF=function(e,n,r){var i=this.localIdeographFontFamily;if(i&&(t.default$6["CJK Unified Ideographs"](r)||t.default$6["Hangul Syllables"](r))){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),o=e.tinySDF=new Mt.TinySDF(24,3,8,.25,i,a)}return{id:r,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Mt.loadGlyphRange=function(e,n,r,i,o){var a=256*n,s=a+255,u=i(Et(r).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(u,function(e,n){if(e)o(e);else if(n){for(var r={},i=0,a=t.default$5(n.data);i<a.length;i+=1){var s=a[i];r[s.id]=s}o(null,r)}})},Mt.TinySDF=Ot;var zt=function(){this.specification=t.default$7.light.position};zt.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},zt.prototype.interpolate=function(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r)}};var Rt=new t.Properties({anchor:new t.DataConstantProperty(t.default$7.light.anchor),position:new zt,color:new t.DataConstantProperty(t.default$7.light.color),intensity:new t.DataConstantProperty(t.default$7.light.intensity)}),Lt=function(e){function n(n){e.call(this),this._transitionable=new t.Transitionable(Rt),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(e){if(!this._validate(t.validateLight,e))for(var n in e){var r=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-"-transition".length),r):this._transitionable.setValue(n,r)}},n.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},n.prototype._validate=function(e,n){return t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.default$7})))},n}(t.Evented),Dt=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};Dt.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},Dt.prototype.addDash=function(e,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];for(var s=this.width/o,u=s/2,l=e.length%2==1,c=-r;c<=r;c++)for(var p=this.nextRow+r+c,h=this.width*p,f=l?-e[e.length-1]:0,d=e[0],m=1,y=0;y<this.width;y++){for(;d<y/s;)f=d,d+=e[m],l&&m===e.length-1&&(d+=e[0]),m++;var v=Math.abs(y-f*s),g=Math.abs(y-d*s),_=Math.min(v,g),b=m%2==1,x=void 0;if(n){var w=r?c/r*(u+1):0;if(b){var E=u-Math.abs(w);x=Math.sqrt(_*_+E*E)}else x=u-Math.sqrt(_*_+w*w)}else x=(b?1:-1)*_;this.data[3+4*(h+y)]=Math.max(0,Math.min(255,x+128))}var S={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,S},Dt.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))};var Bt=function e(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=i[o],s=new e.Actor(a,r,this.id);s.name="Worker "+o,this.actors.push(s)}};Bt.prototype.broadcast=function(e,n,r){r=r||function(){},t.asyncAll(this.actors,function(t,r){t.send(e,n,r)},r)},Bt.prototype.send=function(t,e,n,r){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(t,e,n),r},Bt.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},Bt.Actor=t.default$9;var jt=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};jt.prototype.wrap=function(){return new jt(t.wrap(this.lng,-180,180),this.lat)},jt.prototype.toArray=function(){return[this.lng,this.lat]},jt.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},jt.prototype.toBounds=function(t){var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new Ft(new jt(this.lng-n,this.lat-e),new jt(this.lng+n,this.lat+e))},jt.convert=function(t){if(t instanceof jt)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new jt(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new jt(Number(t.lng),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ft=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Ft.prototype.setNorthEast=function(t){return this._ne=t instanceof jt?new jt(t.lng,t.lat):jt.convert(t),this},Ft.prototype.setSouthWest=function(t){return this._sw=t instanceof jt?new jt(t.lng,t.lat):jt.convert(t),this},Ft.prototype.extend=function(t){var e,n,r=this._sw,i=this._ne;if(t instanceof jt)e=t,n=t;else{if(!(t instanceof Ft))return Array.isArray(t)?t.every(Array.isArray)?this.extend(Ft.convert(t)):this.extend(jt.convert(t)):this;if(e=t._sw,n=t._ne,!e||!n)return this}return r||i?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new jt(e.lng,e.lat),this._ne=new jt(n.lng,n.lat)),this},Ft.prototype.getCenter=function(){return new jt((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Ft.prototype.getSouthWest=function(){return this._sw},Ft.prototype.getNorthEast=function(){return this._ne},Ft.prototype.getNorthWest=function(){return new jt(this.getWest(),this.getNorth())},Ft.prototype.getSouthEast=function(){return new jt(this.getEast(),this.getSouth())},Ft.prototype.getWest=function(){return this._sw.lng},Ft.prototype.getSouth=function(){return this._sw.lat},Ft.prototype.getEast=function(){return this._ne.lng},Ft.prototype.getNorth=function(){return this._ne.lat},Ft.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Ft.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Ft.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Ft.convert=function(t){return!t||t instanceof Ft?t:new Ft(t)};var Nt=function(t,e,n){this.bounds=Ft.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=n||24};Nt.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},Nt.prototype.contains=function(t){var e=Math.floor(this.lngX(this.bounds.getWest(),t.z)),n=Math.floor(this.latY(this.bounds.getNorth(),t.z)),r=Math.ceil(this.lngX(this.bounds.getEast(),t.z)),i=Math.ceil(this.latY(this.bounds.getSouth(),t.z));return t.x>=e&&t.x<r&&t.y>=n&&t.y<i},Nt.prototype.lngX=function(t,e){return(t+180)*(Math.pow(2,e)/360)},Nt.prototype.latY=function(e,n){var r=t.clamp(Math.sin(Math.PI/180*e),-.9999,.9999),i=Math.pow(2,n)/(2*Math.PI);return Math.pow(2,n-1)+.5*Math.log((1+r)/(1-r))*-i};var Ut=function(e){function n(n,r,i,o){if(e.call(this),this.id=n,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,t.extend(this,t.pick(r,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=l(this._options,this.map._transformRequest,function(n,r){e._tileJSONRequest=null,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new Nt(r.bounds,e.minzoom,e.maxzoom)),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.loadTile=function(e,n){function r(t,r){return e.aborted?n(null):t?n(t):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}var i=Ct(e.tileID.canonical.url(this.tiles,this.scheme),this.url),o={request:this.map._transformRequest(i,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.default$2.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};o.request.collectResourceTiming=this._collectResourceTiming,void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",o,r.bind(this)):"loading"===e.state?e.reloadCallback=n:this.dispatcher.send("reloadTile",o,r.bind(this),e.workerID)},n.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},n.prototype.hasTransition=function(){return!1},n}(t.Evented),Vt=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({},r),t.extend(this,t.pick(r,["url","scheme","tileSize"]))}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=l(this._options,this.map._transformRequest,function(n,r){e._tileJSONRequest=null,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new Nt(r.bounds,e.minzoom,e.maxzoom)),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.loadTile=function(e,n){var r=this,i=Ct(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(i,t.ResourceType.Tile),function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){r.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=r.map.painter.context,s=a.gl;e.texture=r.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.default$4(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",n(null)}})},n.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},n.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},n.prototype.hasTransition=function(){return!1},n}(t.Evented),qt=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({},r),this.encoding=r.encoding||"mapbox"}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(e,n){var r=Ct(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(r,t.ResourceType.Tile),function(r,i){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(i){this.map._refreshExpiredTiles&&e.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=t.default$2.getImageData(i),a={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:o,encoding:this.encoding};e.workerID&&"expired"!==e.state||(e.workerID=this.dispatcher.send("loadDEMTile",a,function(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},n.prototype._getNeighboringTiles=function(e){var n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,u={};return u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),u},n.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID)},n}(Vt),$t=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=i,this.setEventedParent(o),this._data=r.data,this._options=t.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution);var a=t.default$10/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*a,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*a,extent:t.default$10,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.default$10,radius:(r.clusterRadius||50)*a,log:!1}},r.workerOptions)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(n){if(n)e.fire(new t.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(r.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",r))}})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)n.fire(new t.ErrorEvent(e));else{var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",r))}}),this},n.prototype.getClusterExpansionZoom=function(t,e){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e,this.workerID),this},n.prototype.getClusterChildren=function(t,e){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e,this.workerID),this},n.prototype.getClusterLeaves=function(t,e,n,r){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r,this.workerID),this},n.prototype._updateWorkerData=function(e){var n=this,r=t.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._transformRequest(t.default$2.resolveURL(i),t.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.workerID=this.dispatcher.send(this.type+".loadData",r,function(t,i){n._removed||i&&i.abandoned||(n._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[n.id]&&(n._resourceTiming=i.resourceTiming[n.id].slice(0)),n.dispatcher.send(n.type+".coalesce",{source:r.source},null,n.workerID),e(t))},this.workerID)},n.prototype.loadTile=function(e,n){var r=this,i=void 0===e.workerID?"loadTile":"reloadTile",o={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.default$2.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send(i,o,function(t,o){return e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(o,r.map.painter,"reloadTile"===i),n(null))},this.workerID)},n.prototype.abortTile=function(t){t.aborted=!0},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},n.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},n.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(t.Evented),Gt=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Gt.prototype.bind=function(t,e,n,r,i,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);var c=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||u||this.boundIndexBuffer!==i||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||c?this.freshBind(e,n,r,i,o,a,s):(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind())},Gt.prototype.freshBind=function(t,e,n,r,i,o,a){var s,u=t.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var p=u;p<s;p++)c.disableVertexAttribArray(p)}e.enableAttributes(c,t);for(var h=0,f=n;h<f.length;h+=1)f[h].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,i);for(var d=0,m=n;d<m.length;d+=1){var y=m[d];y.bind(),y.setVertexAttribPointers(c,t,i)}o&&(o.bind(),o.setVertexAttribPointers(c,t,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,i)),l.currentNumAttributes=u},Gt.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Zt=function(e){function n(t,n,r,i){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(i),this.options=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._transformRequest(this.url,t.ResourceType.Image),function(n,r){n?e.fire(new t.ErrorEvent(n)):r&&(e.image=t.default$2.getImageData(r),e._finishLoading())})},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setCoordinates=function(e){this.coordinates=e;var n=this.map,r=e.map(function(t){return n.transform.locationCoordinate(jt.convert(t)).zoomTo(0)}),i=this.centerCoord=t.getCoordinatesCenter(r);i.column=Math.floor(i.column),i.row=Math.floor(i.row),this.tileID=new t.CanonicalTileID(i.zoom,i.column,i.row),this.minzoom=this.maxzoom=i.zoom;var o=r.map(function(e){var n=e.zoomTo(i.zoom);return new t.default(Math.round((n.column-i.column)*t.default$10),Math.round((n.row-i.row)*t.default$10))});return this._boundsArray=new t.RasterBoundsArray,this._boundsArray.emplaceBack(o[0].x,o[0].y,0,0),this._boundsArray.emplaceBack(o[1].x,o[1].y,t.default$10,0),this._boundsArray.emplaceBack(o[3].x,o[3].y,0,t.default$10),this._boundsArray.emplaceBack(o[2].x,o[2].y,t.default$10,t.default$10),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.default$11.members)),this.boundsVAO||(this.boundsVAO=new Gt),this.texture||(this.texture=new t.default$4(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(t.Evented),Wt=function(e){function n(t,n,r,i){e.call(this,t,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this,n=this.options;this.urls=[];for(var r=0,i=n.urls;r<i.length;r+=1){var o=i[r];e.urls.push(e.map._transformRequest(o,t.ResourceType.Source).url)}t.getVideo(this.urls,function(n,r){n?e.fire(new t.ErrorEvent(n)):r&&(e.video=r,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map._rerender()}),e.map&&e.video.play(),e._finishLoading())})},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.default$11.members)),this.boundsVAO||(this.boundsVAO=new Gt),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.default$4(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(Zt),Ht=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new t.ErrorEvent(new t.default$12("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.default$12("sources."+n,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.ErrorEvent(new t.default$12("sources."+n,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof t.default$1.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.default$12("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.default$12("sources."+n,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof t.default$1.HTMLCanvasElement?this.options.canvas:t.default$1.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,t.default$11.members)),this.boundsVAO||(this.boundsVAO=new Gt),this.texture?e?this.texture.update(this.canvas):this._playing&&(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.canvas)):(this.texture=new t.default$4(n,this.canvas,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},n}(Zt),Xt={vector:Ut,raster:Vt,"raster-dem":qt,geojson:$t,video:Wt,image:Zt,canvas:Ht},Kt=function(e,n,r,i){var o=new Xt[n.type](e,n,r,i);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o},Yt=function(t,e){this.max=t,this.onRemove=e,this.reset()};Yt.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var r=n[e];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},Yt.prototype.add=function(t,e,n){var r=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:e,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout(function(){r.remove(t,o)},n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},Yt.prototype.has=function(t){return t.wrapped().key in this.data},Yt.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},Yt.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},Yt.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},Yt.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},Yt.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this};var Jt=function(t,e,n){this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};Jt.prototype.unbindVAO=function(){this.context.extVertexArrayObject&&this.context.bindVertexArrayOES.set(null)},Jt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Jt.prototype.updateData=function(t){var e=this.context.gl;this.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},Jt.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var Qt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},te=function(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;var i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};te.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},te.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},te.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var r=this.attributes[n],i=e.attributes[r.name];void 0!==i&&t.enableVertexAttribArray(i)}},te.prototype.setVertexAttribPointers=function(t,e,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[Qt[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},te.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var ee=function(e){this.context=e,this.current=t.default$8.transparent};ee.prototype.get=function(){return this.current},ee.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t)};var ne=function(t){this.context=t,this.current=1};ne.prototype.get=function(){return this.current},ne.prototype.set=function(t){this.current!==t&&(this.context.gl.clearDepth(t),this.current=t)};var re=function(t){this.context=t,this.current=0};re.prototype.get=function(){return this.current},re.prototype.set=function(t){this.current!==t&&(this.context.gl.clearStencil(t),this.current=t)};var ie=function(t){this.context=t,this.current=[!0,!0,!0,!0]};ie.prototype.get=function(){return this.current},ie.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t)};var oe=function(t){this.context=t,this.current=!0};oe.prototype.get=function(){return this.current},oe.prototype.set=function(t){this.current!==t&&(this.context.gl.depthMask(t),this.current=t)};var ae=function(t){this.context=t,this.current=255};ae.prototype.get=function(){return this.current},ae.prototype.set=function(t){this.current!==t&&(this.context.gl.stencilMask(t),this.current=t)};var se=function(t){this.context=t,this.current={func:t.gl.ALWAYS,ref:0,mask:255}};se.prototype.get=function(){return this.current},se.prototype.set=function(t){var e=this.current;t.func===e.func&&t.ref===e.ref&&t.mask===e.mask||(this.context.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t)};var ue=function(t){this.context=t;var e=this.context.gl;this.current=[e.KEEP,e.KEEP,e.KEEP]};ue.prototype.get=function(){return this.current},ue.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]||(this.context.gl.stencilOp(t[0],t[1],t[2]),this.current=t)};var le=function(t){this.context=t,this.current=!1};le.prototype.get=function(){return this.current},le.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t}};var ce=function(t){this.context=t,this.current=[0,1]};ce.prototype.get=function(){return this.current},ce.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.depthRange(t[0],t[1]),this.current=t)};var pe=function(t){this.context=t,this.current=!1};pe.prototype.get=function(){return this.current},pe.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t}};var he=function(t){this.context=t,this.current=t.gl.LESS};he.prototype.get=function(){return this.current},he.prototype.set=function(t){this.current!==t&&(this.context.gl.depthFunc(t),this.current=t)};var fe=function(t){this.context=t,this.current=!1};fe.prototype.get=function(){return this.current},fe.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t}};var de=function(t){this.context=t;var e=this.context.gl;this.current=[e.ONE,e.ZERO]};de.prototype.get=function(){return this.current},de.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.blendFunc(t[0],t[1]),this.current=t)};var me=function(e){this.context=e,this.current=t.default$8.transparent};me.prototype.get=function(){return this.current},me.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t)};var ye=function(t){this.context=t,this.current=null};ye.prototype.get=function(){return this.current},ye.prototype.set=function(t){this.current!==t&&(this.context.gl.useProgram(t),this.current=t)};var ve=function(t){this.context=t,this.current=t.gl.TEXTURE0};ve.prototype.get=function(){return this.current},ve.prototype.set=function(t){this.current!==t&&(this.context.gl.activeTexture(t),this.current=t)};var ge=function(t){this.context=t;var e=this.context.gl;this.current=[0,0,e.drawingBufferWidth,e.drawingBufferHeight]};ge.prototype.get=function(){return this.current},ge.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t)};var _e=function(t){this.context=t,this.current=null};_e.prototype.get=function(){return this.current},_e.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t}};var be=function(t){this.context=t,this.current=null};be.prototype.get=function(){return this.current},be.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t}};var xe=function(t){this.context=t,this.current=null};xe.prototype.get=function(){return this.current},xe.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t}};var we=function(t){this.context=t,this.current=null};we.prototype.get=function(){return this.current},we.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t}};var Ee=function(t){this.context=t,this.current=null};Ee.prototype.get=function(){return this.current},Ee.prototype.set=function(t){var e=this.context.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t};var Se=function(t){this.context=t,this.current=null};Se.prototype.get=function(){return this.current},Se.prototype.set=function(t){this.current!==t&&this.context.extVertexArrayObject&&(this.context.extVertexArrayObject.bindVertexArrayOES(t),this.current=t)};var Te=function(t){this.context=t,this.current=4};Te.prototype.get=function(){return this.current},Te.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t}};var ke=function(t){this.context=t,this.current=!1};ke.prototype.get=function(){return this.current},ke.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t}};var Ce=function(t,e){this.context=t,this.current=null,this.parent=e};Ce.prototype.get=function(){return this.current};var Pe=function(t){function e(e,n){t.call(this,e,n),this.dirty=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(this.dirty||this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e.prototype.setDirty=function(){this.dirty=!0},e}(Ce),Ae=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t}},e}(Ce),Oe=function(t,e,n){this.context=t,this.width=e,this.height=n;var r=t.gl,i=this.framebuffer=r.createFramebuffer();this.colorAttachment=new Pe(t,i),this.depthAttachment=new Ae(t,i)};Oe.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n),t.deleteFramebuffer(this.framebuffer)};var Ie=function(t,e,n){this.func=t,this.mask=e,this.range=n};Ie.ReadOnly=!1,Ie.ReadWrite=!0,Ie.disabled=new Ie(519,Ie.ReadOnly,[0,1]);var Me=function(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};Me.disabled=new Me({func:519,mask:0},0,0,7680,7680,7680);var ze=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};ze.Replace=[1,0],ze.disabled=new ze(ze.Replace,t.default$8.transparent,[!1,!1,!1,!1]),ze.unblended=new ze(ze.Replace,t.default$8.transparent,[!0,!0,!0,!0]),ze.alphaBlended=new ze([1,771],t.default$8.transparent,[!0,!0,!0,!0]);var Re=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ee(this),this.clearDepth=new ne(this),this.clearStencil=new re(this),this.colorMask=new ie(this),this.depthMask=new oe(this),this.stencilMask=new ae(this),this.stencilFunc=new se(this),this.stencilOp=new ue(this),this.stencilTest=new le(this),this.depthRange=new ce(this),this.depthTest=new pe(this),this.depthFunc=new he(this),this.blend=new fe(this),this.blendFunc=new de(this),this.blendColor=new me(this),this.program=new ye(this),this.activeTexture=new ve(this),this.viewport=new ge(this),this.bindFramebuffer=new _e(this),this.bindRenderbuffer=new be(this),this.bindTexture=new xe(this),this.bindVertexBuffer=new we(this),this.bindElementBuffer=new Ee(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Se(this),this.pixelStoreUnpack=new Te(this),this.pixelStoreUnpackPremultiplyAlpha=new ke(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")};Re.prototype.createIndexBuffer=function(t,e){return new Jt(this,t,e)},Re.prototype.createVertexBuffer=function(t,e,n){return new te(this,t,e,n)},Re.prototype.createRenderbuffer=function(t,e,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i},Re.prototype.createFramebuffer=function(t,e){return new Oe(this,t,e)},Re.prototype.clear=function(t){var e=t.color,n=t.depth,r=this.gl,i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},Re.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},Re.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},Re.prototype.setColorMode=function(e){t.default$13(e.blendFunction,ze.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)};var Le=function(e){function n(n,r,i){var o=this;e.call(this),this.id=n,this.dispatcher=i,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))}),this.on("error",function(){o._sourceErrored=!0}),this._source=Kt(n,r,i,this),this._tiles={},this._cache=new Yt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this),this._coveredTiles={},this._state=new t.default$16}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},n.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[e].upload(t)},n.prototype.getIds=function(){var e=this;return Object.keys(this._tiles).map(Number).sort(function(n,r){var i=e._tiles[n].tileID,o=e._tiles[r].tileID,a=new t.default(i.canonical.x,i.canonical.y).rotate(e.transform.angle),s=new t.default(o.canonical.x,o.canonical.y).rotate(e.transform.angle);return i.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x})},n.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},n.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0,{});return!!e&&this._isIdRenderable(e.tileID.key)},n.prototype._isIdRenderable=function(t){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},n.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},n.prototype._tileLoaded=function(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform));e.timeAdded=t.default$2.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID})),this.map&&(this.map.painter.tileExtentVAO.vao=null)},n.prototype._backfillDEM=function(t){function e(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}for(var n=this.getRenderableIds(),r=0;r<n.length;r++){var i=n[r];if(t.neighboringTiles&&t.neighboringTiles[i]){var o=this.getTileByID(i);e(t,o),e(o,t)}}},n.prototype.getTile=function(t){return this.getTileByID(t.key)},n.prototype.getTileByID=function(t){return this._tiles[t]},n.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},n.prototype._findLoadedChildren=function(t,e,n){var r=!1;for(var i in this._tiles){var o=this._tiles[i];if(!(n[i]||!o.hasData()||o.tileID.overscaledZ<=t.overscaledZ||o.tileID.overscaledZ>e)){var a=Math.pow(2,o.tileID.canonical.z-t.canonical.z);if(Math.floor(o.tileID.canonical.x/a)===t.canonical.x&&Math.floor(o.tileID.canonical.y/a)===t.canonical.y)for(n[i]=o.tileID,r=!0;o&&o.tileID.overscaledZ-1>t.overscaledZ;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);if(!s)break;(o=this._tiles[s.key])&&o.hasData()&&(delete n[i],n[s.key]=s)}}}return r},n.prototype.findLoadedParent=function(t,e,n){for(var r=t.overscaledZ-1;r>=e;r--){var i=t.scaledTo(r);if(!i)return;var o=String(i.key),a=this._tiles[o];if(a&&a.hasData())return n[o]=i,a;if(this._cache.has(i))return n[o]=i,this._cache.get(i)}},n.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),n=Math.floor(5*e),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(r)},n.prototype.handleWrapJump=function(t){var e=(t-(void 0===this._prevLng?t:this._prevLng))/360,n=Math.round(e);if(this._prevLng=t,n){var r={};for(var i in this._tiles){var o=this._tiles[i];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+n),r[o.tileID.key]=o}for(var a in this._tiles=r,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var s in this._tiles){var u=this._tiles[s];this._setTileReloadTimer(s,u)}}},n.prototype.update=function(e){var r=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter(function(t){return r._source.hasTile(t)}))):i=[];var o,a=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),s=Math.max(a-n.maxOverzooming,this._source.minzoom),u=Math.max(a+n.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(i,a),c={};if(f(this._source.type))for(var p=Object.keys(l),h=0;h<p.length;h++){var d=p[h],m=l[d],y=r._tiles[d];if(y&&(void 0===y.fadeEndTime||y.fadeEndTime>=t.default$2.now())){r._findLoadedChildren(m,u,l)&&(l[d]=m);var v=r.findLoadedParent(m,s,c);v&&r._addTile(v.tileID)}}for(o in c)l[o]||(r._coveredTiles[o]=!0);for(o in c)l[o]=c[o];for(var g=t.keysDifference(this._tiles,l),_=0;_<g.length;_++)r._removeTile(g[_])}},n.prototype._updateRetainedTiles=function(t,e){for(var r={},i={},o=Math.max(e-n.maxOverzooming,this._source.minzoom),a=Math.max(e+n.maxUnderzooming,this._source.minzoom),s=0;s<t.length;s++){var u=t[s],l=this._addTile(u),c=!1;if(l.hasData())r[u.key]=u;else{c=l.wasRequested(),r[u.key]=u;var p=!0;if(e+1>this._source.maxzoom){var h=u.children(this._source.maxzoom)[0],f=this.getTile(h);f&&f.hasData()?r[h.key]=h:p=!1}else{this._findLoadedChildren(u,a,r);for(var d=u.children(this._source.maxzoom),m=0;m<d.length;m++)if(!r[d[m].key]){p=!1;break}}if(!p)for(var y=u.overscaledZ-1;y>=o;--y){var v=u.scaledTo(y);if(i[v.key])break;if(i[v.key]=!0,!(l=this.getTile(v))&&c&&(l=this._addTile(v)),l&&(r[v.key]=v,c=l.wasRequested(),l.hasData()))break}}}return r},n.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var r=Boolean(n);return r||(n=new t.default$14(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout(function(){n._reloadTile(t,"expired"),delete n._timers[t]},r))},n.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},n.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},n.prototype.tilesIn=function(e,n){for(var r=[],i=this.getIds(),o=1/0,a=1/0,s=-1/0,u=-1/0,l=e[0].zoom,c=0;c<e.length;c++){var p=e[c];o=Math.min(o,p.column),a=Math.min(a,p.row),s=Math.max(s,p.column),u=Math.max(u,p.row)}for(var f=0;f<i.length;f++){var d=this._tiles[i[f]],m=d.tileID,y=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),v=n*d.queryPadding*t.default$10/d.tileSize/y,g=[h(m,new t.default$15(o,a,l)),h(m,new t.default$15(s,u,l))];if(g[0].x-v<t.default$10&&g[0].y-v<t.default$10&&g[1].x+v>=0&&g[1].y+v>=0){for(var _=[],b=0;b<e.length;b++)_.push(h(m,e[b]));r.push({tile:d,tileID:m,queryGeometry:[_],scale:y})}}return r},n.prototype.getVisibleCoordinates=function(){for(var t=this,e=this.getRenderableIds().map(function(e){return t._tiles[e].tileID}),n=0,r=e;n<r.length;n+=1){var i=r[n];i.posMatrix=t.transform.calculatePosMatrix(i.toUnwrapped())}return e},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(f(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.default$2.now())return!0}return!1},n.prototype.setFeatureState=function(t,e,n){t=t||"_geojsonTileLayer",this._state.updateState(t,e,n)},n.prototype.getFeatureState=function(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)},n}(t.Evented);Le.maxOverzooming=10,Le.maxUnderzooming=3;var De,Be=function(){this.active={}};Be.prototype.acquire=function(t){if(!this.workers){var e=pr.workerCount;for(this.workers=[];this.workers.length<e;)this.workers.push(new d)}return this.active[t]=!0,this.workers.slice()},Be.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)};var je={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},Fe=function(t,e,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};Fe.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Fe.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Fe.prototype.insertCircle=function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)},Fe.prototype._insertBoxCell=function(t,e,n,r,i,o){this.boxCells[i].push(o)},Fe.prototype._insertCircleCell=function(t,e,n,r,i,o){this.circleCells[i].push(o)},Fe.prototype._query=function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],p=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:l-p,y1:c-p,x2:l+p,y2:c+p})}return o?a.filter(o):a}var h={hitTest:i,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,n,r,this._queryCell,a,h,o),i?a.length>0:a},Fe.prototype._queryCircle=function(t,e,n,r,i){var o=t-n,a=t+n,s=e-n,u=e+n;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];var l=[],c={hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,u,this._queryCellCircle,l,c,i),r?l.length>0:l},Fe.prototype.query=function(t,e,n,r,i){return this._query(t,e,n,r,!1,i)},Fe.prototype.hitTest=function(t,e,n,r,i){return this._query(t,e,n,r,!0,i)},Fe.prototype.hitTestCircle=function(t,e,n,r){return this._queryCircle(t,e,n,!0,r)},Fe.prototype._queryCell=function(t,e,n,r,i,o,a,s){var u=a.seenUids,l=this.boxCells[i];if(null!==l)for(var c=this.bboxes,p=0,h=l;p<h.length;p+=1){var f=h[p];if(!u.box[f]){u.box[f]=!0;var d=4*f;if(t<=c[d+2]&&e<=c[d+3]&&n>=c[d+0]&&r>=c[d+1]&&(!s||s(this.boxKeys[f]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[f],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}}var m=this.circleCells[i];if(null!==m)for(var y=this.circles,v=0,g=m;v<g.length;v+=1){var _=g[v];if(!u.circle[_]){u.circle[_]=!0;var b=3*_;if(this._circleAndRectCollide(y[b],y[b+1],y[b+2],t,e,n,r)&&(!s||s(this.circleKeys[_]))){if(a.hitTest)return o.push(!0),!0;var x=y[b],w=y[b+1],E=y[b+2];o.push({key:this.circleKeys[_],x1:x-E,y1:w-E,x2:x+E,y2:w+E})}}}},Fe.prototype._queryCellCircle=function(t,e,n,r,i,o,a,s){var u=a.circle,l=a.seenUids,c=this.boxCells[i];if(null!==c)for(var p=this.bboxes,h=0,f=c;h<f.length;h+=1){var d=f[h];if(!l.box[d]){l.box[d]=!0;var m=4*d;if(this._circleAndRectCollide(u.x,u.y,u.radius,p[m+0],p[m+1],p[m+2],p[m+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var y=this.circleCells[i];if(null!==y)for(var v=this.circles,g=0,_=y;g<_.length;g+=1){var b=_[g];if(!l.circle[b]){l.circle[b]=!0;var x=3*b;if(this._circlesCollide(v[x],v[x+1],v[x+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[b])))return o.push(!0),!0}}},Fe.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var u=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),p=this._convertToYCellCoord(r),h=u;h<=c;h++)for(var f=l;f<=p;f++){var d=this.xCellCount*f+h;if(i.call(this,t,e,n,r,d,o,a,s))return}},Fe.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Fe.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Fe.prototype._circlesCollide=function(t,e,n,r,i,o){var a=r-t,s=i-e,u=n+o;return u*u>a*a+s*s},Fe.prototype._circleAndRectCollide=function(t,e,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(t-(r+s));if(u>s+n)return!1;var l=(a-i)/2,c=Math.abs(e-(i+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var p=u-s,h=c-l;return p*p+h*h<=n*n};var Ne=t.default$18.layout,Ue=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]),Ve=function(t,e,n){void 0===e&&(e=new Fe(t.width+200,t.height+200,25)),void 0===n&&(n=new Fe(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};Ve.prototype.placeCollisionBox=function(t,e,n,r,i){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),a=n*o.perspectiveRatio,s=t.x1*a+o.point.x,u=t.y1*a+o.point.y,l=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,u,l,c)||!e&&this.grid.hitTest(s,u,l,c,i)?{box:[],offscreen:!1}:{box:[s,u,l,c],offscreen:this.isOffscreen(s,u,l,c)}},Ve.prototype.approximateTileDistance=function(t,e,n,r,i){var o=i?1:r/this.pitchfactor,a=t.lastSegmentViewportDistance*n;return t.prevTileDistance+a+(o-1)*a*Math.abs(Math.sin(e))},Ve.prototype.placeCollisionCircles=function(e,n,r,i,o,a,s,u,l,c,p,h,f,d){var m=[],y=this.projectAnchor(c,a.anchorX,a.anchorY),v=l/24,g=a.lineOffsetX*l,_=a.lineOffsetY*l,b=new t.default(a.anchorX,a.anchorY),x=O(v,u,g,_,!1,C(b,p).point,b,a,s,p,{},!0),w=!1,E=!1,S=!0,T=y.perspectiveRatio*i,k=1/(i*r),P=0,A=0;x&&(P=this.approximateTileDistance(x.first.tileDistance,x.first.angle,k,y.cameraDistance,f),A=this.approximateTileDistance(x.last.tileDistance,x.last.angle,k,y.cameraDistance,f));for(var I=0;I<e.length;I+=5){var M=e[I],z=e[I+1],R=e[I+2],L=e[I+3];if(!x||L<-P||L>A)B(e,I,!1);else{var D=this.projectPoint(c,M,z),j=R*T;if(m.length>0){var F=D.x-m[m.length-4],N=D.y-m[m.length-3];if(j*j*2>F*F+N*N&&I+8<e.length){var U=e[I+8];if(U>-P&&U<A){B(e,I,!1);continue}}}var V=I/5;m.push(D.x,D.y,j,V),B(e,I,!0);var q=D.x-j,$=D.y-j,G=D.x+j,Z=D.y+j;if(S=S&&this.isOffscreen(q,$,G,Z),E=E||this.isInsideGrid(q,$,G,Z),!n&&this.grid.hitTestCircle(D.x,D.y,j,d)){if(!h)return{circles:[],offscreen:!1};w=!0}}}return{circles:w||!E?[]:m,offscreen:S}},Ve.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,i=1/0,o=-1/0,a=-1/0,s=0,u=e;s<u.length;s+=1){var l=u[s],c=new t.default(l.x+100,l.y+100);r=Math.min(r,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),n.push(c)}for(var p={},h={},f=0,d=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a));f<d.length;f+=1){var m=d[f],y=m.key;if(void 0===p[y.bucketInstanceId]&&(p[y.bucketInstanceId]={}),!p[y.bucketInstanceId][y.featureIndex]){var v=[new t.default(m.x1,m.y1),new t.default(m.x2,m.y1),new t.default(m.x2,m.y2),new t.default(m.x1,m.y2)];t.polygonIntersectsPolygon(n,v)&&(p[y.bucketInstanceId][y.featureIndex]=!0,void 0===h[y.bucketInstanceId]&&(h[y.bucketInstanceId]=[]),h[y.bucketInstanceId].push(y.featureIndex))}}return h},Ve.prototype.insertCollisionBox=function(t,e,n,r,i){var o={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};(e?this.ignoredGrid:this.grid).insert(o,t[0],t[1],t[2],t[3])},Ve.prototype.insertCollisionCircles=function(t,e,n,r,i){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},Ve.prototype.projectAnchor=function(t,e,n){var r=[e,n,0,1];return D(r,r,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},Ve.prototype.projectPoint=function(e,n,r){var i=[n,r,0,1];return D(i,i,e),new t.default((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100)},Ve.prototype.projectAndGetPerspectiveRatio=function(e,n,r){var i=[n,r,0,1];return D(i,i,e),{point:new t.default((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},Ve.prototype.isOffscreen=function(t,e,n,r){return n<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},Ve.prototype.isInsideGrid=function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary};var qe=t.default$18.layout,$e=function(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n};$e.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Ge=function(t,e,n,r,i){this.text=new $e(t?t.text:null,e,n,i),this.icon=new $e(t?t.icon:null,e,r,i)};Ge.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Ze=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},We=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};We.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var He=function(t,e,n){this.transform=t.clone(),this.collisionIndex=new Ve(this.transform),this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new We(n)};He.prototype.placeLayerTile=function(e,n,r,i){var o=n.getBucket(e),a=n.latestFeatureIndex;if(o&&a&&e.id===o.layerIds[0]){var s=n.collisionBoxArray,u=o.layers[0].layout,l=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),c=n.tileSize/t.default$10,p=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),h=T(p,"map"===u.get("text-pitch-alignment"),"map"===u.get("text-rotation-alignment"),this.transform,j(n,1,this.transform.zoom)),f=T(p,"map"===u.get("icon-pitch-alignment"),"map"===u.get("icon-rotation-alignment"),this.transform,j(n,1,this.transform.zoom));this.retainedQueryData[o.bucketInstanceId]=new function(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,n.tileID),this.placeLayerBucket(o,p,h,f,l,c,r,i,s)}},He.prototype.placeLayerBucket=function(e,n,r,i,o,a,s,u,l){for(var c=e.layers[0].layout,p=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,qe.properties["text-size"]),h=!e.hasTextData()||c.get("text-optional"),f=!e.hasIconData()||c.get("icon-optional"),d=this.collisionGroups.get(e.sourceID),m=0,y=e.symbolInstances;m<y.length;m+=1){var v=y[m];if(!u[v.crossTileID]){var g=void 0!==v.feature.text,_=void 0!==v.feature.icon,b=!0,x=null,w=null,E=null,S=0,T=0;v.collisionArrays||(v.collisionArrays=e.deserializeCollisionBoxes(l,v.textBoxStartIndex,v.textBoxEndIndex,v.iconBoxStartIndex,v.iconBoxEndIndex)),v.collisionArrays.textFeatureIndex&&(S=v.collisionArrays.textFeatureIndex),v.collisionArrays.textBox&&(g=(x=this.collisionIndex.placeCollisionBox(v.collisionArrays.textBox,c.get("text-allow-overlap"),a,n,d.predicate)).box.length>0,b=b&&x.offscreen);var k=v.collisionArrays.textCircles;if(k){var C=e.text.placedSymbolArray.get(v.placedTextSymbolIndices[0]),P=t.evaluateSizeForFeature(e.textSizeData,p,C);w=this.collisionIndex.placeCollisionCircles(k,c.get("text-allow-overlap"),o,a,v.key,C,e.lineVertexArray,e.glyphOffsetArray,P,n,r,s,"map"===c.get("text-pitch-alignment"),d.predicate),g=c.get("text-allow-overlap")||w.circles.length>0,b=b&&w.offscreen}v.collisionArrays.iconFeatureIndex&&(T=v.collisionArrays.iconFeatureIndex),v.collisionArrays.iconBox&&(_=(E=this.collisionIndex.placeCollisionBox(v.collisionArrays.iconBox,c.get("icon-allow-overlap"),a,n,d.predicate)).box.length>0,b=b&&E.offscreen),h||f?f?h||(_=_&&g):g=_&&g:_=g=_&&g,g&&x&&this.collisionIndex.insertCollisionBox(x.box,c.get("text-ignore-placement"),e.bucketInstanceId,S,d.ID),_&&E&&this.collisionIndex.insertCollisionBox(E.box,c.get("icon-ignore-placement"),e.bucketInstanceId,T,d.ID),g&&w&&this.collisionIndex.insertCollisionCircles(w.circles,c.get("text-ignore-placement"),e.bucketInstanceId,S,d.ID),this.placements[v.crossTileID]=new Ze(g,_,b||e.justReloaded),u[v.crossTileID]=!0}}e.justReloaded=!1},He.prototype.commit=function(t,e){this.commitTime=e;var n=!1,r=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,i=t?t.opacities:{};for(var o in this.placements){var a=this.placements[o],s=i[o];s?(this.opacities[o]=new Ge(s,r,a.text,a.icon),n=n||a.text!==s.text.placed||a.icon!==s.icon.placed):(this.opacities[o]=new Ge(null,r,a.text,a.icon,a.skipFade),n=n||a.text||a.icon)}for(var u in i){var l=i[u];if(!this.opacities[u]){var c=new Ge(l,r,!1,!1);c.isHidden()||(this.opacities[u]=c,n=n||l.text.placed||l.icon.placed)}}n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},He.prototype.updateLayerOpacities=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},He.prototype.updateBucketOpacities=function(t,e,n){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();for(var r=t.layers[0].layout,i=new Ge(null,0,!1,!1,!0),o=new Ge(null,0,r.get("text-allow-overlap"),r.get("icon-allow-overlap"),!0),a=0;a<t.symbolInstances.length;a++){var s=t.symbolInstances[a],u=e[s.crossTileID],l=this.opacities[s.crossTileID];u?l=i:l||(l=o,this.opacities[s.crossTileID]=l),e[s.crossTileID]=!0;var c=s.numGlyphVertices>0||s.numVerticalGlyphVertices>0,p=s.numIconVertices>0;if(c){for(var h=N(l.text),f=(s.numGlyphVertices+s.numVerticalGlyphVertices)/4,d=0;d<f;d++)t.text.opacityVertexArray.emplaceBack(h);for(var m=0,y=s.placedTextSymbolIndices;m<y.length;m+=1){var v=y[m];t.text.placedSymbolArray.get(v).hidden=l.text.isHidden()}}if(p){for(var g=N(l.icon),_=0;_<s.numIconVertices/4;_++)t.icon.opacityVertexArray.emplaceBack(g);t.icon.placedSymbolArray.get(a).hidden=l.icon.isHidden()}s.collisionArrays||(s.collisionArrays=t.deserializeCollisionBoxes(n,s.textBoxStartIndex,s.textBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex));var b=s.collisionArrays;if(b){b.textBox&&t.hasCollisionBoxData()&&F(t.collisionBox.collisionVertexArray,l.text.placed,!1),b.iconBox&&t.hasCollisionBoxData()&&F(t.collisionBox.collisionVertexArray,l.icon.placed,!1);var x=b.textCircles;if(x&&t.hasCollisionCircleData())for(var w=0;w<x.length;w+=5){var E=u||0===x[w+4];F(t.collisionCircle.collisionVertexArray,l.text.placed,E)}}}t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray)},He.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},He.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},He.prototype.stillRecent=function(t){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>t},He.prototype.setStale=function(){this.stale=!0};var Xe=Math.pow(2,25),Ke=Math.pow(2,24),Ye=Math.pow(2,17),Je=Math.pow(2,16),Qe=Math.pow(2,9),tn=Math.pow(2,8),en=Math.pow(2,1),nn=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};nn.prototype.continuePlacement=function(t,e,n,r,i){for(;this._currentTileIndex<t.length;){var o=t[this._currentTileIndex];if(e.placeLayerTile(r,o,n,this._seenCrossTileIDs),this._currentTileIndex++,i())return!0}};var rn=function(t,e,n,r,i,o){this.placement=new He(t,i,o),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};rn.prototype.isDone=function(){return this._done},rn.prototype.continuePlacement=function(e,n,r){for(var i=this,o=t.default$2.now(),a=function(){var e=t.default$2.now()-o;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=n[e[i._currentPlacementIndex]],u=i.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(i._inProgressLayer||(i._inProgressLayer=new nn),i._inProgressLayer.continuePlacement(r[s.source],i.placement,i._showCollisionBoxes,s,a))return;delete i._inProgressLayer}i._currentPlacementIndex--}this._done=!0},rn.prototype.commit=function(t,e){return this.placement.commit(t,e),this.placement};var on=512/t.default$10/2,an=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:o.crossTileID,coord:this.getScaledCoordinates(o,t)})}};an.prototype.getScaledCoordinates=function(e,n){var r=n.canonical.z-this.tileID.canonical.z,i=on/Math.pow(2,r),o=e.anchor;return{x:Math.floor((n.canonical.x*t.default$10+o.x)*i),y:Math.floor((n.canonical.y*t.default$10+o.y)*i)}},an.prototype.findMatches=function(t,e,n){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0,o=t;i<o.length;i+=1){var a=o[i];if(!a.crossTileID){var s=this.indexedSymbolInstances[a.key];if(s)for(var u=this.getScaledCoordinates(a,e),l=0,c=s;l<c.length;l+=1){var p=c[l];if(Math.abs(p.coord.x-u.x)<=r&&Math.abs(p.coord.y-u.y)<=r&&!n[p.crossTileID]){n[p.crossTileID]=!0,a.crossTileID=p.crossTileID;break}}}}};var sn=function(){this.maxCrossTileID=0};sn.prototype.generate=function(){return++this.maxCrossTileID};var un=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};un.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=t},un.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0,i=e.symbolInstances;r<i.length;r+=1)i[r].crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var o=this.usedCrossTileIDs[t.overscaledZ];for(var a in this.indexes){var s=this.indexes[a];if(Number(a)>t.overscaledZ)for(var u in s){var l=s[u];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,o)}else{var c=s[t.scaledTo(Number(a)).key];c&&c.findMatches(e.symbolInstances,t,o)}}for(var p=0,h=e.symbolInstances;p<h.length;p+=1){var f=h[p];f.crossTileID||(f.crossTileID=n.generate(),o[f.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new an(t,e.symbolInstances,e.bucketInstanceId),!0},un.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var r=0,i=e.indexedSymbolInstances[n];r<i.length;r+=1){var o=i[r];delete this.usedCrossTileIDs[t][o.crossTileID]}},un.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e};var ln=function(){this.layerIndexes={},this.crossTileIDs=new sn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ln.prototype.addLayer=function(t,e,n){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new un);var i=!1,o={};r.handleWrapJump(n);for(var a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.getBucket(t);l&&t.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,l,this.crossTileIDs)&&(i=!0),o[l.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},ln.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var cn=function(e,n){return t.emitValidationErrors(e,n&&n.filter(function(t){return"source.canvas"!==t.identifier}))},pn=t.pick(je,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),hn=t.pick(je,["setCenter","setZoom","setBearing","setPitch"]),fn=function(e){function o(n,r){var i=this;void 0===r&&(r={}),e.call(this),this.map=n,this.dispatcher=new Bt((De||(De=new Be),De),this),this.imageManager=new At,this.glyphManager=new Mt(n._transformRequest,r.localIdeographFontFamily),this.lineAtlas=new Dt(256,512),this.crossTileSymbolIndex=new ln,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.default$21,this._loaded=!1,this._resetUpdates();var a=this;this._rtlTextPluginCallback=o.registerForPluginAvailability(function(t){for(var e in a.dispatcher.broadcast("loadRTLTextPlugin",t.pluginURL,t.completionCallback),a.sourceCaches)a.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=i.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var r in i._layers){var o=i._layers[r];o.source===n.id&&i._validateLayer(o)}}}})}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.loadURL=function(e,o){var a=this;void 0===o&&(o={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var s="boolean"==typeof o.validate?o.validate:!r(e);e=function(t,e){if(!r(t))return t;var o=i(t);return o.path="/styles/v1"+o.path,n(o,e)}(e,o.accessToken);var u=this.map._transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(u,function(e,n){a._request=null,e?a.fire(new t.ErrorEvent(e)):n&&a._load(n,s)})},o.prototype.loadJSON=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.default$2.frame(function(){r._request=null,r._load(e,!1!==n.validate)})},o.prototype._load=function(e,n){var r=this;if(!n||!cn(this,t.validateStyle(e))){for(var i in this._loaded=!0,this.stylesheet=e,e.sources)r.addSource(i,e.sources[i],{validate:!1});e.sprite?this._spriteRequest=function(e,n,r){function i(){if(s)r(s);else if(o&&a){var e=t.default$2.getImageData(a),n={};for(var i in o){var u=o[i],l=u.width,c=u.height,p=u.x,h=u.y,f=u.sdf,d=u.pixelRatio,m=new t.RGBAImage({width:l,height:c});t.RGBAImage.copy(e,m,{x:p,y:h},{x:0,y:0},{width:l,height:c}),n[i]={data:m,pixelRatio:d,sdf:f}}r(null,n)}}var o,a,s,u=t.default$2.devicePixelRatio>1?"@2x":"",l=t.getJSON(n(Tt(e,u,".json"),t.ResourceType.SpriteJSON),function(t,e){l=null,s||(s=t,o=e,i())}),c=t.getImage(n(Tt(e,u,".png"),t.ResourceType.SpriteImage),function(t,e){c=null,s||(s=t,a=e,i())});return{cancel:function(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e.sprite,this.map._transformRequest,function(e,n){if(r._spriteRequest=null,e)r.fire(new t.ErrorEvent(e));else if(n)for(var i in n)r.imageManager.addImage(i,n[i]);r.imageManager.setLoaded(!0),r.fire(new t.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var o=y(this.stylesheet.layers);this._order=o.map(function(t){return t.id}),this._layers={};for(var a=0,s=o;a<s.length;a+=1){var u=s[a];(u=t.default$20(u)).setEventedParent(r,{layer:{id:u.id}}),r._layers[u.id]=u}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Lt(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},o.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var r=e.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+i.id+'" as specified by style layer "'+e.id+'"')))}}},o.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},o.prototype._serializeLayers=function(t){var e=this;return t.map(function(t){return e._layers[t].serialize()})},o.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},o.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},o.prototype.update=function(e){if(this._loaded){if(this._changed){var n=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var i in(n.length||r.length)&&this._updateWorkerLayers(n,r),this._updatedSources){var o=this._updatedSources[i];"reload"===o?this._reloadSource(i):"clear"===o&&this._clearSource(i)}for(var a in this._updatedPaintProps)this._layers[a].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates(),this.fire(new t.Event("data",{dataType:"style"}))}for(var s in this.sourceCaches)this.sourceCaches[s].used=!1;for(var u=0,l=this._order;u<l.length;u+=1){var c=l[u],p=this._layers[c];p.recalculate(e),!p.isHidden(e.zoom)&&p.source&&(this.sourceCaches[p.source].used=!0)}this.light.recalculate(e),this.z=e.zoom}},o.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},o.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},o.prototype.setState=function(e){var n=this;if(this._checkLoaded(),cn(this,t.validateStyle(e)))return!1;(e=t.clone(e)).layers=y(e.layers);var r=S(this.serialize(),e).filter(function(t){return!(t.command in hn)});if(0===r.length)return!1;var i=r.filter(function(t){return!(t.command in pn)});if(i.length>0)throw new Error("Unimplemented: "+i.map(function(t){return t.command}).join(", ")+".");return r.forEach(function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)}),this.stylesheet=e,!0},o.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this.fire(new t.Event("data",{dataType:"style"}))},o.prototype.getImage=function(t){return this.imageManager.getImage(t)},o.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new t.Event("data",{dataType:"style"}))},o.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},o.prototype.addSource=function(e,n,r){var i=this;if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0)||!this._validate(t.validateStyle.source,"sources."+e,n,null,r)){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[e]=new Le(e,n,this.dispatcher);o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:i.loaded(),source:o.serialize(),sourceId:e}}),o.onAdd(this.map),this._changed=!0}},o.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},o.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},o.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},o.prototype.addLayer=function(e,n,r){this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone(e),e=t.extend(e,{source:i})),!this._validate(t.validateStyle.layer,"layers."+i,e,{arrayIndex:-1},r)){var o=t.default$20(e);this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}});var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o)}}},o.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var r=this._order.indexOf(e);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},o.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e]}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},o.prototype.getLayer=function(t){return this._layers[t]},o.prototype.setLayerZoomRange=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},o.prototype.setFilter=function(e,n){this._checkLoaded();var r=this.getLayer(e);if(r){if(!t.default$13(r.filter,n))return null==n?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t.validateStyle.filter,"layers."+r.id+".filter",n)||(r.filter=t.clone(n),this._updateLayer(r)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},o.prototype.getFilter=function(e){return t.clone(this.getLayer(e).filter)},o.prototype.setLayoutProperty=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?t.default$13(i.getLayoutProperty(n),r)||(i.setLayoutProperty(n,r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},o.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},o.prototype.setPaintProperty=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?t.default$13(i.getPaintProperty(n),r)||(i.setPaintProperty(n,r)&&this._updateLayer(i),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},o.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},o.prototype.setFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=e.sourceLayer,o=this.sourceCaches[r];void 0!==o?"vector"!==o.getSource().type||i?o.setFeatureState(i,e.id,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types."))):this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},o.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.sourceCaches[n];if(void 0!==i){if("vector"!==i.getSource().type||r)return i.getFeatureState(r,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},o.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},o.prototype.serialize=function(){var e=this;return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._order.map(function(t){return e._layers[t].serialize()})},function(t){return void 0!==t})},o.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},o.prototype._flattenRenderedFeatures=function(t){for(var e=[],n=this._order.length-1;n>=0;n--)for(var r=this._order[n],i=0,o=t;i<o.length;i+=1){var a=o[i][r];if(a)for(var s=0,u=a;s<u.length;s+=1){var l=u[s];e.push(l)}}return e},o.prototype.queryRenderedFeatures=function(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var s=a[o],u=this._layers[s];if(!u)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[u.source]=!0}}var l=[];for(var h in this.sourceCaches)n.layers&&!i[h]||l.push(c(this.sourceCaches[h],this._layers,e.worldCoordinate,n,r));return this.placement&&l.push(function(t,e,n,r,i,o){for(var a={},s=i.queryRenderedSymbols(n),u=[],l=0,c=Object.keys(s).map(Number);l<c.length;l+=1){var h=c[l];u.push(o[h])}u.sort(p);for(var f=0,d=u;f<d.length;f+=1)!function(){var e=d[f],n=e.featureIndex.lookupSymbolFeatures(s[e.bucketInstanceId],e.bucketIndex,e.sourceLayerIndex,r.filter,r.layers,t);for(var i in n){var o=a[i]=a[i]||[],u=n[i];u.sort(function(t,n){var r=e.featureSortOrder;if(r){var i=r.indexOf(t.featureIndex);return r.indexOf(n.featureIndex)-i}return n.featureIndex-t.featureIndex});for(var l=0,c=u;l<c.length;l+=1){var p=c[l];o.push(p.feature)}}}();for(var m in a)!function(n){a[n].forEach(function(r){var i=t[n],o=e[i.source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=o})}(m);return a}(this._layers,this.sourceCaches,e.viewport,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenRenderedFeatures(l)},o.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter);var r=this.sourceCaches[e];return r?function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,e))}return r}(r,n):[]},o.prototype.addSourceType=function(t,e,n){return o.getSourceType(t)?n(new Error('A source type called "'+t+'" already exists.')):(o.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))},o.prototype.getLight=function(){return this.light.getLight()},o.prototype.setLight=function(e){this._checkLoaded();var n=this.light.getLight(),r=!1;for(var i in e)if(!t.default$13(e[i],n[i])){r=!0;break}if(r){var o={now:t.default$2.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e),this.light.updateTransitions(o)}},o.prototype._validate=function(e,n,r,i,o){return(!o||!1!==o.validate)&&cn(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.default$7},i)))},o.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[e].clearTiles();this.dispatcher.remove()},o.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},o.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},o.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},o.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},o.prototype._updatePlacement=function(e,n,r,i){for(var o=!1,a=!1,s={},u=0,l=this._order;u<l.length;u+=1){var c=l[u],p=this._layers[c];if("symbol"===p.type){if(!s[p.source]){var h=this.sourceCaches[p.source];s[p.source]=h.getRenderableIds().map(function(t){return h.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var f=this.crossTileSymbolIndex.addLayer(p,s[p.source],e.center.lng);o=o||f}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var d=this._layerOrderChanged;if((d||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.default$2.now()))&&(this.pauseablePlacement=new rn(e,this._order,d,n,r,i),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,t.default$2.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(var m=0,y=this._order;m<y.length;m+=1){var v=y[m],g=this._layers[v];"symbol"===g.type&&this.placement.updateLayerOpacities(g,s[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.default$2.now())},o.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n)},o.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},o}(t.Evented);fn.getSourceType=function(t){return Xt[t]},fn.setSourceType=function(t,e){Xt[t]=e},fn.registerForPluginAvailability=t.registerForPluginAvailability;var dn=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),mn={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},clippingMask:{fragmentSource:"void main() {\n    gl_FragColor = vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field boxes in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"uniform float u_overscale_factor;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length / u_overscale_factor;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field circles in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - u_maxzoom) * a) where a is an arbitrary value\n    // Here we use a=0.3 which works out to the expression below. see \n    // nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - u_maxzoom) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_linesofar;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},lineGradient:{fragmentSource:"\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nuniform sampler2D u_image;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    // For gradient lines, v_lineprogress is the ratio along the entire line,\n    // scaled to [0, 2^15), and the gradient ramp is stored in a texture.\n    vec4 color = texture2D(u_image, vec2(v_lineprogress, 0.5));\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n// the attribute conveying progress along a line is scaled to [0, 2^15)\n#define MAX_LINE_DISTANCE 32767.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_lineprogress = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0 / MAX_LINE_DISTANCE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n\n    // v_normal.y is 0 at the midpoint of the line, -1 at the lower edge, 1 at the upper edge\n    // we clamp the line width outset to be between 0 and half the pattern height plus padding (2.0)\n    // to ensure we don't sample outside the designated symbol on the sprite sheet.\n    // 0.5 is added to shift the component to be bounded between 0 and 1 for interpolation of\n    // the texture coordinate\n    float y_a = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (u_pattern_size_a.y + 2.0) / 2.0) / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (u_pattern_size_b.y + 2.0) / 2.0) / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n            0.5 + 0.5 * distance_ratio,\n            0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n            4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},yn=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g;for(var vn in mn)!function(t){var e=mn[t],n={};e.fragmentSource=e.fragmentSource.replace(yn,function(t,e,r,i,o){return n[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"}),e.vertexSource=e.vertexSource.replace(yn,function(t,e,r,i,o){var a="float"===i?"vec2":"vec4";return n[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+a+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = unpack_mix_"+a+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"})}(vn);var gn=mn,_n=function(e,n,r,i){var o=e.gl;this.program=o.createProgram();var a=r.defines().concat("#define DEVICE_PIXEL_RATIO "+t.default$2.devicePixelRatio.toFixed(1));i&&a.push("#define OVERDRAW_INSPECTOR;");var s=a.concat(gn.prelude.fragmentSource,n.fragmentSource).join("\n"),u=a.concat(gn.prelude.vertexSource,n.vertexSource).join("\n"),l=o.createShader(o.FRAGMENT_SHADER);o.shaderSource(l,s),o.compileShader(l),o.attachShader(this.program,l);var c=o.createShader(o.VERTEX_SHADER);o.shaderSource(c,u),o.compileShader(c),o.attachShader(this.program,c);for(var p=r.layoutAttributes||[],h=0;h<p.length;h++)o.bindAttribLocation(this.program,h,p[h].name);o.linkProgram(this.program),this.numAttributes=o.getProgramParameter(this.program,o.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var f=0;f<this.numAttributes;f++){var d=o.getActiveAttrib(this.program,f);d&&(this.attributes[d.name]=o.getAttribLocation(this.program,d.name))}for(var m=o.getProgramParameter(this.program,o.ACTIVE_UNIFORMS),y=0;y<m;y++){var v=o.getActiveUniform(this.program,y);v&&(this.uniforms[v.name]=o.getUniformLocation(this.program,v.name))}};_n.prototype.draw=function(t,e,n,r,i,o,a,s,u){for(var l,c=t.gl,p=(l={},l[c.LINES]=2,l[c.TRIANGLES]=3,l)[e],h=0,f=o.get();h<f.length;h+=1){var d=f[h],m=d.vaos||(d.vaos={});(m[n]||(m[n]=new Gt)).bind(t,this,r,a?a.getPaintVertexBuffers():[],i,d.vertexOffset,s,u),c.drawElements(e,d.primitiveLength*p,c.UNSIGNED_SHORT,d.primitiveOffset*p*2)}};var bn=t.identity(new Float32Array(16)),xn=t.default$18.layout,wn=function(t,e){if(!t)return!1;var n=e.imageManager.getPattern(t.from),r=e.imageManager.getPattern(t.to);return!n||!r},En=function(t,e,n){var r=e.context,i=r.gl,o=e.imageManager.getPattern(t.from),a=e.imageManager.getPattern(t.to);i.uniform1i(n.uniforms.u_image,0),i.uniform2fv(n.uniforms.u_pattern_tl_a,o.tl),i.uniform2fv(n.uniforms.u_pattern_br_a,o.br),i.uniform2fv(n.uniforms.u_pattern_tl_b,a.tl),i.uniform2fv(n.uniforms.u_pattern_br_b,a.br);var s=e.imageManager.getPixelSize(),u=s.width,l=s.height;i.uniform2fv(n.uniforms.u_texsize,[u,l]),i.uniform1f(n.uniforms.u_mix,t.t),i.uniform2fv(n.uniforms.u_pattern_size_a,o.displaySize),i.uniform2fv(n.uniforms.u_pattern_size_b,a.displaySize),i.uniform1f(n.uniforms.u_scale_a,t.fromScale),i.uniform1f(n.uniforms.u_scale_b,t.toScale),r.activeTexture.set(i.TEXTURE0),e.imageManager.bind(e.context)},Sn=function(t,e,n){var r=e.context.gl;r.uniform1f(n.uniforms.u_tile_units_to_pixels,1/j(t,1,e.transform.tileZoom));var i=Math.pow(2,t.tileID.overscaledZ),o=t.tileSize*Math.pow(2,e.transform.tileZoom)/i,a=o*(t.tileID.canonical.x+t.tileID.wrap*i),s=o*t.tileID.canonical.y;r.uniform2f(n.uniforms.u_pixel_coord_upper,a>>16,s>>16),r.uniform2f(n.uniforms.u_pixel_coord_lower,65535&a,65535&s)},Tn={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},kn={symbol:function(t,e,n,r){if("translucent"===t.renderPass){var i=t.context;i.setStencilMode(Me.disabled),i.setColorMode(t.colorModeForRenderPass()),0!==n.paint.get("icon-opacity").constantOr(1)&&q(t,e,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright")),0!==n.paint.get("text-opacity").constantOr(1)&&q(t,e,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright")),e.map.showCollisionBoxes&&function(t,e,n,r){V(t,e,n,r,!1),V(t,e,n,r,!0)}(t,e,n,r)}},circle:function(t,e,n,r){if("translucent"===t.renderPass){var i=n.paint.get("circle-opacity"),o=n.paint.get("circle-stroke-width"),a=n.paint.get("circle-stroke-opacity");if(0!==i.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=t.context,u=s.gl;s.setDepthMode(t.depthModeForSublayer(0,Ie.ReadOnly)),s.setStencilMode(Me.disabled),s.setColorMode(t.colorModeForRenderPass());for(var l=!0,c=0;c<r.length;c++){var p=r[c],h=e.getTile(p),f=h.getBucket(n);if(f){var d=t.context.program.get(),m=f.programConfigurations.get(n.id),y=t.useProgram("circle",m);if((l||y.program!==d)&&(m.setUniforms(s,y,n.paint,{zoom:t.transform.zoom}),l=!1),u.uniform1f(y.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance),u.uniform1i(y.uniforms.u_scale_with_map,"map"===n.paint.get("circle-pitch-scale")?1:0),"map"===n.paint.get("circle-pitch-alignment")){u.uniform1i(y.uniforms.u_pitch_with_map,1);var v=j(h,1,t.transform.zoom);u.uniform2f(y.uniforms.u_extrude_scale,v,v)}else u.uniform1i(y.uniforms.u_pitch_with_map,0),u.uniform2fv(y.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits);u.uniformMatrix4fv(y.uniforms.u_matrix,!1,t.translatePosMatrix(p.posMatrix,h,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor"))),y.draw(s,u.TRIANGLES,n.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,m)}}}}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl;o.setDepthMode(e.depthModeForSublayer(0,Ie.ReadOnly)),o.setStencilMode(Me.disabled),function(t,e,n){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),function t(e,n,r,i){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.width/4,n.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),i.colorAttachment.set(r),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,i.colorAttachment.setDirty(),t(e,n,r,i))}(t,e,o,i)}}(o,e,r),o.clear({color:t.default$8.transparent}),o.setColorMode(new ze([a.ONE,a.ONE],t.default$8.transparent,[!0,!0,!0,!0]));for(var s=!0,u=0;u<i.length;u++){var l=i[u];if(!n.hasRenderableParent(l)){var c=n.getTile(l),p=c.getBucket(r);if(p){var h=e.context.program.get(),f=p.programConfigurations.get(r.id),d=e.useProgram("heatmap",f),m=e.transform.zoom;(s||d.program!==h)&&(f.setUniforms(e.context,d,r.paint,{zoom:m}),s=!1),a.uniform1f(d.uniforms.u_extrude_scale,j(c,1,m)),a.uniform1f(d.uniforms.u_intensity,r.paint.get("heatmap-intensity")),a.uniformMatrix4fv(d.uniforms.u_matrix,!1,l.posMatrix),d.draw(o,a.TRIANGLES,r.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,f)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var r=e.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.default$4(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),r.setDepthMode(Ie.disabled),r.setStencilMode(Me.disabled);var s=e.useProgram("heatmapTexture"),u=n.paint.get("heatmap-opacity");i.uniform1f(s.uniforms.u_opacity,u),i.uniform1i(s.uniforms.u_image,0),i.uniform1i(s.uniforms.u_color_ramp,1);var l=t.create();t.ortho(l,0,e.width,e.height,0,0,1),i.uniformMatrix4fv(s.uniforms.u_matrix,!1,l),i.uniform2f(s.uniforms.u_world,i.drawingBufferWidth,i.drawingBufferHeight),e.viewportVAO.bind(e.context,s,e.viewportBuffer,[]),i.drawArrays(i.TRIANGLE_STRIP,0,4)}}(e,r))},line:function(t,e,n,r){if("translucent"===t.renderPass){var i=n.paint.get("line-opacity"),o=n.paint.get("line-width");if(0!==i.constantOr(1)&&0!==o.constantOr(1)){var a=t.context;a.setDepthMode(t.depthModeForSublayer(0,Ie.ReadOnly)),a.setColorMode(t.colorModeForRenderPass());for(var s,u=n.paint.get("line-dasharray")?"lineSDF":n.paint.get("line-pattern")?"linePattern":n.paint.get("line-gradient")?"lineGradient":"line",l=!0,c=0,p=r;c<p.length;c+=1){var h=p[c],f=e.getTile(h),d=f.getBucket(n);if(d){var m=d.programConfigurations.get(n.id),y=t.context.program.get(),v=t.useProgram(u,m),g=l||v.program!==y,_=s!==f.tileID.overscaledZ;g&&m.setUniforms(t.context,v,n.paint,{zoom:t.transform.zoom}),W(v,t,f,d,n,h,m,g,_),s=f.tileID.overscaledZ,l=!1}}}}},fill:function(e,n,r,i){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.context;s.setColorMode(e.colorModeForRenderPass());var u=r.paint.get("fill-pattern")||1!==o.constantOr(t.default$8.transparent).a||1!==a.constantOr(0)?"translucent":"opaque";e.renderPass===u&&(s.setDepthMode(e.depthModeForSublayer(1,"opaque"===e.renderPass?Ie.ReadWrite:Ie.ReadOnly)),H(e,n,r,i,X)),"translucent"===e.renderPass&&r.paint.get("fill-antialias")&&(s.setDepthMode(e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Ie.ReadOnly)),H(e,n,r,i,K))}},"fill-extrusion":function(e,n,r,i){if(0!==r.paint.get("fill-extrusion-opacity"))if("offscreen"===e.renderPass){!function(e,n){var r=e.context,i=r.gl,o=n.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!o){var a=new t.default$4(r,{width:e.width,height:e.height,data:null},i.RGBA);a.bind(i.LINEAR,i.CLAMP_TO_EDGE),(o=n.viewportFrame=r.createFramebuffer(e.width,e.height)).colorAttachment.set(a.texture)}r.bindFramebuffer.set(o.framebuffer),o.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(r.clear({depth:1}),e.depthRboNeedsClear=!1),r.clear({color:t.default$8.transparent}),r.setStencilMode(Me.disabled),r.setDepthMode(new Ie(i.LEQUAL,Ie.ReadWrite,[0,1])),r.setColorMode(e.colorModeForRenderPass())}(e,r);for(var o=!0,a=0,s=i;a<s.length;a+=1){var u=s[a],l=n.getTile(u),c=l.getBucket(r);c&&(J(e,0,r,l,u,c,o),o=!1)}}else"translucent"===e.renderPass&&function(e,n){var r=n.viewportFrame;if(r){var i=e.context,o=i.gl,a=e.useProgram("extrusionTexture");i.setStencilMode(Me.disabled),i.setDepthMode(Ie.disabled),i.setColorMode(e.colorModeForRenderPass()),i.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,r.colorAttachment.get()),o.uniform1f(a.uniforms.u_opacity,n.paint.get("fill-extrusion-opacity")),o.uniform1i(a.uniforms.u_image,0);var s=t.create();t.ortho(s,0,e.width,e.height,0,0,1),o.uniformMatrix4fv(a.uniforms.u_matrix,!1,s),o.uniform2f(a.uniforms.u_world,o.drawingBufferWidth,o.drawingBufferHeight),e.viewportVAO.bind(i,a,e.viewportBuffer,[]),o.drawArrays(o.TRIANGLE_STRIP,0,4)}}(e,r)},hillshade:function(t,e,n,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var i=t.context,o=e.getSource().maxzoom;i.setDepthMode(t.depthModeForSublayer(0,Ie.ReadOnly)),i.setStencilMode(Me.disabled),i.setColorMode(t.colorModeForRenderPass());for(var a=0,s=r;a<s.length;a+=1){var u=s[a],l=e.getTile(u);l.needsHillshadePrepare&&"offscreen"===t.renderPass?tt(t,l,o):"translucent"===t.renderPass&&Q(t,l,n)}i.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")){var i,o,a=t.context,s=a.gl,u=e.getSource(),l=t.useProgram("raster");a.setStencilMode(Me.disabled),a.setColorMode(t.colorModeForRenderPass()),s.uniform1f(l.uniforms.u_brightness_low,n.paint.get("raster-brightness-min")),s.uniform1f(l.uniforms.u_brightness_high,n.paint.get("raster-brightness-max")),s.uniform1f(l.uniforms.u_saturation_factor,(i=n.paint.get("raster-saturation"))>0?1-1/(1.001-i):-i),s.uniform1f(l.uniforms.u_contrast_factor,(o=n.paint.get("raster-contrast"))>0?1/(1-o):1+o),s.uniform3fv(l.uniforms.u_spin_weights,function(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}(n.paint.get("raster-hue-rotate"))),s.uniform1f(l.uniforms.u_buffer_scale,1),s.uniform1i(l.uniforms.u_image0,0),s.uniform1i(l.uniforms.u_image1,1);for(var c=r.length&&r[0].overscaledZ,p=0,h=r;p<h.length;p+=1){var f=h[p];a.setDepthMode(t.depthModeForSublayer(f.overscaledZ-c,1===n.paint.get("raster-opacity")?Ie.ReadWrite:Ie.ReadOnly,s.LESS));var d=e.getTile(f),m=t.transform.calculatePosMatrix(f.toUnwrapped(),!0);d.registerFadeDuration(n.paint.get("raster-fade-duration")),s.uniformMatrix4fv(l.uniforms.u_matrix,!1,m);var y=e.findLoadedParent(f,0,{}),v=et(d,y,e,n,t.transform),g=void 0,_=void 0,b="nearest"===n.paint.get("raster-resampling")?s.NEAREST:s.LINEAR;if(a.activeTexture.set(s.TEXTURE0),d.texture.bind(b,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.activeTexture.set(s.TEXTURE1),y?(y.texture.bind(b,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),g=Math.pow(2,y.tileID.overscaledZ-d.tileID.overscaledZ),_=[d.tileID.canonical.x*g%1,d.tileID.canonical.y*g%1]):d.texture.bind(b,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),s.uniform2fv(l.uniforms.u_tl_parent,_||[0,0]),s.uniform1f(l.uniforms.u_scale_parent,g||1),s.uniform1f(l.uniforms.u_fade_t,v.mix),s.uniform1f(l.uniforms.u_opacity,v.opacity*n.paint.get("raster-opacity")),u instanceof Zt){var x=u.boundsBuffer;u.boundsVAO.bind(a,l,x,[]),s.drawArrays(s.TRIANGLE_STRIP,0,x.length)}else if(d.maskedBoundsBuffer&&d.maskedIndexBuffer&&d.segments)l.draw(a,s.TRIANGLES,n.id,d.maskedBoundsBuffer,d.maskedIndexBuffer,d.segments);else{var w=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(a,l,w,[]),s.drawArrays(s.TRIANGLE_STRIP,0,w.length)}}}},background:function(t,e,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=t.context,a=o.gl,s=t.transform,u=s.tileSize,l=n.paint.get("background-pattern"),c=l||1!==r.a||1!==i?"translucent":"opaque";if(t.renderPass===c){var p;if(o.setStencilMode(Me.disabled),o.setDepthMode(t.depthModeForSublayer(0,"opaque"===c?Ie.ReadWrite:Ie.ReadOnly)),o.setColorMode(t.colorModeForRenderPass()),l){if(wn(l,t))return;p=t.useProgram("backgroundPattern"),En(l,t,p),t.tileExtentPatternVAO.bind(o,p,t.tileExtentBuffer,[])}else p=t.useProgram("background"),a.uniform4fv(p.uniforms.u_color,[r.r,r.g,r.b,r.a]),t.tileExtentVAO.bind(o,p,t.tileExtentBuffer,[]);a.uniform1f(p.uniforms.u_opacity,i);for(var h=0,f=s.coveringTiles({tileSize:u});h<f.length;h+=1){var d=f[h];l&&Sn({tileID:d,tileSize:u},t,p),a.uniformMatrix4fv(p.uniforms.u_matrix,!1,t.transform.calculatePosMatrix(d.toUnwrapped())),a.drawArrays(a.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}}}},debug:function(t,e,n){for(var r=0;r<n.length;r++)nt(t,e,n[r])}},Cn=function(e,n){this.context=new Re(e),this.transform=n,this._tileTextures={},this.setup(),this.numSublayers=Le.maxUnderzooming+Le.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.default$22,this.crossTileSymbolIndex=new ln};Cn.prototype.resize=function(e,n){var r=this.context.gl;if(this.width=e*t.default$2.devicePixelRatio,this.height=n*t.default$2.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,o=this.style._order;i<o.length;i+=1){var a=o[i];this.style._layers[a].resize()}this.depthRbo&&(r.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},Cn.prototype.setup=function(){var e=this.context,n=new t.PosArray;n.emplaceBack(0,0),n.emplaceBack(t.default$10,0),n.emplaceBack(0,t.default$10),n.emplaceBack(t.default$10,t.default$10),this.tileExtentBuffer=e.createVertexBuffer(n,dn.members),this.tileExtentVAO=new Gt,this.tileExtentPatternVAO=new Gt;var r=new t.PosArray;r.emplaceBack(0,0),r.emplaceBack(t.default$10,0),r.emplaceBack(t.default$10,t.default$10),r.emplaceBack(0,t.default$10),r.emplaceBack(0,0),this.debugBuffer=e.createVertexBuffer(r,dn.members),this.debugVAO=new Gt;var i=new t.RasterBoundsArray;i.emplaceBack(0,0,0,0),i.emplaceBack(t.default$10,0,t.default$10,0),i.emplaceBack(0,t.default$10,0,t.default$10),i.emplaceBack(t.default$10,t.default$10,t.default$10,t.default$10),this.rasterBoundsBuffer=e.createVertexBuffer(i,t.default$11.members),this.rasterBoundsVAO=new Gt;var o=new t.PosArray;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,dn.members),this.viewportVAO=new Gt},Cn.prototype.clearStencil=function(){var e=this.context,n=e.gl;e.setColorMode(ze.disabled),e.setDepthMode(Ie.disabled),e.setStencilMode(new Me({func:n.ALWAYS,mask:0},0,255,n.ZERO,n.ZERO,n.ZERO));var r=t.create();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]);var i=this.useProgram("clippingMask");n.uniformMatrix4fv(i.uniforms.u_matrix,!1,r),this.viewportVAO.bind(e,i,this.viewportBuffer,[]),n.drawArrays(n.TRIANGLE_STRIP,0,4)},Cn.prototype._renderTileClippingMasks=function(t){var e=this.context,n=e.gl;e.setColorMode(ze.disabled),e.setDepthMode(Ie.disabled);var r=1;this._tileClippingMaskIDs={};for(var i=0,o=t;i<o.length;i+=1){var a=o[i],s=this._tileClippingMaskIDs[a.key]=r++;e.setStencilMode(new Me({func:n.ALWAYS,mask:0},s,255,n.KEEP,n.KEEP,n.REPLACE));var u=this.useProgram("clippingMask");n.uniformMatrix4fv(u.uniforms.u_matrix,!1,a.posMatrix),this.tileExtentVAO.bind(this.context,u,this.tileExtentBuffer,[]),n.drawArrays(n.TRIANGLE_STRIP,0,this.tileExtentBuffer.length)}},Cn.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Me({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},Cn.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new ze([e.CONSTANT_COLOR,e.ONE],new t.default$8(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?ze.unblended:ze.alphaBlended},Cn.prototype.depthModeForSublayer=function(t,e,n){var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon,i=r-1+this.depthRange;return new Ie(n||this.context.gl.LEQUAL,e,[i,r])},Cn.prototype.render=function(e,n){var r=this;for(var i in this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.default$2.now()),e.sourceCaches){var o=r.style.sourceCaches[i];o.used&&o.prepare(r.context)}var a=this.style._order,s=t.filterObject(this.style.sourceCaches,function(t){return"raster"===t.getSource().type||"raster-dem"===t.getSource().type});for(var u in s)!function(e){var n=s[e];!function(e,n){for(var r=e.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),i=0;i<r.length;i++){var o={},a=r[i],s=r.slice(i+1);U(a.tileID.wrapped(),a.tileID,s,new t.OverscaledTileID(0,a.tileID.wrap+1,0,0,0),o),a.setMask(o,n)}}(n.getVisibleCoordinates().map(function(t){return n.getTile(t)}),r.context)}(u);this.renderPass="offscreen";var l,c=[];this.depthRboNeedsClear=!0;for(var p=0;p<a.length;p++){var h=r.style._layers[a[p]];h.hasOffscreenPass()&&!h.isHidden(r.transform.zoom)&&(h.source!==(l&&l.id)&&(c=[],(l=r.style.sourceCaches[h.source])&&(c=l.getVisibleCoordinates()).reverse()),c.length&&r.renderLayer(r,l,h,c))}this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.default$8.black:t.default$8.transparent,depth:1}),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque";var f,d=[];for(this.currentLayer=a.length-1,this.currentLayer;this.currentLayer>=0;this.currentLayer--){var m=r.style._layers[a[r.currentLayer]];m.source!==(f&&f.id)&&(d=[],(f=r.style.sourceCaches[m.source])&&(r.clearStencil(),d=f.getVisibleCoordinates(),f.getSource().isTileClipped&&r._renderTileClippingMasks(d))),r.renderLayer(r,f,m,d)}this.renderPass="translucent";var y,v=[];for(this.currentLayer=0,this.currentLayer;this.currentLayer<a.length;this.currentLayer++){var g=r.style._layers[a[r.currentLayer]];g.source!==(y&&y.id)&&(v=[],(y=r.style.sourceCaches[g.source])&&(r.clearStencil(),v=y.getVisibleCoordinates(),y.getSource().isTileClipped&&r._renderTileClippingMasks(v)),v.reverse()),r.renderLayer(r,y,g,v)}if(this.options.showTileBoundaries){var _=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];_&&kn.debug(this,_,_.getVisibleCoordinates())}},Cn.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},Cn.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||r.length)&&(this.id=n.id,kn[n.type](t,e,n,r))},Cn.prototype.translatePosMatrix=function(e,n,r,i,o){if(!r[0]&&!r[1])return e;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);r=[r[0]*u-r[1]*s,r[0]*s+r[1]*u]}var l=[o?r[0]:j(n,r[0],this.transform.zoom),o?r[1]:j(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,l),c},Cn.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},Cn.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},Cn.prototype._createProgramCached=function(t,e){this.cache=this.cache||{};var n=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new _n(this.context,gn[t],e,this._showOverdrawInspector)),this.cache[n]},Cn.prototype.useProgram=function(t,e){var n=this._createProgramCached(t,e||this.emptyProgramConfiguration);return this.context.program.set(n.program),n};var Pn=function(t,e,n){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new jt(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},An={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},x:{configurable:!0},y:{configurable:!0},point:{configurable:!0}};Pn.prototype.clone=function(){var t=new Pn(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},An.minZoom.get=function(){return this._minZoom},An.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},An.maxZoom.get=function(){return this._maxZoom},An.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},An.renderWorldCopies.get=function(){return this._renderWorldCopies},An.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},An.worldSize.get=function(){return this.tileSize*this.scale},An.centerPoint.get=function(){return this.size._div(2)},An.size.get=function(){return new t.default(this.width,this.height)},An.bearing.get=function(){return-this.angle/Math.PI*180},An.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$4(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},An.pitch.get=function(){return this._pitch/Math.PI*180},An.pitch.set=function(e){var n=t.clamp(e,0,60)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},An.fov.get=function(){return this._fov/Math.PI*180},An.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},An.zoom.get=function(){return this._zoom},An.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},An.center.get=function(){return this._center},An.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Pn.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},Pn.prototype.getVisibleUnwrappedCoordinates=function(e){var n=this.pointCoordinate(new t.default(0,0),0),r=this.pointCoordinate(new t.default(this.width,0),0),i=Math.floor(n.column),o=Math.floor(r.column),a=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var s=i;s<=o;s++)0!==s&&a.push(new t.UnwrappedTileID(s,e));return a},Pn.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),r=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var i=this.pointCoordinate(this.centerPoint,n),o=new t.default(i.column-.5,i.row-.5);return function(e,n,r,i){function o(n,o,u){var l,c,p,h;if(u>=0&&u<=a)for(l=n;l<o;l++)c=Math.floor(l/a),p=(l%a+a)%a,0!==c&&!0!==i||(h=new t.OverscaledTileID(r,c,e,p,u),s[h.key]=h)}void 0===i&&(i=!0);var a=1<<e,s={};return ot(n[0],n[1],n[2],0,a,o),ot(n[2],n[3],n[0],0,a,o),Object.keys(s).map(function(t){return s[t]})}(n,[this.pointCoordinate(new t.default(0,0),n),this.pointCoordinate(new t.default(this.width,0),n),this.pointCoordinate(new t.default(this.width,this.height),n),this.pointCoordinate(new t.default(0,this.height),n)],e.reparseOverscaled?r:n,this._renderWorldCopies).sort(function(t,e){return o.dist(t.canonical)-o.dist(e.canonical)})},Pn.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},An.unmodified.get=function(){return this._unmodified},Pn.prototype.zoomScale=function(t){return Math.pow(2,t)},Pn.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},Pn.prototype.project=function(e){return new t.default(this.lngX(e.lng),this.latY(e.lat))},Pn.prototype.unproject=function(t){return new jt(this.xLng(t.x),this.yLat(t.y))},An.x.get=function(){return this.lngX(this.center.lng)},An.y.get=function(){return this.latY(this.center.lat)},An.point.get=function(){return new t.default(this.x,this.y)},Pn.prototype.lngX=function(t){return(180+t)*this.worldSize/360},Pn.prototype.latY=function(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))*this.worldSize/360},Pn.prototype.xLng=function(t){return 360*t/this.worldSize-180},Pn.prototype.yLat=function(t){var e=180-360*t/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90},Pn.prototype.setLocationAtPoint=function(t,e){var n=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(n)),this._renderWorldCopies&&(this.center=this.center.wrap())},Pn.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},Pn.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},Pn.prototype.locationCoordinate=function(e){return new t.default$15(this.lngX(e.lng)/this.tileSize,this.latY(e.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},Pn.prototype.coordinateLocation=function(t){var e=t.zoomTo(this.zoom);return new jt(this.xLng(e.column*this.tileSize),this.yLat(e.row*this.tileSize))},Pn.prototype.pointCoordinate=function(e,n){void 0===n&&(n=this.tileZoom);var r=[e.x,e.y,0,1],i=[e.x,e.y,1,1];t.transformMat4(r,r,this.pixelMatrixInverse),t.transformMat4(i,i,this.pixelMatrixInverse);var o=r[3],a=i[3],s=r[0]/o,u=i[0]/a,l=r[1]/o,c=i[1]/a,p=r[2]/o,h=i[2]/a,f=p===h?0:(0-p)/(h-p);return new t.default$15(t.number(s,u,f)/this.tileSize,t.number(l,c,f)/this.tileSize,this.zoom)._zoomTo(n)},Pn.prototype.coordinatePoint=function(e){var n=e.zoomTo(this.zoom),r=[n.column*this.tileSize,n.row*this.tileSize,0,1];return t.transformMat4(r,r,this.pixelMatrix),new t.default(r[0]/r[3],r[1]/r[3])},Pn.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,u=t.identity(new Float64Array(16));return t.translate(u,u,[s*a,o.y*a,0]),t.scale(u,u,[a/t.default$10,a/t.default$10,1]),t.multiply(u,n?this.alignedProjMatrix:this.projMatrix,u),i[r]=new Float32Array(u),i[r]},Pn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,r,i,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;o=this.latY(p[1]),e=(a=this.latY(p[0]))-o<l.y?l.y/(a-o):0}if(this.lngRange){var h=this.lngRange;s=this.lngX(h[0]),n=(u=this.lngX(h[1]))-s<l.x?l.x/(u-s):0}var f=Math.max(n||0,e||0);if(f)return this.center=this.unproject(new t.default(n?(u+s)/2:this.x,e?(a+o)/2:this.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var d=this.y,m=l.y/2;d-m<o&&(i=o+m),d+m>a&&(i=a-m)}if(this.lngRange){var y=this.x,v=l.x/2;y-v<s&&(r=s+v),y+v>u&&(r=u-v)}void 0===r&&void 0===i||(this.center=this.unproject(new t.default(void 0!==r?r:this.x,void 0!==i?i:this.y))),this._unmodified=c,this._constraining=!1}},Pn.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,n=Math.PI/2+this._pitch,r=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-n-e),i=this.x,o=this.y,a=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),s=new Float64Array(16);t.perspective(s,this._fov,this.width/this.height,1,a),t.scale(s,s,[1,-1,1]),t.translate(s,s,[0,0,-this.cameraToCenterDistance]),t.rotateX(s,s,this._pitch),t.rotateZ(s,s,this.angle),t.translate(s,s,[-i,-o,0]);var u=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));t.scale(s,s,[1,1,u,1]),this.projMatrix=s;var l=this.width%2/2,c=this.height%2/2,p=Math.cos(this.angle),h=Math.sin(this.angle),f=i-Math.round(i)+p*l+h*c,d=o-Math.round(o)+p*c+h*l,m=new Float64Array(s);if(t.translate(m,m,[f>.5?f-1:f,d>.5?d-1:d,0]),this.alignedProjMatrix=m,s=t.create(),t.scale(s,s,[this.width/2,-this.height/2,1]),t.translate(s,s,[1,-1,0]),this.pixelMatrix=t.multiply(new Float64Array(16),s,this.projMatrix),!(s=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=s,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Pn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.default(0,0)).zoomTo(this.zoom),n=[e.column*this.tileSize,e.row*this.tileSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},Object.defineProperties(Pn.prototype,An);var On=function(){var e,n,r,i,o;t.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),n=300,r=!1,i=0,o=function(){i=0,r&&(e(),i=setTimeout(o,n),r=!1)},function(){return r=!0,i||o(),i})};On.prototype.addTo=function(e){return this._map=e,t.default$1.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},On.prototype.remove=function(){return t.default$1.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},On.prototype.getHashString=function(t){var e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(e.lng*i)/i,a=Math.round(e.lat*i)/i,s=this._map.getBearing(),u=this._map.getPitch(),l="";return l+=t?"#/"+o+"/"+a+"/"+n:"#"+n+"/"+a+"/"+o,(s||u)&&(l+="/"+Math.round(10*s)/10),u&&(l+="/"+Math.round(u)),l},On.prototype._onHashChange=function(){var e=t.default$1.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},On.prototype._updateHashUnthrottled=function(){var e=this.getHashString();t.default$1.history.replaceState(t.default$1.history.state,"",e)};var In=function(e){function n(n,r,i,o){void 0===o&&(o={});var a=dt.mousePos(r.getCanvasContainer(),i),s=r.unproject(a);e.call(this,n,t.extend({point:a,lngLat:s,originalEvent:i},o)),this._defaultPrevented=!1,this.target=r}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,r),n}(t.Event),Mn=function(e){function n(n,r,i){var o=dt.touchPos(r.getCanvasContainer(),i),a=o.map(function(t){return r.unproject(t)}),s=o.reduce(function(t,e,n,r){return t.add(e.div(r.length))},new t.default(0,0)),u=r.unproject(s);e.call(this,n,{points:o,point:s,lngLats:a,lngLat:u,originalEvent:i}),this._defaultPrevented=!1}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,r),n}(t.Event),zn=function(t){function e(e,n,r){t.call(this,e,{originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),Rn=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Rn.prototype.isEnabled=function(){return!!this._enabled},Rn.prototype.isActive=function(){return!!this._active},Rn.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},Rn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Rn.prototype.onWheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.default$1.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=t.default$2.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this.isActive()||this._start(e)),e.preventDefault()}},Rn.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},Rn.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e})),this._finishTimeout&&clearTimeout(this._finishTimeout);var n=dt.mousePos(this._el,e);this._around=jt.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},Rn.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a="number"==typeof this._targetZoom?this._targetZoom:n.zoom,s=this._startZoom,u=this._easing,l=!1;if("wheel"===this._type&&s&&u){var c=Math.min((t.default$2.now()-this._lastWheelEventTime)/200,1),p=u(c);n.zoom=t.number(s,a,p),c<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):l=!0}else n.zoom=a,l=!0;n.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),l&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom},200))}},Rn.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var r=this._prevEase,i=(t.default$2.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.bezier(a,s,.25,1)}return this._prevEase={start:t.default$2.now(),duration:e,easing:n},n};var Ln=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};Ln.prototype.isEnabled=function(){return!!this._enabled},Ln.prototype.isActive=function(){return!!this._active},Ln.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ln.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ln.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.default$1.document.addEventListener("mousemove",this._onMouseMove,!1),t.default$1.document.addEventListener("keydown",this._onKeyDown,!1),t.default$1.document.addEventListener("mouseup",this._onMouseUp,!1),dt.disableDrag(),this._startPos=this._lastPos=dt.mousePos(this._el,e),this._active=!0)},Ln.prototype._onMouseMove=function(t){var e=dt.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var n=this._startPos;this._lastPos=e,this._box||(this._box=dt.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var r=Math.min(n.x,e.x),i=Math.max(n.x,e.x),o=Math.min(n.y,e.y),a=Math.max(n.y,e.y);dt.setTransform(this._box,"translate("+r+"px,"+o+"px)"),this._box.style.width=i-r+"px",this._box.style.height=a-o+"px"}},Ln.prototype._onMouseUp=function(e){if(0===e.button){var n=this._startPos,r=dt.mousePos(this._el,e),i=(new Ft).extend(this._map.unproject(n)).extend(this._map.unproject(r));this._finish(),dt.suppressClick(),n.x===r.x&&n.y===r.y?this._fireEvent("boxzoomcancel",e):this._map.fitBounds(i,{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e,boxZoomBounds:i}))}},Ln.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},Ln.prototype._finish=function(){this._active=!1,t.default$1.document.removeEventListener("mousemove",this._onMouseMove,!1),t.default$1.document.removeEventListener("keydown",this._onKeyDown,!1),t.default$1.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(dt.remove(this._box),this._box=null),dt.enableDrag(),delete this._startPos,delete this._lastPos},Ln.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var Dn=t.bezier(0,0,.25,1),Bn=function(e,n){this._map=e,this._el=n.element||e.getCanvasContainer(),this._state="disabled",this._button=n.button||"right",this._bearingSnap=n.bearingSnap||0,this._pitchWithRotate=!1!==n.pitchWithRotate,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};Bn.prototype.isEnabled=function(){return"disabled"!==this._state},Bn.prototype.isActive=function(){return"active"===this._state},Bn.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},Bn.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Bn.prototype.onMouseDown=function(e){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=dt.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==dt.mouseButton(e))return;this._eventButton=0}dt.disableDrag(),t.default$1.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.default$1.document.addEventListener("mouseup",this._onMouseUp),t.default$1.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.default$2.now(),this._map.getBearing()]],this._startPos=this._lastPos=dt.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},Bn.prototype._onMouseMove=function(t){var e=dt.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Bn.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var n=this._map.transform,r=this._startPos,i=this._lastPos,o=.8*(r.x-i.x),a=-.5*(r.y-i.y),s=n.bearing-o,u=n.pitch-a,l=this._inertia,c=l[l.length-1];this._drainInertiaBuffer(),l.push([t.default$2.now(),this._map._normalizeBearing(s,c[1])]),n.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",e),n.pitch=u),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._startPos=this._lastPos}},Bn.prototype._onMouseUp=function(t){if(dt.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",dt.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},Bn.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},Bn.prototype._unbind=function(){t.default$1.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.default$1.document.removeEventListener("mouseup",this._onMouseUp),t.default$1.removeEventListener("blur",this._onBlur),dt.enableDrag()},Bn.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},Bn.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,o=function(){Math.abs(r)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(i.length<2)o();else{var a=i[0],s=i[i.length-1],u=i[i.length-2],l=n._normalizeBearing(r,u[1]),c=s[1]-a[1],p=c<0?-1:1,h=(s[0]-a[0])/1e3;if(0!==c&&0!==h){var f=Math.abs(c*(.25/h));f>180&&(f=180);var d=f/180;l+=p*f*(d/2),Math.abs(n._normalizeBearing(l,0))<this._bearingSnap&&(l=n._normalizeBearing(0,l)),n.rotateTo(l,{duration:1e3*d,easing:Dn,noMoveStart:!0},{originalEvent:t})}else o()}},Bn.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},Bn.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.default$2.now();e.length>0&&n-e[0][0]>160;)e.shift()};var jn=t.bezier(0,0,.3,1),Fn=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};Fn.prototype.isEnabled=function(){return"disabled"!==this._state},Fn.prototype.isActive=function(){return"active"===this._state},Fn.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},Fn.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Fn.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==dt.mouseButton(e)||(dt.addEventListener(t.default$1.document,"mousemove",this._onMove,{capture:!0}),dt.addEventListener(t.default$1.document,"mouseup",this._onMouseUp),this._start(e)))},Fn.prototype.onTouchStart=function(e){"enabled"===this._state&&(e.touches.length>1||(dt.addEventListener(t.default$1.document,"touchmove",this._onMove,{capture:!0,passive:!1}),dt.addEventListener(t.default$1.document,"touchend",this._onTouchEnd),this._start(e)))},Fn.prototype._start=function(e){t.default$1.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=dt.mousePos(this._el,e),this._inertia=[[t.default$2.now(),this._startPos]]},Fn.prototype._onMove=function(e){e.preventDefault();var n=dt.mousePos(this._el,e);this._lastPos.equals(n)||"pending"===this._state&&n.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=n,this._drainInertiaBuffer(),this._inertia.push([t.default$2.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",e),this._fireEvent("movestart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Fn.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._startPos=this._lastPos,delete this._lastMoveEvent}},Fn.prototype._onMouseUp=function(t){if(0===dt.mouseButton(t))switch(this._state){case"active":this._state="enabled",dt.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},Fn.prototype._onTouchEnd=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},Fn.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},Fn.prototype._unbind=function(){dt.removeEventListener(t.default$1.document,"touchmove",this._onMove,{capture:!0,passive:!1}),dt.removeEventListener(t.default$1.document,"touchend",this._onTouchEnd),dt.removeEventListener(t.default$1.document,"mousemove",this._onMove,{capture:!0}),dt.removeEventListener(t.default$1.document,"mouseup",this._onMouseUp),dt.removeEventListener(t.default$1,"blur",this._onBlur)},Fn.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},Fn.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var n=e[e.length-1],r=e[0],i=n[1].sub(r[1]),o=(n[0]-r[0])/1e3;if(0===o||n[1].equals(r[1]))this._fireEvent("moveend",t);else{var a=i.mult(.3/o),s=a.mag();s>1400&&(s=1400,a._unit()._mult(s));var u=s/750,l=a.mult(-u/2);this._map.panBy(l,{duration:1e3*u,easing:jn,noMoveStart:!0},{originalEvent:t})}}},Fn.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},Fn.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.default$2.now();e.length>0&&n-e[0][0]>160;)e.shift()};var Nn=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};Nn.prototype.isEnabled=function(){return!!this._enabled},Nn.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},Nn.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},Nn.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,r=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(o=1,t.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),u={duration:300,delayEndEvents:500,easing:at,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+15*n,pitch:a.getPitch()+10*r,offset:[100*-i,100*-o],center:a.getCenter()};a.easeTo(u,{originalEvent:t})}};var Un=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};Un.prototype.isEnabled=function(){return!!this._enabled},Un.prototype.isActive=function(){return!!this._active},Un.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Un.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Un.prototype.onTouchStart=function(t){var e=this;this.isEnabled()&&(t.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(t)):this._tapped=setTimeout(function(){e._tapped=null},300)))},Un.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},Un.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},Un.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var Vn=t.bezier(0,0,.15,1),qn=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};qn.prototype.isEnabled=function(){return!!this._enabled},qn.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},qn.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},qn.prototype.disableRotation=function(){this._rotationDisabled=!0},qn.prototype.enableRotation=function(){this._rotationDisabled=!1},qn.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var n=dt.mousePos(this._el,e.touches[0]),r=dt.mousePos(this._el,e.touches[1]);this._startVec=n.sub(r),this._gestureIntent=void 0,this._inertia=[],dt.addEventListener(t.default$1.document,"touchmove",this._onMove,{passive:!1}),dt.addEventListener(t.default$1.document,"touchend",this._onEnd)}},qn.prototype._getTouchEventData=function(t){var e=dt.mousePos(this._el,t.touches[0]),n=dt.mousePos(this._el,t.touches[1]),r=e.sub(n);return{vec:r,center:e.add(n).div(2),scale:r.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*r.angleWith(this._startVec)/Math.PI}},qn.prototype._onMove=function(e){if(2===e.touches.length){var n=this._getTouchEventData(e),r=n.vec,i=n.scale,o=n.bearing;if(!this._gestureIntent){var a=Math.abs(1-i)>.15;Math.abs(o)>10?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=r)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},qn.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var n=this._map.transform;this._startScale||(this._startScale=n.scale,this._startBearing=n.bearing);var r=this._getTouchEventData(this._lastTouchEvent),i=r.center,o=r.bearing,a=r.scale,s=n.pointLocation(i),u=n.locationPoint(s);"rotate"===e&&(n.bearing=this._startBearing+o),n.zoom=n.scaleZoom(this._startScale*a),n.setLocationAtPoint(s,u),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.default$2.now(),a,i])}},qn.prototype._onEnd=function(e){dt.removeEventListener(t.default$1.document,"touchmove",this._onMove,{passive:!1}),dt.removeEventListener(t.default$1.document,"touchend",this._onEnd);var n=this._gestureIntent,r=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,n){this._map.fire(new t.Event(n+"end",{originalEvent:e})),this._drainInertiaBuffer();var i=this._inertia,o=this._map;if(i.length<2)o.snapToNorth({},{originalEvent:e});else{var a=i[i.length-1],s=i[0],u=o.transform.scaleZoom(r*a[1]),l=o.transform.scaleZoom(r*s[1]),c=u-l,p=(a[0]-s[0])/1e3,h=a[2];if(0!==p&&u!==l){var f=.15*c/p;Math.abs(f)>2.5&&(f=f>0?2.5:-2.5);var d=1e3*Math.abs(f/(12*.15)),m=u+f*d/2e3;m<0&&(m=0),o.easeTo({zoom:m,duration:d,easing:Vn,around:this._aroundCenter?o.getCenter():o.unproject(h),noMoveStart:!0},{originalEvent:e})}else o.snapToNorth({},{originalEvent:e})}}},qn.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.default$2.now();e.length>2&&n-e[0][0]>160;)e.shift()};var $n={scrollZoom:Rn,boxZoom:Ln,dragRotate:Bn,dragPan:Fn,keyboard:Nn,doubleClickZoom:Un,touchZoomRotate:qn},Gn=function(e){function n(n,r){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getCenter=function(){return this.transform.center},n.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},n.prototype.panBy=function(e,n,r){return e=t.default.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)},n.prototype.panTo=function(e,n,r){return this.easeTo(t.extend({center:e},n),r)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},n.prototype.zoomTo=function(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)},n.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},n.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},n.prototype.rotateTo=function(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)},n.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},n.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},n.prototype.cameraForBounds=function(e,n){if("number"==typeof(n=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){var r=n.padding;n.padding={top:r,bottom:r,right:r,left:r}}if(t.default$13(Object.keys(n.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"])){e=Ft.convert(e);var i=[(n.padding.left-n.padding.right)/2,(n.padding.top-n.padding.bottom)/2],o=Math.min(n.padding.right,n.padding.left),a=Math.min(n.padding.top,n.padding.bottom);n.offset=[n.offset[0]+i[0],n.offset[1]+i[1]];var s=t.default.convert(n.offset),u=this.transform,l=u.project(e.getNorthWest()),c=u.project(e.getSouthEast()),p=c.sub(l),h=(u.width-2*o-2*Math.abs(s.x))/p.x,f=(u.height-2*a-2*Math.abs(s.y))/p.y;if(!(f<0||h<0))return n.center=u.unproject(l.add(c).div(2)),n.zoom=Math.min(u.scaleZoom(u.scale*Math.min(h,f)),n.maxZoom),n.bearing=0,n;t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},n.prototype.fitBounds=function(e,n,r){var i=this.cameraForBounds(e,n);return i?(n=t.extend(i,n)).linear?this.easeTo(n,r):this.flyTo(n,r):this},n.prototype.jumpTo=function(e,n){this.stop();var r=this.transform,i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=jt.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},n.prototype.easeTo=function(e,n){var r=this;this.stop(),!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate&&(e.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u="zoom"in e?+e.zoom:o,l="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:s,p=i.centerPoint.add(t.default.convert(e.offset)),h=i.pointLocation(p),f=jt.convert(e.center||h);this._normalizeCenter(f);var d,m,y=i.project(h),v=i.project(f).sub(y),g=i.zoomScale(u-o);return e.around&&(d=jt.convert(e.around),m=i.locationPoint(d)),this._zooming=u!==o,this._rotating=a!==l,this._pitching=c!==s,this._prepareEase(n,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(r._zooming&&(i.zoom=t.number(o,u,e)),r._rotating&&(i.bearing=t.number(a,l,e)),r._pitching&&(i.pitch=t.number(s,c,e)),d)i.setLocationAtPoint(d,m);else{var h=i.zoomScale(i.zoom-o),f=u>o?Math.min(2,g):Math.max(.5,g),_=Math.pow(f,1-e),b=i.unproject(y.add(v.mult(e*_)).mult(h));i.setLocationAtPoint(i.renderWorldCopies?b.wrap():b,p)}r._fireMoveEvents(n)},function(){e.delayEndEvents?r._easeEndTimeoutID=setTimeout(function(){return r._afterEase(n)},e.delayEndEvents):r._afterEase(n)},e),this},n.prototype._prepareEase=function(e,n){this._moving=!0,n||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},n.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},n.prototype._afterEase=function(e){var n=this._zooming,r=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,n&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),i&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},n.prototype.flyTo=function(e,n){function r(t){var e=(w*w-x*x+(t?-1:1)*k*k*E*E)/(2*(t?w:x)*k*E);return Math.log(Math.sqrt(e*e+1)-e)}function i(t){return(Math.exp(t)-Math.exp(-t))/2}function o(t){return(Math.exp(t)+Math.exp(-t))/2}var a=this;this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var s=this.transform,u=this.getZoom(),l=this.getBearing(),c=this.getPitch(),p="zoom"in e?t.clamp(+e.zoom,s.minZoom,s.maxZoom):u,h="bearing"in e?this._normalizeBearing(e.bearing,l):l,f="pitch"in e?+e.pitch:c,d=s.zoomScale(p-u),m=s.centerPoint.add(t.default.convert(e.offset)),y=s.pointLocation(m),v=jt.convert(e.center||y);this._normalizeCenter(v);var g=s.project(y),_=s.project(v).sub(g),b=e.curve,x=Math.max(s.width,s.height),w=x/d,E=_.mag();if("minZoom"in e){var S=t.clamp(Math.min(e.minZoom,u,p),s.minZoom,s.maxZoom),T=x/s.zoomScale(S-u);b=Math.sqrt(T/E*2)}var k=b*b,C=r(0),P=function(t){return o(C)/o(C+b*t)},A=function(t){return x*((o(C)*(i(e=C+b*t)/o(e))-i(C))/k)/E;var e},O=(r(1)-C)/b;if(Math.abs(E)<1e-6||!isFinite(O)){if(Math.abs(x-w)<1e-6)return this.easeTo(e,n);var I=w<x?-1:1;O=Math.abs(Math.log(w/x))/b,A=function(){return 0},P=function(t){return Math.exp(I*b*t)}}if("duration"in e)e.duration=+e.duration;else{var M="screenSpeed"in e?+e.screenSpeed/b:+e.speed;e.duration=1e3*O/M}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=l!==h,this._pitching=f!==c,this._prepareEase(n,!1),this._ease(function(e){var r=e*O,i=1/P(r);s.zoom=1===e?p:u+s.scaleZoom(i),a._rotating&&(s.bearing=t.number(l,h,e)),a._pitching&&(s.pitch=t.number(c,f,e));var o=s.unproject(g.add(_.mult(A(r))).mult(i));s.setLocationAtPoint(s.renderWorldCopies?o.wrap():o,m),a._fireMoveEvents(n)},function(){return a._afterEase(n)},e),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},n.prototype._ease=function(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.default$2.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var e=Math.min((t.default$2.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e},n.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},n}(t.Evented),Zn=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Zn.prototype.getDefaultPosition=function(){return"bottom-right"},Zn.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=dt.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Zn.prototype.onRemove=function(){dt.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},Zn.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var e=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:xt.ACCESS_TOKEN}];if(t){var n=e.reduce(function(t,n,r){return n.value&&(t+=n.key+"="+n.value+(r<e.length-1?"&":"")),t},"?");t.href="https://www.mapbox.com/feedback/"+n+(this._map._hash?this._map._hash.getHashString(!0):"")}},Zn.prototype._updateData=function(t){t&&"metadata"===t.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},Zn.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r].getSource();i.attribution&&t.indexOf(i.attribution)<0&&t.push(i.attribution)}t.sort(function(t,e){return t.length-e.length}),(t=t.filter(function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0})).length?(this._container.innerHTML=t.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},Zn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Wn=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Wn.prototype.onAdd=function(t){this._map=t,this._container=dt.create("div","mapboxgl-ctrl");var e=dt.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),e.setAttribute("rel","noopener"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Wn.prototype.onRemove=function(){dt.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Wn.prototype.getDefaultPosition=function(){return"bottom-left"},Wn.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Wn.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Wn.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var Hn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Hn.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Hn.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,r=e?this._queue.concat(e):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===t)return void(i.cancelled=!0)}},Hn.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(!r.cancelled&&(r.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Hn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Xn=t.default$1.HTMLImageElement,Kn=t.default$1.HTMLElement,Yn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Jn=function(e){function n(n){if(null!=(n=t.extend({},Yn,n)).minZoom&&null!=n.maxZoom&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than minZoom");var r=new Pn(n.minZoom,n.maxZoom,n.renderWorldCopies);e.call(this,r,n),this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=n.preserveDrawingBuffer,this._trackResize=n.trackResize,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=n.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=n.collectResourceTiming,this._renderTaskQueue=new Hn;var i=n.transformRequest;if(this._transformRequest=i?function(t,e){return i(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof n.container){var o=t.default$1.document.getElementById(n.container);if(!o)throw new Error("Container '"+n.container+"' not found.");this._container=o}else{if(!(n.container instanceof Kn))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),void 0!==t.default$1&&(t.default$1.addEventListener("online",this._onWindowOnline,!1),t.default$1.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var n=t.getCanvasContainer(),r=null,i=!1,o=null;for(var a in $n)t[a]=new $n[a](t,e),e.interactive&&e[a]&&t[a].enable(e[a]);dt.addEventListener(n,"mouseout",function(e){t.fire(new In("mouseout",t,e))}),dt.addEventListener(n,"mousedown",function(r){i=!0,o=dt.mousePos(n,r);var a=new In("mousedown",t,r);t.fire(a),a.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(r),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(r),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(r))}),dt.addEventListener(n,"mouseup",function(e){var n=t.dragRotate.isActive();r&&!n&&t.fire(new In("contextmenu",t,r)),r=null,i=!1,t.fire(new In("mouseup",t,e))}),dt.addEventListener(n,"mousemove",function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var r=e.target;r&&r!==n;)r=r.parentNode;r===n&&t.fire(new In("mousemove",t,e))}}),dt.addEventListener(n,"mouseover",function(e){for(var r=e.target;r&&r!==n;)r=r.parentNode;r===n&&t.fire(new In("mouseover",t,e))}),dt.addEventListener(n,"touchstart",function(n){var r=new Mn("touchstart",t,n);t.fire(r),r.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(n),t.touchZoomRotate.onStart(n),t.doubleClickZoom.onTouchStart(r))},{passive:!1}),dt.addEventListener(n,"touchmove",function(e){t.fire(new Mn("touchmove",t,e))},{passive:!1}),dt.addEventListener(n,"touchend",function(e){t.fire(new Mn("touchend",t,e))}),dt.addEventListener(n,"touchcancel",function(e){t.fire(new Mn("touchcancel",t,e))}),dt.addEventListener(n,"click",function(r){var i=dt.mousePos(n,r);(i.equals(o)||i.dist(o)<e.clickTolerance)&&t.fire(new In("click",t,r))}),dt.addEventListener(n,"dblclick",function(e){var n=new In("dblclick",t,e);t.fire(n),n.defaultPrevented||t.doubleClickZoom.onDblClick(n)}),dt.addEventListener(n,"contextmenu",function(e){var n=t.dragRotate.isActive();i||n?i&&(r=e):t.fire(new In("contextmenu",t,e)),e.preventDefault()}),dt.addEventListener(n,"wheel",function(n){e.interactive&&t.stop();var r=new zn("wheel",t,n);t.fire(r),r.defaultPrevented||t.scrollZoom.onWheel(n)},{passive:!1})}(this,n),this._hash=n.hash&&(new On).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),this.resize(),n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new Zn),this.addControl(new Wn,n.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return n.prototype.addControl=function(t,e){void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e="top-right");var n=t.onAdd(this),r=this._controlPositions[e];return-1!==e.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this},n.prototype.removeControl=function(t){return t.onRemove(this),this},n.prototype.resize=function(e){var n=this._containerDimensions(),r=n[0],i=n[1];return this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},n.prototype.getBounds=function(){return(new Ft).extend(this.transform.pointLocation(new t.default(0,0))).extend(this.transform.pointLocation(new t.default(this.transform.width,0))).extend(this.transform.pointLocation(new t.default(this.transform.width,this.transform.height))).extend(this.transform.pointLocation(new t.default(0,this.transform.height)))},n.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new Ft([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},n.prototype.setMaxBounds=function(t){if(t){var e=Ft.convert(t);this.transform.lngRange=[e.getWest(),e.getEast()],this.transform.latRange=[e.getSouth(),e.getNorth()],this.transform._constrain(),this._update()}else null==t&&(this.transform.lngRange=null,this.transform.latRange=null,this._update());return this},n.prototype.setMinZoom=function(t){if((t=null==t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},n.prototype.getMinZoom=function(){return this.transform.minZoom},n.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},n.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},n.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update(),this},n.prototype.getMaxZoom=function(){return this.transform.maxZoom},n.prototype.project=function(t){return this.transform.locationPoint(jt.convert(t))},n.prototype.unproject=function(e){return this.transform.pointLocation(t.default.convert(e))},n.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},n.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isActive()},n.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},n.prototype.on=function(t,n,r){var i,o=this;if(void 0===r)return e.prototype.on.call(this,t,n);var a=function(){if("mouseenter"===t||"mouseover"===t){var e=!1;return{layer:n,listener:r,delegates:{mousemove:function(i){var a=o.getLayer(n)?o.queryRenderedFeatures(i.point,{layers:[n]}):[];a.length?e||(e=!0,r.call(o,new In(t,o,i.originalEvent,{features:a}))):e=!1},mouseout:function(){e=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:n,listener:r,delegates:{mousemove:function(e){(o.getLayer(n)?o.queryRenderedFeatures(e.point,{layers:[n]}):[]).length?a=!0:a&&(a=!1,r.call(o,new In(t,o,e.originalEvent)))},mouseout:function(e){a&&(a=!1,r.call(o,new In(t,o,e.originalEvent)))}}}}return{layer:n,listener:r,delegates:(i={},i[t]=function(t){var e=o.getLayer(n)?o.queryRenderedFeatures(t.point,{layers:[n]}):[];e.length&&(t.features=e,r.call(o,t),delete t.features)},i)}}();for(var s in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(a),a.delegates)o.on(s,a.delegates[s]);return this},n.prototype.off=function(t,n,r){if(void 0===r)return e.prototype.off.call(this,t,n);if(this._delegatedListeners&&this._delegatedListeners[t])for(var i=this._delegatedListeners[t],o=0;o<i.length;o++){var a=i[o];if(a.layer===n&&a.listener===r){for(var s in a.delegates)this.off(s,a.delegates[s]);return i.splice(o,1),this}}return this},n.prototype.queryRenderedFeatures=function(e,n){var r;return 2===arguments.length?(e=arguments[0],n=arguments[1]):1===arguments.length&&((r=arguments[0])instanceof t.default||Array.isArray(r))?(e=arguments[0],n={}):1===arguments.length?(e=void 0,n=arguments[0]):(e=void 0,n={}),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(e),n,this.transform):[]},n.prototype._makeQueryGeometry=function(e){var n,r=this;if(void 0===e&&(e=[t.default.convert([0,0]),t.default.convert([this.transform.width,this.transform.height])]),e instanceof t.default||"number"==typeof e[0])n=[t.default.convert(e)];else{var i=[t.default.convert(e[0]),t.default.convert(e[1])];n=[i[0],new t.default(i[1].x,i[0].y),i[1],new t.default(i[0].x,i[1].y),i[0]]}return{viewport:n,worldCoordinate:n.map(function(t){return r.transform.pointCoordinate(t)})}},n.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},n.prototype.setStyle=function(e,n){if((!n||!1!==n.diff&&!n.localIdeographFontFamily)&&this.style&&e&&"object"==typeof e)try{return this.style.setState(e)&&this._update(!0),this}catch(e){t.warnOnce("Unable to perform style diff: "+(e.message||e.error||e)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new fn(this,n||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},n.prototype.getStyle=function(){if(this.style)return this.style.serialize()},n.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},n.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0),this},n.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},n.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},n.prototype.addSourceType=function(t,e,n){return this.style.addSourceType(t,e,n)},n.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0),this},n.prototype.getSource=function(t){return this.style.getSource(t)},n.prototype.addImage=function(e,n,r){void 0===r&&(r={});var i=r.pixelRatio;void 0===i&&(i=1);var o=r.sdf;if(void 0===o&&(o=!1),n instanceof Xn){var a=t.default$2.getImageData(n),s=a.width,u=a.height,l=a.data;this.style.addImage(e,{data:new t.RGBAImage({width:s,height:u},l),pixelRatio:i,sdf:o})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=n.width,p=n.height,h=n.data;this.style.addImage(e,{data:new t.RGBAImage({width:c,height:p},new Uint8Array(h)),pixelRatio:i,sdf:o})}},n.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},n.prototype.removeImage=function(t){this.style.removeImage(t)},n.prototype.loadImage=function(e,n){t.getImage(this._transformRequest(e,t.ResourceType.Image),n)},n.prototype.listImages=function(){return this.style.listImages()},n.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0),this},n.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0),this},n.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0),this},n.prototype.getLayer=function(t){return this.style.getLayer(t)},n.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0),this},n.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0),this},n.prototype.getFilter=function(t){return this.style.getFilter(t)},n.prototype.setPaintProperty=function(t,e,n){return this.style.setPaintProperty(t,e,n),this._update(!0),this},n.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},n.prototype.setLayoutProperty=function(t,e,n){return this.style.setLayoutProperty(t,e,n),this._update(!0),this},n.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},n.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0),this},n.prototype.getLight=function(){return this.style.getLight()},n.prototype.setFeatureState=function(t,e){this.style.setFeatureState(t,e),this._update()},n.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},n.prototype.getContainer=function(){return this._container},n.prototype.getCanvasContainer=function(){return this._canvasContainer},n.prototype.getCanvas=function(){return this._canvas},n.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),[t,e]},n.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.default$1.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},n.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=dt.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=dt.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=dt.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=dt.create("div","mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){i[t]=dt.create("div","mapboxgl-ctrl-"+t,r)})},n.prototype._resizeCanvas=function(e,n){var r=t.default$1.devicePixelRatio||1;this._canvas.width=r*e,this._canvas.height=r*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},n.prototype._setupPainter=function(){var e=t.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},ft.webGLContextAttributes),n=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);n?this.painter=new Cn(n,this.transform):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},n.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},n.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},n.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},n.prototype._update=function(t){this.style&&(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender())},n.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},n.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},n.prototype._render=function(){this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var n=this.transform.zoom,r=t.default$2.now();this.style.zoomHistory.update(n,r);var i=new t.default$23(n,{now:r,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),o=i.crossFadingFactor();1===o&&o===this._crossFadingFactor||(e=!0,this._crossFadingFactor=o),this.style.update(i)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},n.prototype.remove=function(){this._hash&&this._hash.remove(),this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==t.default$1&&(t.default$1.removeEventListener("resize",this._onWindowResize,!1),t.default$1.removeEventListener("online",this._onWindowOnline,!1));var e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),st(this._canvasContainer),st(this._controlContainer),st(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},n.prototype._rerender=function(){var e=this;this.style&&!this._frame&&(this._frame=t.default$2.frame(function(){e._frame=null,e._render()}))},n.prototype._onWindowOnline=function(){this._update()},n.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},r.showTileBoundaries.get=function(){return!!this._showTileBoundaries},r.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},r.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},r.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},r.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},r.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},r.repaint.get=function(){return!!this._repaint},r.repaint.set=function(t){this._repaint=t,this._update()},r.vertices.get=function(){return!!this._vertices},r.vertices.set=function(t){this._vertices=t,this._update()},n.prototype._onData=function(e){this._update("style"===e.dataType),this.fire(new t.Event(e.dataType+"data",e))},n.prototype._onDataLoading=function(e){this.fire(new t.Event(e.dataType+"dataloading",e))},Object.defineProperties(n.prototype,r),n}(Gn),Qn={showCompass:!0,showZoom:!0},tr=function(e){var n=this;this.options=t.extend({},Qn,e),this._container=dt.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return n._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return n._map.zoomOut()})),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return n._map.resetNorth()}),this._compassArrow=dt.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};tr.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},tr.prototype.onAdd=function(t){return this._map=t,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Bn(t,{button:"left",element:this._compass}),dt.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},tr.prototype.onRemove=function(){dt.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),dt.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},tr.prototype._createButton=function(t,e,n){var r=dt.create("button",t,this._container);return r.type="button",r.setAttribute("aria-label",e),r.addEventListener("click",n),r};var er,nr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},rr=function(e){function n(n){if(e.call(this),(arguments[0]instanceof t.default$1.HTMLElement||2===arguments.length)&&(n=t.extend({element:n},arguments[1])),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._draggable=n&&n.draggable||!1,this._state="inactive",n&&n.element)this._element=n.element,this._offset=t.default.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=dt.create("div");var r=dt.createNS("http://www.w3.org/2000/svg","svg");r.setAttributeNS(null,"height","41px"),r.setAttributeNS(null,"width","27px"),r.setAttributeNS(null,"viewBox","0 0 27 41");var i=dt.createNS("http://www.w3.org/2000/svg","g");i.setAttributeNS(null,"stroke","none"),i.setAttributeNS(null,"stroke-width","1"),i.setAttributeNS(null,"fill","none"),i.setAttributeNS(null,"fill-rule","evenodd");var o=dt.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"fill-rule","nonzero");var a=dt.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"transform","translate(3.0, 29.0)"),a.setAttributeNS(null,"fill","#000000");for(var s=0,u=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];s<u.length;s+=1){var l=u[s],c=dt.createNS("http://www.w3.org/2000/svg","ellipse");c.setAttributeNS(null,"opacity","0.04"),c.setAttributeNS(null,"cx","10.5"),c.setAttributeNS(null,"cy","5.80029008"),c.setAttributeNS(null,"rx",l.rx),c.setAttributeNS(null,"ry",l.ry),a.appendChild(c)}var p=dt.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"fill",this._color);var h=dt.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),p.appendChild(h);var f=dt.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"opacity","0.25"),f.setAttributeNS(null,"fill","#000000");var d=dt.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),f.appendChild(d);var m=dt.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(6.0, 7.0)"),m.setAttributeNS(null,"fill","#FFFFFF");var y=dt.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(8.0, 8.0)");var v=dt.createNS("http://www.w3.org/2000/svg","circle");v.setAttributeNS(null,"fill","#000000"),v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"cx","5.5"),v.setAttributeNS(null,"cy","5.5"),v.setAttributeNS(null,"r","5.4999962");var g=dt.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#FFFFFF"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962"),y.appendChild(v),y.appendChild(g),o.appendChild(a),o.appendChild(p),o.appendChild(f),o.appendChild(m),o.appendChild(y),r.appendChild(o),this._element.appendChild(r),this._offset=t.default.convert(n&&n.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},n.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),delete this._map),dt.remove(this._element),this._popup&&this._popup.remove(),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(t){return this._lngLat=jt.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},n.prototype.getElement=function(){return this._element},n.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},n.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},n.prototype.getPopup=function(){return this._popup},n.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},n.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=ut(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),dt.setTransform(this._element,nr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),lt(this._element,this._anchor,"marker"))},n.prototype.getOffset=function(){return this._offset},n.prototype.setOffset=function(e){return this._offset=t.default.convert(e),this._update(),this},n.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},n.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},n.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},n.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},n.prototype.isDraggable=function(){return this._draggable},n}(t.Evented),ir={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},or=function(e){function n(n){e.call(this),this.options=t.extend({},ir,n),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(e){var n;return this._map=e,this._container=dt.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==er?n(er):void 0!==t.default$1.navigator.permissions?t.default$1.navigator.permissions.query({name:"geolocation"}).then(function(t){er="denied"!==t.state,n(er)}):(er=!!t.default$1.navigator.geolocation,n(er)),this._container},n.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.default$1.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker.remove(),dt.remove(this._container),this._map=void 0},n.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()},n.prototype._updateCamera=function(t){var e=new jt(t.coords.longitude,t.coords.latitude),n=t.coords.accuracy;this._map.fitBounds(e.toBounds(n),this.options.fitBoundsOptions,{geolocateSource:!0})},n.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},n.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()},n.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},n.prototype._setupUI=function(e){var n=this;!1!==e?(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=dt.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=dt.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new rr(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==n._watchState||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new t.Event("trackuserlocationend")))})):t.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},n.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.default$1.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else t.default$1.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},n.prototype._clearWatch=function(){t.default$1.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},n}(t.Evented),ar={maxWidth:100,unit:"metric"},sr=function(e){this.options=t.extend({},ar,e),t.bindAll(["_onMove","setUnit"],this)};sr.prototype.getDefaultPosition=function(){return"bottom-left"},sr.prototype._onMove=function(){ct(this._map,this._container,this.options)},sr.prototype.onAdd=function(t){return this._map=t,this._container=dt.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},sr.prototype.onRemove=function(){dt.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},sr.prototype.setUnit=function(t){this.options.unit=t,ct(this._map,this._container,this.options)};var ur=function(){this._fullscreen=!1,t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.default$1.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.default$1.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.default$1.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.default$1.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};ur.prototype.onAdd=function(e){return this._map=e,this._mapContainer=this._map.getContainer(),this._container=dt.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._container},ur.prototype.onRemove=function(){dt.remove(this._container),this._map=null,t.default$1.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ur.prototype._checkFullscreenSupport=function(){return!!(t.default$1.document.fullscreenEnabled||t.default$1.document.mozFullScreenEnabled||t.default$1.document.msFullscreenEnabled||t.default$1.document.webkitFullscreenEnabled)},ur.prototype._setupUI=function(){var e=this._fullscreenButton=dt.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.default$1.document.addEventListener(this._fullscreenchange,this._changeIcon)},ur.prototype._isFullscreen=function(){return this._fullscreen},ur.prototype._changeIcon=function(){(t.default$1.document.fullscreenElement||t.default$1.document.mozFullScreenElement||t.default$1.document.webkitFullscreenElement||t.default$1.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},ur.prototype._onClickFullscreen=function(){this._isFullscreen()?t.default$1.document.exitFullscreen?t.default$1.document.exitFullscreen():t.default$1.document.mozCancelFullScreen?t.default$1.document.mozCancelFullScreen():t.default$1.document.msExitFullscreen?t.default$1.document.msExitFullscreen():t.default$1.document.webkitCancelFullScreen&&t.default$1.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()};var lr={closeButton:!0,closeOnClick:!0,className:""},cr=function(e){function n(n){e.call(this),this.options=t.extend(Object.create(lr),n),t.bindAll(["_update","_onClickClose"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this.fire(new t.Event("open")),this},n.prototype.isOpen=function(){return!!this._map},n.prototype.remove=function(){return this._content&&dt.remove(this._content),this._container&&(dt.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire(new t.Event("close")),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(t){return this._lngLat=jt.convert(t),this._pos=null,this._update(),this},n.prototype.setText=function(e){return this.setDOMContent(t.default$1.document.createTextNode(e))},n.prototype.setHTML=function(e){var n,r=t.default$1.document.createDocumentFragment(),i=t.default$1.document.createElement("body");for(i.innerHTML=e;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)},n.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},n.prototype._createContent=function(){this._content&&dt.remove(this._content),this._content=dt.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=dt.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},n.prototype._update=function(){var e=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=dt.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=dt.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return e._container.classList.add(t)})),this._map.transform.renderWorldCopies&&(this._lngLat=ut(this._lngLat,this._pos,this._map.transform));var n=this._pos=this._map.project(this._lngLat),r=this.options.anchor,i=function e(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.default(0,0),top:new t.default(0,n),"top-left":new t.default(r,r),"top-right":new t.default(-r,r),bottom:new t.default(0,-n),"bottom-left":new t.default(r,-r),"bottom-right":new t.default(-r,-r),left:new t.default(n,0),right:new t.default(-n,0)}}if(n instanceof t.default||Array.isArray(n)){var i=t.default.convert(n);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.default.convert(n.center||[0,0]),top:t.default.convert(n.top||[0,0]),"top-left":t.default.convert(n["top-left"]||[0,0]),"top-right":t.default.convert(n["top-right"]||[0,0]),bottom:t.default.convert(n.bottom||[0,0]),"bottom-left":t.default.convert(n["bottom-left"]||[0,0]),"bottom-right":t.default.convert(n["bottom-right"]||[0,0]),left:t.default.convert(n.left||[0,0]),right:t.default.convert(n.right||[0,0])}}return e(new t.default(0,0))}(this.options.offset);if(!r){var o,a=this._container.offsetWidth,s=this._container.offsetHeight;o=n.y+i.bottom.y<s?["top"]:n.y>this._map.transform.height-s?["bottom"]:[],n.x<a/2?o.push("left"):n.x>this._map.transform.width-a/2&&o.push("right"),r=0===o.length?"bottom":o.join("-")}var u=n.add(i[r]).round();dt.setTransform(this._container,nr[r]+" translate("+u.x+"px,"+u.y+"px)"),lt(this._container,r,"popup")}},n.prototype._onClickClose=function(){this.remove()},n}(t.Evented),pr={version:"0.47.0",supported:ft,workerCount:Math.max(Math.floor(t.default$2.hardwareConcurrency/2),1),setRTLTextPlugin:t.setRTLTextPlugin,Map:Jn,NavigationControl:tr,GeolocateControl:or,AttributionControl:Zn,ScaleControl:sr,FullscreenControl:ur,Popup:cr,Marker:rr,Style:fn,LngLat:jt,LngLatBounds:Ft,Point:t.default,Evented:t.Evented,config:xt,get accessToken(){return xt.ACCESS_TOKEN},set accessToken(t){xt.ACCESS_TOKEN=t},workerUrl:""};return pr}),r})},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=n(2),l=n.n(u),c=n(0),p=n.n(c),h=n(8),f=n.n(h),d=n(4),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=d.b?"http://localhost:3001":"https://obscure-lowlands-38066.herokuapp.com",v=function(t){function e(){var t=this;o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.handleSubmit=function(){var e=i(l.a.mark(function e(r){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.next=3,f.a.post(y+"/api/users/"+n.props.match.params.id+"/text",{phone:n.state.phone});case 3:case"end":return t.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(t){n.setState(r({},t.target.name,t.target.value))},n.state={phone:""},n}return s(e,t),m(e,[{key:"render",value:function(){return p.a.createElement("div",null,p.a.createElement("h4",null,"Send this site to a friend"),p.a.createElement("form",{onSubmit:this.handleSubmit},p.a.createElement("div",{className:"form-group form-check"},p.a.createElement("label",{htmlFor:"name"}),p.a.createElement("input",{type:"text",name:"phone",onChange:this.handleChange,className:"form-control",placeholder:"Enter text number"}),p.a.createElement("small",{id:"name",className:"form-text text-muted"})),p.a.createElement("span",null,p.a.createElement("button",{type:"submit"},"Send Text"))))}}]),e}(p.a.Component);e.a=v},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),u=n.n(s),l=n(0),c=n.n(l),p=n(1),h=n(5),f=n(11),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),m=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={adventures:[]},t}return a(e,t),d(e,[{key:"componentDidMount",value:function(){function t(){return e.apply(this,arguments)}var e=r(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.getAllUsersAdventures(this.props.user.id);case 2:return t.next=4,this.setState({adventures:this.props.adventures});case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"render",value:function(){var t=this.state.adventures,e=t.filter(function(t){var e=new Date(t.date);return Date.parse(e)>=Date.now()}),n=t.filter(function(t){var e=new Date(t.date);return Date.parse(e)<Date.now()});return c.a.createElement("div",{id:"user-adventures"},c.a.createElement("h3",null,"Upcoming Adventures"),c.a.createElement("div",{id:"future-adventures"},e.map(function(t){return c.a.createElement("div",{id:"adventure",key:t.id},c.a.createElement("h5",null,c.a.createElement(f.a,{to:"/adventures/"+t.id},t.name)))})),c.a.createElement("h3",null,"Past Adventures"),c.a.createElement("div",{id:"past-adventures"},n.map(function(t){return c.a.createElement("div",{id:"adventure",key:t.id},c.a.createElement("h5",null,c.a.createElement(f.a,{to:"/adventures/"+t.id},t.name)))})),c.a.createElement("div",null,c.a.createElement("a",{href:"/pods"},c.a.createElement("button",{className:"btn btn-secondary btn-lg btn-block"},"Create a New Adventure"))))}}]),e}(l.Component),y=function(t){return{adventures:t.user.adventures,users:t.pod.users,user:t.user}},v=function(t){return{getAllUsersAdventures:function(e){return t(Object(h.g)(e))}}};e.a=Object(p.b)(y,v)(m)}]);
//# sourceMappingURL=main.8de79814.js.map